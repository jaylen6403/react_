{"code":"import { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport * as React from 'react';\r\nimport { useMultipleSelection, useSelect } from 'downshift';\r\nimport { Button, Divider, DropdownIcon, Menu, MenuItem, Root, } from '../DropdownBase.styles';\r\nimport { CheckboxIcon } from './MultiSelect.styles';\r\nexport function MultiSelect({ actions = [], ariaLabel, ariaLabelledBy, className, hasIndicator, id, isDisabled, items, onBlur, onChange, placeholder, selectedItems, variant = 'primary', }) {\r\n    const allItems = React.useMemo(() => [...actions, ...items], [actions, items]);\r\n    const { getDropdownProps, setSelectedItems } = useMultipleSelection({\r\n        selectedItems,\r\n    });\r\n    React.useEffect(() => {\r\n        setSelectedItems(selectedItems);\r\n    }, [setSelectedItems, selectedItems]);\r\n    const selectedItemsSet = React.useMemo(() => new Set(selectedItems), [selectedItems]);\r\n    const handleChange = React.useCallback((selectedItem) => {\r\n        if (!onChange || (selectedItem === null || selectedItem === void 0 ? void 0 : selectedItem.onClick)) {\r\n            return;\r\n        }\r\n        if (selectedItemsSet.has(selectedItem)) {\r\n            selectedItemsSet.delete(selectedItem);\r\n        }\r\n        else {\r\n            selectedItemsSet.add(selectedItem);\r\n        }\r\n        onChange(Array.from(selectedItemsSet), selectedItem);\r\n    }, [onChange, selectedItemsSet]);\r\n    const handleChangeRef = React.useRef(handleChange);\r\n    React.useEffect(() => {\r\n        handleChangeRef.current = handleChange;\r\n    }, [handleChange]);\r\n    const { isOpen, getToggleButtonProps, getMenuProps, highlightedIndex, getItemProps, } = useSelect({\r\n        selectedItem: null,\r\n        id,\r\n        items: allItems,\r\n        stateReducer: (state, actionAndChanges) => {\r\n            const { changes, type } = actionAndChanges;\r\n            switch (type) {\r\n                case useSelect.stateChangeTypes.MenuKeyDownEnter:\r\n                case useSelect.stateChangeTypes.MenuKeyDownSpaceButton:\r\n                case useSelect.stateChangeTypes.ItemClick: {\r\n                    return Object.assign(Object.assign({}, state), { selectedItem: changes.selectedItem, isOpen: true });\r\n                }\r\n            }\r\n            return Object.assign(Object.assign({}, state), changes);\r\n        },\r\n        onStateChange: ({ type, selectedItem }) => {\r\n            switch (type) {\r\n                case useSelect.stateChangeTypes.MenuKeyDownEnter:\r\n                case useSelect.stateChangeTypes.MenuKeyDownSpaceButton:\r\n                case useSelect.stateChangeTypes.ItemClick: {\r\n                    if (!selectedItem) {\r\n                        return;\r\n                    }\r\n                    if (selectedItem.onClick) {\r\n                        return selectedItem.onClick();\r\n                    }\r\n                    handleChangeRef.current(selectedItem);\r\n                    break;\r\n                }\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n    });\r\n    const buttonProps = Object.assign({}, getToggleButtonProps(getDropdownProps({ disabled: isDisabled, preventKeyAction: isOpen })));\r\n    return (_jsxs(Root, Object.assign({ className: className, isOpen: isOpen, onBlur: (e) => {\r\n            if (e.relatedTarget && e.relatedTarget === buttonProps.ref.current) {\r\n                return;\r\n            }\r\n            onBlur === null || onBlur === void 0 ? void 0 : onBlur();\r\n        }, variant: variant }, { children: [_jsxs(Button, Object.assign({}, buttonProps, { \"aria-label\": ariaLabel, \"aria-labelledby\": ariaLabelledBy }, { children: [placeholder, hasIndicator && _jsx(DropdownIcon, { iconCode: \"chevron-down\" }, void 0)] }), void 0), _jsx(Menu, Object.assign({}, getMenuProps(), { \"aria-labelledby\": buttonProps.id }, { children: isOpen &&\r\n                    allItems.map((item, index) => {\r\n                        const isAction = item.onClick;\r\n                        return (_jsxs(React.Fragment, { children: [_jsxs(MenuItem, Object.assign({}, getItemProps({\r\n                                    item,\r\n                                    index,\r\n                                    disabled: item.isDisabled,\r\n                                }), { alignment: item.alignment, hasSectionBreak: item.hasSectionBreak, isAction: isAction, isHighlighted: highlightedIndex === index, variant: variant, width: item.width }, { children: [!isAction && (_jsx(CheckboxIcon, { iconCode: selectedItemsSet.has(item) ? 'check-square' : 'square' }, void 0)), item.display] }), void 0), item.hasSectionBreak && _jsx(Divider, {}, void 0)] }, `${item.display}-${index}`));\r\n                    }) }), void 0)] }), void 0));\r\n}\r\n//# sourceMappingURL=MultiSelect.js.map","references":["/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/@types/react/index.d.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/downshift/typings/index.d.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components/Dropdown/DropdownBase.styles.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components/Dropdown/DropdownBase.types.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components/Dropdown/MultiSelect/MultiSelect.styles.ts"],"map":"{\"version\":3,\"file\":\"MultiSelect.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../libs/design-system/src/lib/components/Dropdown/MultiSelect/MultiSelect.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/.cache/rollup-plugin-typescript2/placeholder/lib/components/Dropdown/MultiSelect/MultiSelect.d.ts","writeByteOrderMark":false,"text":"import * as React from 'react';\r\nimport { Variant } from '../DropdownBase.styles';\r\nimport { BaseMenuItem } from '../DropdownBase.types';\r\nexport interface MenuItem<T> extends BaseMenuItem {\r\n    /**\r\n     * Text alignment.\r\n     */\r\n    alignment?: 'left' | 'center' | 'right';\r\n    /**\r\n     * Only for Action Links - Click handler for that action link.\r\n     */\r\n    onClick?: () => void;\r\n    /**\r\n     * Meta data to be attached to an item.\r\n     */\r\n    meta?: T;\r\n    /**\r\n     * Width of the item.\r\n     */\r\n    width?: string;\r\n}\r\ninterface MultiSelectProps<T> {\r\n    /**\r\n     * Action links to be rendered on top of checkboxes.\r\n     */\r\n    actions?: MenuItem<T>[];\r\n    /**\r\n     * Aria label for the select button in case id is not passed and linked aria-labelledby.\r\n     */\r\n    ariaLabel?: string;\r\n    /**\r\n     * Aria labelledby.\r\n     */\r\n    ariaLabelledBy?: string;\r\n    /**\r\n     * Available className to be attached to the root element.\r\n     */\r\n    className?: string;\r\n    /**\r\n     * Option to include the chevron indicator.\r\n     */\r\n    hasIndicator?: boolean;\r\n    /**\r\n     * Id to be attached to a button.\r\n     */\r\n    id?: string;\r\n    /**\r\n     * Disable the select button.\r\n     */\r\n    isDisabled?: boolean;\r\n    /**\r\n     * Multi-select checkbox items.\r\n     */\r\n    items: MenuItem<T>[];\r\n    /**\r\n     * Handler for blur event.\r\n     */\r\n    onBlur?: () => void;\r\n    /**\r\n     * Handler for change event which includes the suggested list of items and the item clicked.\r\n     */\r\n    onChange?: (items: MenuItem<T>[], meta: MenuItem<T>) => void;\r\n    /**\r\n     * Text for select button.\r\n     */\r\n    placeholder: React.ReactNode;\r\n    /**\r\n     * List of selected items to be checked.\r\n     */\r\n    selectedItems: MenuItem<T>[];\r\n    /**\r\n     * Style variant.\r\n     */\r\n    variant: Variant;\r\n}\r\nexport declare function MultiSelect<T>({ actions, ariaLabel, ariaLabelledBy, className, hasIndicator, id, isDisabled, items, onBlur, onChange, placeholder, selectedItems, variant, }: MultiSelectProps<T>): JSX.Element;\r\nexport {};\r\n"}}
