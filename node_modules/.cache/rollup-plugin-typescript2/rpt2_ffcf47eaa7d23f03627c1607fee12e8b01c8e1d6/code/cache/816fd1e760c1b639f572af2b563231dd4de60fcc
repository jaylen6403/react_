{"code":"import { __rest } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { useEffect, useState } from 'react';\r\nimport { useCombobox } from 'downshift';\r\nimport { Root } from '../LumaDropDown.style';\r\nimport { MaxLengthValue, } from '../LumaDropDownBasicType';\r\nimport { LumaIcon } from '../../LumaIcon';\r\nimport { LumaTextEntry } from '../../LumaTextEntry';\r\nimport { LumaDropDownBox } from '../../LumaDropdownBox';\r\nimport { LumaMultiDropDownOption } from './LumaMultiDropDownOption';\r\nconst inputDisplayValue = (selectedDropdownItems) => {\r\n    const valueSelected = selectedDropdownItems.map((item) => {\r\n        return item === null || item === void 0 ? void 0 : item.label;\r\n    });\r\n    let firstSelected = valueSelected[0] || '';\r\n    if (firstSelected.length > MaxLengthValue) {\r\n        firstSelected = firstSelected.substring(0, MaxLengthValue) + '...';\r\n    }\r\n    return selectedDropdownItems.length > 1\r\n        ? `${firstSelected}, +${selectedDropdownItems.length - 1}`\r\n        : `${firstSelected}`;\r\n};\r\nexport const LumaMultiDropDown = (_a) => {\r\n    var { name, id, placeholder, error, readOnly = true, disabled, fullWidth, helperText, size = 'medium', items = [], defaultSelectedItems, onChange, handleBlur } = _a, rest = __rest(_a, [\"name\", \"id\", \"placeholder\", \"error\", \"readOnly\", \"disabled\", \"fullWidth\", \"helperText\", \"size\", \"items\", \"defaultSelectedItems\", \"onChange\", \"handleBlur\"]);\r\n    const [allItems, setAllItems] = useState(defaultSelectedItems || []);\r\n    const { isOpen, getMenuProps, highlightedIndex, getItemProps, getInputProps, getComboboxProps, openMenu, closeMenu, } = useCombobox({\r\n        items,\r\n        itemToString: (item) => { var _a; return (_a = item === null || item === void 0 ? void 0 : item.label) !== null && _a !== void 0 ? _a : ''; },\r\n        selectedItem: null,\r\n        stateReducer(state, actionAndChanges) {\r\n            const { changes, type } = actionAndChanges;\r\n            switch (type) {\r\n                case useCombobox.stateChangeTypes.InputKeyDownEnter:\r\n                case useCombobox.stateChangeTypes.ItemClick:\r\n                case useCombobox.stateChangeTypes.InputBlur:\r\n                    return Object.assign(Object.assign({}, changes), { isOpen: !!changes.selectedItem });\r\n            }\r\n            return changes;\r\n        },\r\n        onStateChange({ type, selectedItem }) {\r\n            let newItems = [];\r\n            switch (type) {\r\n                case useCombobox.stateChangeTypes.InputKeyDownEnter:\r\n                case useCombobox.stateChangeTypes.ItemClick:\r\n                    if (selectedItem) {\r\n                        const index = allItems.findIndex(({ value }) => value === selectedItem.value);\r\n                        if (index > 0) {\r\n                            newItems = [\r\n                                ...allItems.slice(0, index),\r\n                                ...allItems.slice(index + 1),\r\n                            ];\r\n                        }\r\n                        else if (index === 0) {\r\n                            newItems = [...allItems.slice(1)];\r\n                        }\r\n                        else {\r\n                            newItems = [...allItems, selectedItem];\r\n                        }\r\n                        setAllItems(newItems);\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n    });\r\n    useEffect(() => {\r\n        onChange === null || onChange === void 0 ? void 0 : onChange(allItems);\r\n    }, [allItems, onChange]);\r\n    return (_jsxs(Root, Object.assign({ size: size, error: error, fullWidth: fullWidth }, getComboboxProps(), { children: [_jsx(LumaTextEntry, Object.assign({}, getInputProps(), { label: placeholder, disabled: disabled, readOnly: readOnly, value: inputDisplayValue(allItems), icon: _jsx(LumaIcon, { onClick: isOpen ? closeMenu : openMenu, iconCode: isOpen ? 'angle-up' : 'angle-down' }, void 0), fullWidth: fullWidth, helperText: helperText, sizeVariant: size, error: error, useByDropdown: true, onClick: () => {\r\n                    if (!isOpen)\r\n                        openMenu();\r\n                    else\r\n                        closeMenu();\r\n                } }, rest), void 0), !readOnly ? (_jsx(LumaDropDownBox, { size: size, isOpen: isOpen, items: items, selectedItems: allItems, getMenuProps: getMenuProps, highlightedIndex: highlightedIndex, getItemProps: getItemProps, renderComponent: _jsx(LumaMultiDropDownOption, {}, void 0), id: id }, void 0)) : null] }), void 0));\r\n};\r\n//# sourceMappingURL=LumaMultiDropDown.js.map","references":["/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/@types/react/index.d.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/downshift/typings/index.d.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaDropDown.style.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaDropDownBasicType.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaIcon/index.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaTextEntry/index.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdownBox/index.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaMultiDropDown/LumaMultiDropDownOption.tsx"],"map":"{\"version\":3,\"file\":\"LumaMultiDropDown.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaMultiDropDown/LumaMultiDropDown.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/.cache/rollup-plugin-typescript2/placeholder/lib/components-Luma/components/LumaDropdown/LumaMultiDropDown/LumaMultiDropDown.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"react\" />\r\nimport { LumaMultiDropDownProps } from '../LumaDropDownBasicType';\r\nexport declare const LumaMultiDropDown: ({ name, id, placeholder, error, readOnly, disabled, fullWidth, helperText, size, items, defaultSelectedItems, onChange, handleBlur, ...rest }: LumaMultiDropDownProps) => JSX.Element;\r\n"}}
