{"code":"import { __assign, __rest, __spreadArray } from \"tslib\";\r\nimport { jsx as _jsx, jsxs as _jsxs } from \"react/jsx-runtime\";\r\nimport { useEffect, useState } from 'react';\r\nimport { useCombobox } from 'downshift';\r\nimport { Root } from '../LumaDropDown.style';\r\nimport { MaxLengthValue, } from '../LumaDropDownBasicType';\r\nimport { LumaIcon } from '../../LumaIcon';\r\nimport { LumaTextEntry } from '../../LumaTextEntry';\r\nimport { LumaDropDownBox } from '../../LumaDropdownBox';\r\nimport { LumaMultiDropDownOption } from './LumaMultiDropDownOption';\r\nvar inputDisplayValue = function (selectedDropdownItems) {\r\n    var valueSelected = selectedDropdownItems.map(function (item) {\r\n        return item === null || item === void 0 ? void 0 : item.label;\r\n    });\r\n    var firstSelected = valueSelected[0] || '';\r\n    if (firstSelected.length > MaxLengthValue) {\r\n        firstSelected = firstSelected.substring(0, MaxLengthValue) + '...';\r\n    }\r\n    return selectedDropdownItems.length > 1\r\n        ? \"\".concat(firstSelected, \", +\").concat(selectedDropdownItems.length - 1)\r\n        : \"\".concat(firstSelected);\r\n};\r\nexport var LumaMultiDropDown = function (_a) {\r\n    var name = _a.name, id = _a.id, placeholder = _a.placeholder, error = _a.error, _b = _a.readOnly, readOnly = _b === void 0 ? true : _b, disabled = _a.disabled, fullWidth = _a.fullWidth, helperText = _a.helperText, _c = _a.size, size = _c === void 0 ? 'medium' : _c, _d = _a.items, items = _d === void 0 ? [] : _d, defaultSelectedItems = _a.defaultSelectedItems, onChange = _a.onChange, handleBlur = _a.handleBlur, rest = __rest(_a, [\"name\", \"id\", \"placeholder\", \"error\", \"readOnly\", \"disabled\", \"fullWidth\", \"helperText\", \"size\", \"items\", \"defaultSelectedItems\", \"onChange\", \"handleBlur\"]);\r\n    var _e = useState(defaultSelectedItems || []), allItems = _e[0], setAllItems = _e[1];\r\n    var _f = useCombobox({\r\n        items: items,\r\n        itemToString: function (item) { var _a; return (_a = item === null || item === void 0 ? void 0 : item.label) !== null && _a !== void 0 ? _a : ''; },\r\n        selectedItem: null,\r\n        stateReducer: function (state, actionAndChanges) {\r\n            var changes = actionAndChanges.changes, type = actionAndChanges.type;\r\n            switch (type) {\r\n                case useCombobox.stateChangeTypes.InputKeyDownEnter:\r\n                case useCombobox.stateChangeTypes.ItemClick:\r\n                case useCombobox.stateChangeTypes.InputBlur:\r\n                    return __assign(__assign({}, changes), { isOpen: !!changes.selectedItem });\r\n            }\r\n            return changes;\r\n        },\r\n        onStateChange: function (_a) {\r\n            var type = _a.type, selectedItem = _a.selectedItem;\r\n            var newItems = [];\r\n            switch (type) {\r\n                case useCombobox.stateChangeTypes.InputKeyDownEnter:\r\n                case useCombobox.stateChangeTypes.ItemClick:\r\n                    if (selectedItem) {\r\n                        var index = allItems.findIndex(function (_a) {\r\n                            var value = _a.value;\r\n                            return value === selectedItem.value;\r\n                        });\r\n                        if (index > 0) {\r\n                            newItems = __spreadArray(__spreadArray([], allItems.slice(0, index), true), allItems.slice(index + 1), true);\r\n                        }\r\n                        else if (index === 0) {\r\n                            newItems = __spreadArray([], allItems.slice(1), true);\r\n                        }\r\n                        else {\r\n                            newItems = __spreadArray(__spreadArray([], allItems, true), [selectedItem], false);\r\n                        }\r\n                        setAllItems(newItems);\r\n                    }\r\n                    break;\r\n                default:\r\n                    break;\r\n            }\r\n        },\r\n    }), isOpen = _f.isOpen, getMenuProps = _f.getMenuProps, highlightedIndex = _f.highlightedIndex, getItemProps = _f.getItemProps, getInputProps = _f.getInputProps, getComboboxProps = _f.getComboboxProps, openMenu = _f.openMenu, closeMenu = _f.closeMenu;\r\n    useEffect(function () {\r\n        onChange === null || onChange === void 0 ? void 0 : onChange(allItems);\r\n    }, [allItems, onChange]);\r\n    return (_jsxs(Root, __assign({ size: size, error: error, fullWidth: fullWidth }, getComboboxProps(), { children: [_jsx(LumaTextEntry, __assign({}, getInputProps(), { label: placeholder, disabled: disabled, readOnly: readOnly, value: inputDisplayValue(allItems), icon: _jsx(LumaIcon, { onClick: isOpen ? closeMenu : openMenu, iconCode: isOpen ? 'angle-up' : 'angle-down' }, void 0), fullWidth: fullWidth, helperText: helperText, sizeVariant: size, error: error, useByDropdown: true, onClick: function () {\r\n                    if (!isOpen)\r\n                        openMenu();\r\n                    else\r\n                        closeMenu();\r\n                } }, rest), void 0), !readOnly ? (_jsx(LumaDropDownBox, { size: size, isOpen: isOpen, items: items, selectedItems: allItems, getMenuProps: getMenuProps, highlightedIndex: highlightedIndex, getItemProps: getItemProps, renderComponent: _jsx(LumaMultiDropDownOption, {}, void 0), id: id }, void 0)) : null] }), void 0));\r\n};\r\n//# sourceMappingURL=LumaMultiDropDown.js.map","references":["/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/@types/react/index.d.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/downshift/typings/index.d.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaDropDown.style.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaDropDownBasicType.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaIcon/index.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaTextEntry/index.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdownBox/index.ts","/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaMultiDropDown/LumaMultiDropDownOption.tsx"],"map":"{\"version\":3,\"file\":\"LumaMultiDropDown.js\",\"sourceRoot\":\"\",\"sources\":[\"../../../../../../../../../libs/design-system/src/lib/components-Luma/components/LumaDropdown/LumaMultiDropDown/LumaMultiDropDown.tsx\"],\"names\":[],\"mappings\":\"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\"}","dts":{"name":"/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/.cache/rollup-plugin-typescript2/placeholder/lib/components-Luma/components/LumaDropdown/LumaMultiDropDown/LumaMultiDropDown.d.ts","writeByteOrderMark":false,"text":"/// <reference types=\"react\" />\r\nimport { LumaMultiDropDownProps } from '../LumaDropDownBasicType';\r\nexport declare const LumaMultiDropDown: ({ name, id, placeholder, error, readOnly, disabled, fullWidth, helperText, size, items, defaultSelectedItems, onChange, handleBlur, ...rest }: LumaMultiDropDownProps) => JSX.Element;\r\n"}}
