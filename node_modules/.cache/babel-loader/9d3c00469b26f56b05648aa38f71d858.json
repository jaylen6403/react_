{"ast":null,"code":"import { getLumaAppLogin, isLocal } from '@luma-fe-workspace/common';\nconst LOGOUT_TRIGGERED = 'logout_triggered';\nconst YES = 'yes';\nconst NO = 'no';\nexport const syncLogout = event => {\n  const logoutPath = isLocal ? `${window.location.origin}/` : getLumaAppLogin();\n\n  if (event.key === LOGOUT_TRIGGERED && event.newValue === YES) {\n    if (window.location !== window.parent.location) {\n      // If an iframe: reload parent\n      window.parent.location.href = logoutPath;\n    } else {\n      window.location.href = logoutPath;\n    }\n  }\n};\nexport const logoutOnAllTabs = () => {\n  localStorage.setItem(LOGOUT_TRIGGERED, YES); // logout across tabs\n\n  localStorage.setItem(LOGOUT_TRIGGERED, NO);\n};","map":{"version":3,"names":["getLumaAppLogin","isLocal","LOGOUT_TRIGGERED","YES","NO","syncLogout","event","logoutPath","window","location","origin","key","newValue","parent","href","logoutOnAllTabs","localStorage","setItem"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/redux/src/utils/logout.ts"],"sourcesContent":["import { getLumaAppLogin, isLocal } from '@luma-fe-workspace/common';\n\nconst LOGOUT_TRIGGERED = 'logout_triggered';\nconst YES = 'yes';\nconst NO = 'no';\n\nexport const syncLogout = (event: StorageEvent): void => {\n  const logoutPath = isLocal ? `${window.location.origin}/` : getLumaAppLogin();\n  if (event.key === LOGOUT_TRIGGERED && event.newValue === YES) {\n    if (window.location !== window.parent.location) {\n      // If an iframe: reload parent\n      window.parent.location.href = logoutPath;\n    } else {\n      window.location.href = logoutPath;\n    }\n  }\n};\n\nexport const logoutOnAllTabs = () => {\n  localStorage.setItem(LOGOUT_TRIGGERED, YES); // logout across tabs\n  localStorage.setItem(LOGOUT_TRIGGERED, NO);\n};\n"],"mappings":"AAAA,SAASA,eAAT,EAA0BC,OAA1B,QAAyC,2BAAzC;AAEA,MAAMC,gBAAgB,GAAG,kBAAzB;AACA,MAAMC,GAAG,GAAG,KAAZ;AACA,MAAMC,EAAE,GAAG,IAAX;AAEA,OAAO,MAAMC,UAAU,GAAIC,KAAD,IAA+B;EACvD,MAAMC,UAAU,GAAGN,OAAO,GAAI,GAAEO,MAAM,CAACC,QAAP,CAAgBC,MAAO,GAA7B,GAAkCV,eAAe,EAA3E;;EACA,IAAIM,KAAK,CAACK,GAAN,KAAcT,gBAAd,IAAkCI,KAAK,CAACM,QAAN,KAAmBT,GAAzD,EAA8D;IAC5D,IAAIK,MAAM,CAACC,QAAP,KAAoBD,MAAM,CAACK,MAAP,CAAcJ,QAAtC,EAAgD;MAC9C;MACAD,MAAM,CAACK,MAAP,CAAcJ,QAAd,CAAuBK,IAAvB,GAA8BP,UAA9B;IACD,CAHD,MAGO;MACLC,MAAM,CAACC,QAAP,CAAgBK,IAAhB,GAAuBP,UAAvB;IACD;EACF;AACF,CAVM;AAYP,OAAO,MAAMQ,eAAe,GAAG,MAAM;EACnCC,YAAY,CAACC,OAAb,CAAqBf,gBAArB,EAAuCC,GAAvC,EADmC,CACU;;EAC7Ca,YAAY,CAACC,OAAb,CAAqBf,gBAArB,EAAuCE,EAAvC;AACD,CAHM"},"metadata":{},"sourceType":"module"}