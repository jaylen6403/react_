{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/components/EventDetail/EventDataFooter/EventDataFooter.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.promise.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { useEffect, useMemo } from 'react';\nimport { LumaButton } from '@luma-fe-workspace/design-system';\nimport { EmailActions, EmailActionsWrapper, EmailActionsText } from './EventDataFooter.styles';\nimport { useSendUsingPostMutation } from '@luma-fe-workspace/redux';\nimport { formatEventType, handleLMProductLink } from '../../../utils/gridUtils';\nimport { getTemplateValues } from '../../../utils/emailUtils';\nimport { useEventConfirmationOptions, StatusOptions } from '../../../utils/hooks/useEventConfirmationOptions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const EventDataFooter = ({\n  emailRecipientsTo,\n  emailRecipientsCC,\n  emailRecipientsBCC,\n  eventData,\n  payout,\n  templateKey,\n  closeDrawer: _closeDrawer = () => {\n    /* do nothing */\n  }\n}) => {\n  _s();\n\n  const [sendUsingPost, {\n    status\n  }] = useSendUsingPostMutation();\n  const {\n    toastData\n  } = useEventConfirmationOptions();\n  const emailTemplateValues = useMemo(() => getTemplateValues(eventData, payout), [eventData, payout]);\n  useEffect(() => {\n    toastData.setOpen(true);\n\n    if (status === 'fulfilled') {\n      toastData.setStatus(StatusOptions.Success);\n    } else if (status === 'rejected') {\n      toastData.setStatus(StatusOptions.Failure);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [status]);\n\n  const handleSendEmail = async () => {\n    try {\n      await sendUsingPost({\n        emailTemplate: {\n          to: emailRecipientsTo,\n          cc: emailRecipientsCC,\n          bcc: emailRecipientsBCC,\n          from: 'support@lumafintech.com',\n          subject: `${formatEventType(eventData.eventType)} Notification ${emailTemplateValues['description']} ${eventData.productSymbol || ''}`,\n          templateKey: templateKey,\n          companyKey: 'luma',\n          model: emailTemplateValues\n        }\n      });\n    } catch (_unused) {\n      console.error(Error);\n    }\n\n    _closeDrawer();\n  };\n\n  return /*#__PURE__*/_jsxDEV(EmailActionsWrapper, {\n    children: /*#__PURE__*/_jsxDEV(EmailActions, {\n      children: [/*#__PURE__*/_jsxDEV(LumaButton, {\n        variant: \"secondary\",\n        size: \"medium\",\n        onClick: () => handleLMProductLink(eventData.productIdentifier),\n        children: /*#__PURE__*/_jsxDEV(EmailActionsText, {\n          children: \"View in Lifecycle\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 91,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 86,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(LumaButton, {\n        variant: \"primary\",\n        size: \"medium\",\n        onClick: handleSendEmail,\n        children: /*#__PURE__*/_jsxDEV(EmailActionsText, {\n          children: \"Send Event Email\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 94,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this);\n};\n\n_s(EventDataFooter, \"E78z4orlLdDr8Xlep6uSHLB/E8g=\", false, function () {\n  return [useSendUsingPostMutation, useEventConfirmationOptions];\n});\n\n_c = EventDataFooter;\n\nvar _c;\n\n$RefreshReg$(_c, \"EventDataFooter\");","map":{"version":3,"names":["useEffect","useMemo","LumaButton","EmailActions","EmailActionsWrapper","EmailActionsText","useSendUsingPostMutation","formatEventType","handleLMProductLink","getTemplateValues","useEventConfirmationOptions","StatusOptions","EventDataFooter","emailRecipientsTo","emailRecipientsCC","emailRecipientsBCC","eventData","payout","templateKey","closeDrawer","sendUsingPost","status","toastData","emailTemplateValues","setOpen","setStatus","Success","Failure","handleSendEmail","emailTemplate","to","cc","bcc","from","subject","eventType","productSymbol","companyKey","model","console","error","Error","productIdentifier"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/components/EventDetail/EventDataFooter/EventDataFooter.tsx"],"sourcesContent":["import { useEffect, useMemo } from 'react';\nimport { LumaButton } from '@luma-fe-workspace/design-system';\nimport {\n  EmailActions,\n  EmailActionsWrapper,\n  EmailActionsText,\n} from './EventDataFooter.styles';\nimport {\n  EventProductData,\n  useSendUsingPostMutation,\n} from '@luma-fe-workspace/redux';\n\nimport { formatEventType, handleLMProductLink } from '../../../utils/gridUtils';\nimport { getTemplateValues } from '../../../utils/emailUtils';\nimport {\n  useEventConfirmationOptions,\n  StatusOptions,\n} from '../../../utils/hooks/useEventConfirmationOptions';\n\ninterface Props {\n  emailRecipientsTo: string[];\n  emailRecipientsCC: string[];\n  emailRecipientsBCC: string[];\n  eventData: EventProductData;\n  payout: string;\n  templateKey: string;\n  closeDrawer?: () => void;\n}\nexport const EventDataFooter = ({\n  emailRecipientsTo,\n  emailRecipientsCC,\n  emailRecipientsBCC,\n  eventData,\n  payout,\n  templateKey,\n  closeDrawer = () => {\n    /* do nothing */\n  },\n}: Props) => {\n  const [sendUsingPost, { status }] = useSendUsingPostMutation();\n  const { toastData } = useEventConfirmationOptions();\n\n  const emailTemplateValues: { [key: string]: string | undefined } = useMemo(\n    () => getTemplateValues(eventData, payout),\n    [eventData, payout]\n  );\n\n  useEffect(() => {\n    toastData.setOpen(true);\n\n    if (status === 'fulfilled') {\n      toastData.setStatus(StatusOptions.Success);\n    } else if (status === 'rejected') {\n      toastData.setStatus(StatusOptions.Failure);\n    }\n\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [status]);\n\n  const handleSendEmail = async () => {\n    try {\n      await sendUsingPost({\n        emailTemplate: {\n          to: emailRecipientsTo,\n          cc: emailRecipientsCC,\n          bcc: emailRecipientsBCC,\n          from: 'support@lumafintech.com',\n          subject: `${formatEventType(eventData.eventType)} Notification ${\n            emailTemplateValues['description']\n          } ${eventData.productSymbol || ''}`,\n          templateKey: templateKey,\n          companyKey: 'luma',\n          model: emailTemplateValues,\n        },\n      });\n    } catch {\n      console.error(Error);\n    }\n\n    closeDrawer();\n  };\n\n  return (\n    <EmailActionsWrapper>\n      <EmailActions>\n        <LumaButton\n          variant=\"secondary\"\n          size=\"medium\"\n          onClick={() => handleLMProductLink(eventData.productIdentifier)}\n        >\n          <EmailActionsText>View in Lifecycle</EmailActionsText>\n        </LumaButton>\n        <LumaButton variant=\"primary\" size=\"medium\" onClick={handleSendEmail}>\n          <EmailActionsText>Send Event Email</EmailActionsText>\n        </LumaButton>\n      </EmailActions>\n    </EmailActionsWrapper>\n  );\n};\n"],"mappings":";;;;;;;AAAA,SAASA,SAAT,EAAoBC,OAApB,QAAmC,OAAnC;AACA,SAASC,UAAT,QAA2B,kCAA3B;AACA,SACEC,YADF,EAEEC,mBAFF,EAGEC,gBAHF,QAIO,0BAJP;AAKA,SAEEC,wBAFF,QAGO,0BAHP;AAKA,SAASC,eAAT,EAA0BC,mBAA1B,QAAqD,0BAArD;AACA,SAASC,iBAAT,QAAkC,2BAAlC;AACA,SACEC,2BADF,EAEEC,aAFF,QAGO,kDAHP;;AAcA,OAAO,MAAMC,eAAe,GAAG,CAAC;EAC9BC,iBAD8B;EAE9BC,iBAF8B;EAG9BC,kBAH8B;EAI9BC,SAJ8B;EAK9BC,MAL8B;EAM9BC,WAN8B;EAO9BC,WAAW,EAAXA,YAAW,GAAG,MAAM;IAClB;EACD;AAT6B,CAAD,KAUlB;EAAA;;EACX,MAAM,CAACC,aAAD,EAAgB;IAAEC;EAAF,CAAhB,IAA8Bf,wBAAwB,EAA5D;EACA,MAAM;IAAEgB;EAAF,IAAgBZ,2BAA2B,EAAjD;EAEA,MAAMa,mBAA0D,GAAGtB,OAAO,CACxE,MAAMQ,iBAAiB,CAACO,SAAD,EAAYC,MAAZ,CADiD,EAExE,CAACD,SAAD,EAAYC,MAAZ,CAFwE,CAA1E;EAKAjB,SAAS,CAAC,MAAM;IACdsB,SAAS,CAACE,OAAV,CAAkB,IAAlB;;IAEA,IAAIH,MAAM,KAAK,WAAf,EAA4B;MAC1BC,SAAS,CAACG,SAAV,CAAoBd,aAAa,CAACe,OAAlC;IACD,CAFD,MAEO,IAAIL,MAAM,KAAK,UAAf,EAA2B;MAChCC,SAAS,CAACG,SAAV,CAAoBd,aAAa,CAACgB,OAAlC;IACD,CAPa,CASd;;EACD,CAVQ,EAUN,CAACN,MAAD,CAVM,CAAT;;EAYA,MAAMO,eAAe,GAAG,YAAY;IAClC,IAAI;MACF,MAAMR,aAAa,CAAC;QAClBS,aAAa,EAAE;UACbC,EAAE,EAAEjB,iBADS;UAEbkB,EAAE,EAAEjB,iBAFS;UAGbkB,GAAG,EAAEjB,kBAHQ;UAIbkB,IAAI,EAAE,yBAJO;UAKbC,OAAO,EAAG,GAAE3B,eAAe,CAACS,SAAS,CAACmB,SAAX,CAAsB,iBAC/CZ,mBAAmB,CAAC,aAAD,CACpB,IAAGP,SAAS,CAACoB,aAAV,IAA2B,EAAG,EAPrB;UAQblB,WAAW,EAAEA,WARA;UASbmB,UAAU,EAAE,MATC;UAUbC,KAAK,EAAEf;QAVM;MADG,CAAD,CAAnB;IAcD,CAfD,CAeE,gBAAM;MACNgB,OAAO,CAACC,KAAR,CAAcC,KAAd;IACD;;IAEDtB,YAAW;EACZ,CArBD;;EAuBA,oBACE,QAAC,mBAAD;IAAA,uBACE,QAAC,YAAD;MAAA,wBACE,QAAC,UAAD;QACE,OAAO,EAAC,WADV;QAEE,IAAI,EAAC,QAFP;QAGE,OAAO,EAAE,MAAMX,mBAAmB,CAACQ,SAAS,CAAC0B,iBAAX,CAHpC;QAAA,uBAKE,QAAC,gBAAD;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MALF;QAAA;QAAA;QAAA;MAAA,QADF,eAQE,QAAC,UAAD;QAAY,OAAO,EAAC,SAApB;QAA8B,IAAI,EAAC,QAAnC;QAA4C,OAAO,EAAEd,eAArD;QAAA,uBACE,QAAC,gBAAD;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QARF;IAAA;MAAA;MAAA;MAAA;IAAA;EADF;IAAA;IAAA;IAAA;EAAA,QADF;AAgBD,CAtEM;;GAAMhB,e;UAWyBN,wB,EACdI,2B;;;KAZXE,e"},"metadata":{},"sourceType":"module"}