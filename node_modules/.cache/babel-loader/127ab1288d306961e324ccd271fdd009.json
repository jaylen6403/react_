{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/dashboard/src/components/Insights/TopProductsWidget/TopProductsTable/TopProductsTable.tsx\";\nimport \"core-js/modules/es.number.to-fixed.js\";\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.reduce.js\";\nimport { LumaTable } from '../../../LumaTable';\nimport { Cell, CurrencyChip, OverflowContainer, UnderlierChip } from './TopProductsTable.styles';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst nFormatter = num => {\n  return `${(num / 1000000).toFixed(2)}M`;\n};\n\nconst sortByNotional = topProductsData => {\n  const arrayToSort = [...topProductsData];\n  return arrayToSort.sort((a, b) => {\n    if (a.notional && b.notional) {\n      return a.notional < b.notional ? 1 : -1;\n    } else {\n      return a.notional ? 1 : -1;\n    }\n  });\n};\n\nconst createUnderlierChip = (content, index) => /*#__PURE__*/_jsxDEV(UnderlierChip, {\n  children: content\n}, `underlier-${index}`, false, {\n  fileName: _jsxFileName,\n  lineNumber: 39,\n  columnNumber: 3\n}, this);\n\nconst buildUnderliers = underliers => {\n  const numberOfUnderliers = (underliers == null ? void 0 : underliers.length) || '';\n\n  if (underliers === undefined || underliers.length === 0) {\n    return null;\n  }\n\n  if (underliers.length && numberOfUnderliers <= 4) {\n    return underliers.map((underlier, i) => {\n      return createUnderlierChip(underlier, i);\n    });\n  }\n\n  if (underliers.length && numberOfUnderliers > 4) {\n    const underlierArr = underliers.slice(0, 3).map((underlier, i) => {\n      return createUnderlierChip(underlier, i);\n    });\n    return [...underlierArr, createUnderlierChip(`+${underliers.length - 3} MORE`, 4)];\n  }\n\n  return;\n};\n\nexport const TopProductsTable = ({\n  data\n}) => {\n  const headers = ['Product ID', 'Structure', 'Underliers', 'Tenor Yrs', 'Notional'];\n  const sortedTableData = sortByNotional(data);\n\n  const buildTopProductsRow = (rowData, idx) => {\n    return [/*#__PURE__*/_jsxDEV(Cell, {\n      children: rowData.cusip\n    }, `${rowData.cusip}-${idx}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 79,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Cell, {\n      children: /*#__PURE__*/_jsxDEV(OverflowContainer, {\n        children: rowData.structure\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, `${rowData.structure}-${idx}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Cell, {\n      children: buildUnderliers(rowData.underliers)\n    }, `underliers-${idx + Math.random()}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Cell, {\n      children: (Math.round(rowData.tenor * 10) / 10).toFixed(1)\n    }, `${rowData.tenor}-${idx}`, false, {\n      fileName: _jsxFileName,\n      lineNumber: 86,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Cell, {\n      children: [nFormatter(rowData.notional), /*#__PURE__*/_jsxDEV(CurrencyChip, {\n        children: rowData.currency\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 91,\n        columnNumber: 9\n      }, this)]\n    }, `${rowData.notional}-${idx}`, true, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 7\n    }, this)];\n  };\n\n  const headerArray = [headers.map((header, idx) => /*#__PURE__*/_jsxDEV(Cell, {\n    children: header\n  }, `header${idx}`, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 34\n  }, this))];\n  const topProductsRows = sortedTableData.reduce((acc, cur, idx) => {\n    return {\n      rows: [...acc.rows, buildTopProductsRow(cur, idx)],\n      links: ['']\n    };\n  }, {\n    rows: headerArray,\n    links: []\n  });\n  return /*#__PURE__*/_jsxDEV(LumaTable, {\n    mobileColumns: 3,\n    link: [],\n    tableData: topProductsRows.rows\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 5\n  }, this);\n};\n_c = TopProductsTable;\n\nvar _c;\n\n$RefreshReg$(_c, \"TopProductsTable\");","map":{"version":3,"names":["LumaTable","Cell","CurrencyChip","OverflowContainer","UnderlierChip","nFormatter","num","toFixed","sortByNotional","topProductsData","arrayToSort","sort","a","b","notional","createUnderlierChip","content","index","buildUnderliers","underliers","numberOfUnderliers","length","undefined","map","underlier","i","underlierArr","slice","TopProductsTable","data","headers","sortedTableData","buildTopProductsRow","rowData","idx","cusip","structure","Math","random","round","tenor","currency","headerArray","header","topProductsRows","reduce","acc","cur","rows","links"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/dashboard/src/components/Insights/TopProductsWidget/TopProductsTable/TopProductsTable.tsx"],"sourcesContent":["import { LumaTable } from '../../../LumaTable';\nimport {\n  Cell,\n  CurrencyChip,\n  OverflowContainer,\n  UnderlierChip,\n} from './TopProductsTable.styles';\n\nexport type TopProductsData = {\n  currency?: string;\n  cusip?: string;\n  notional: number;\n  structure: string;\n  tenor: number;\n  tenorUnit?: string;\n  underliers: string[];\n};\n\ninterface Props {\n  data: TopProductsData[];\n}\n\nconst nFormatter = (num: number) => {\n  return `${(num / 1000000).toFixed(2)}M`;\n};\n\nconst sortByNotional = (topProductsData: TopProductsData[]) => {\n  const arrayToSort = [...topProductsData];\n  return arrayToSort.sort((a: TopProductsData, b: TopProductsData) => {\n    if (a.notional && b.notional) {\n      return a.notional < b.notional ? 1 : -1;\n    } else {\n      return a.notional ? 1 : -1;\n    }\n  });\n};\n\nconst createUnderlierChip = (content: string, index: number) => (\n  <UnderlierChip key={`underlier-${index}`}>{content}</UnderlierChip>\n);\n\nconst buildUnderliers = (underliers: string[] | undefined) => {\n  const numberOfUnderliers = underliers?.length || '';\n\n  if (underliers === undefined || underliers.length === 0) {\n    return null;\n  }\n  if (underliers.length && numberOfUnderliers <= 4) {\n    return underliers.map((underlier, i) => {\n      return createUnderlierChip(underlier, i);\n    });\n  }\n  if (underliers.length && numberOfUnderliers > 4) {\n    const underlierArr = underliers.slice(0, 3).map((underlier, i) => {\n      return createUnderlierChip(underlier, i);\n    });\n\n    return [\n      ...underlierArr,\n      createUnderlierChip(`+${underliers.length - 3} MORE`, 4),\n    ];\n  }\n  return;\n};\n\nexport const TopProductsTable = ({ data }: Props) => {\n  const headers = [\n    'Product ID',\n    'Structure',\n    'Underliers',\n    'Tenor Yrs',\n    'Notional',\n  ];\n\n  const sortedTableData = sortByNotional(data);\n\n  const buildTopProductsRow = (rowData: TopProductsData, idx: number) => {\n    return [\n      <Cell key={`${rowData.cusip}-${idx}`}>{rowData.cusip}</Cell>,\n      <Cell key={`${rowData.structure}-${idx}`}>\n        <OverflowContainer>{rowData.structure}</OverflowContainer>\n      </Cell>,\n      <Cell key={`underliers-${idx + Math.random()}`}>\n        {buildUnderliers(rowData.underliers)}\n      </Cell>,\n      <Cell key={`${rowData.tenor}-${idx}`}>\n        {(Math.round(rowData.tenor * 10) / 10).toFixed(1)}\n      </Cell>,\n      <Cell key={`${rowData.notional}-${idx}`}>\n        {nFormatter(rowData.notional)}\n        <CurrencyChip>{rowData.currency}</CurrencyChip>\n      </Cell>,\n    ];\n  };\n\n  const headerArray = [\n    headers.map((header, idx) => <Cell key={`header${idx}`}>{header}</Cell>),\n  ];\n\n  const topProductsRows = sortedTableData.reduce(\n    (acc, cur, idx) => {\n      return {\n        rows: [...acc.rows, buildTopProductsRow(cur, idx)],\n        links: [''],\n      };\n    },\n    { rows: headerArray as React.ReactNode[][], links: [] as string[] }\n  );\n\n  return (\n    <LumaTable mobileColumns={3} link={[]} tableData={topProductsRows.rows} />\n  );\n};\n"],"mappings":";;;;;;AAAA,SAASA,SAAT,QAA0B,oBAA1B;AACA,SACEC,IADF,EAEEC,YAFF,EAGEC,iBAHF,EAIEC,aAJF,QAKO,2BALP;;;AAqBA,MAAMC,UAAU,GAAIC,GAAD,IAAiB;EAClC,OAAQ,GAAE,CAACA,GAAG,GAAG,OAAP,EAAgBC,OAAhB,CAAwB,CAAxB,CAA2B,GAArC;AACD,CAFD;;AAIA,MAAMC,cAAc,GAAIC,eAAD,IAAwC;EAC7D,MAAMC,WAAW,GAAG,CAAC,GAAGD,eAAJ,CAApB;EACA,OAAOC,WAAW,CAACC,IAAZ,CAAiB,CAACC,CAAD,EAAqBC,CAArB,KAA4C;IAClE,IAAID,CAAC,CAACE,QAAF,IAAcD,CAAC,CAACC,QAApB,EAA8B;MAC5B,OAAOF,CAAC,CAACE,QAAF,GAAaD,CAAC,CAACC,QAAf,GAA0B,CAA1B,GAA8B,CAAC,CAAtC;IACD,CAFD,MAEO;MACL,OAAOF,CAAC,CAACE,QAAF,GAAa,CAAb,GAAiB,CAAC,CAAzB;IACD;EACF,CANM,CAAP;AAOD,CATD;;AAWA,MAAMC,mBAAmB,GAAG,CAACC,OAAD,EAAkBC,KAAlB,kBAC1B,QAAC,aAAD;EAAA,UAA2CD;AAA3C,GAAqB,aAAYC,KAAM,EAAvC;EAAA;EAAA;EAAA;AAAA,QADF;;AAIA,MAAMC,eAAe,GAAIC,UAAD,IAAsC;EAC5D,MAAMC,kBAAkB,GAAG,CAAAD,UAAU,QAAV,YAAAA,UAAU,CAAEE,MAAZ,KAAsB,EAAjD;;EAEA,IAAIF,UAAU,KAAKG,SAAf,IAA4BH,UAAU,CAACE,MAAX,KAAsB,CAAtD,EAAyD;IACvD,OAAO,IAAP;EACD;;EACD,IAAIF,UAAU,CAACE,MAAX,IAAqBD,kBAAkB,IAAI,CAA/C,EAAkD;IAChD,OAAOD,UAAU,CAACI,GAAX,CAAe,CAACC,SAAD,EAAYC,CAAZ,KAAkB;MACtC,OAAOV,mBAAmB,CAACS,SAAD,EAAYC,CAAZ,CAA1B;IACD,CAFM,CAAP;EAGD;;EACD,IAAIN,UAAU,CAACE,MAAX,IAAqBD,kBAAkB,GAAG,CAA9C,EAAiD;IAC/C,MAAMM,YAAY,GAAGP,UAAU,CAACQ,KAAX,CAAiB,CAAjB,EAAoB,CAApB,EAAuBJ,GAAvB,CAA2B,CAACC,SAAD,EAAYC,CAAZ,KAAkB;MAChE,OAAOV,mBAAmB,CAACS,SAAD,EAAYC,CAAZ,CAA1B;IACD,CAFoB,CAArB;IAIA,OAAO,CACL,GAAGC,YADE,EAELX,mBAAmB,CAAE,IAAGI,UAAU,CAACE,MAAX,GAAoB,CAAE,OAA3B,EAAmC,CAAnC,CAFd,CAAP;EAID;;EACD;AACD,CAtBD;;AAwBA,OAAO,MAAMO,gBAAgB,GAAG,CAAC;EAAEC;AAAF,CAAD,KAAqB;EACnD,MAAMC,OAAO,GAAG,CACd,YADc,EAEd,WAFc,EAGd,YAHc,EAId,WAJc,EAKd,UALc,CAAhB;EAQA,MAAMC,eAAe,GAAGvB,cAAc,CAACqB,IAAD,CAAtC;;EAEA,MAAMG,mBAAmB,GAAG,CAACC,OAAD,EAA2BC,GAA3B,KAA2C;IACrE,OAAO,cACL,QAAC,IAAD;MAAA,UAAuCD,OAAO,CAACE;IAA/C,GAAY,GAAEF,OAAO,CAACE,KAAM,IAAGD,GAAI,EAAnC;MAAA;MAAA;MAAA;IAAA,QADK,eAEL,QAAC,IAAD;MAAA,uBACE,QAAC,iBAAD;QAAA,UAAoBD,OAAO,CAACG;MAA5B;QAAA;QAAA;QAAA;MAAA;IADF,GAAY,GAAEH,OAAO,CAACG,SAAU,IAAGF,GAAI,EAAvC;MAAA;MAAA;MAAA;IAAA,QAFK,eAKL,QAAC,IAAD;MAAA,UACGhB,eAAe,CAACe,OAAO,CAACd,UAAT;IADlB,GAAY,cAAae,GAAG,GAAGG,IAAI,CAACC,MAAL,EAAc,EAA7C;MAAA;MAAA;MAAA;IAAA,QALK,eAQL,QAAC,IAAD;MAAA,UACG,CAACD,IAAI,CAACE,KAAL,CAAWN,OAAO,CAACO,KAAR,GAAgB,EAA3B,IAAiC,EAAlC,EAAsCjC,OAAtC,CAA8C,CAA9C;IADH,GAAY,GAAE0B,OAAO,CAACO,KAAM,IAAGN,GAAI,EAAnC;MAAA;MAAA;MAAA;IAAA,QARK,eAWL,QAAC,IAAD;MAAA,WACG7B,UAAU,CAAC4B,OAAO,CAACnB,QAAT,CADb,eAEE,QAAC,YAAD;QAAA,UAAemB,OAAO,CAACQ;MAAvB;QAAA;QAAA;QAAA;MAAA,QAFF;IAAA,GAAY,GAAER,OAAO,CAACnB,QAAS,IAAGoB,GAAI,EAAtC;MAAA;MAAA;MAAA;IAAA,QAXK,CAAP;EAgBD,CAjBD;;EAmBA,MAAMQ,WAAW,GAAG,CAClBZ,OAAO,CAACP,GAAR,CAAY,CAACoB,MAAD,EAAST,GAAT,kBAAiB,QAAC,IAAD;IAAA,UAA4BS;EAA5B,GAAY,SAAQT,GAAI,EAAxB;IAAA;IAAA;IAAA;EAAA,QAA7B,CADkB,CAApB;EAIA,MAAMU,eAAe,GAAGb,eAAe,CAACc,MAAhB,CACtB,CAACC,GAAD,EAAMC,GAAN,EAAWb,GAAX,KAAmB;IACjB,OAAO;MACLc,IAAI,EAAE,CAAC,GAAGF,GAAG,CAACE,IAAR,EAAchB,mBAAmB,CAACe,GAAD,EAAMb,GAAN,CAAjC,CADD;MAELe,KAAK,EAAE,CAAC,EAAD;IAFF,CAAP;EAID,CANqB,EAOtB;IAAED,IAAI,EAAEN,WAAR;IAA4CO,KAAK,EAAE;EAAnD,CAPsB,CAAxB;EAUA,oBACE,QAAC,SAAD;IAAW,aAAa,EAAE,CAA1B;IAA6B,IAAI,EAAE,EAAnC;IAAuC,SAAS,EAAEL,eAAe,CAACI;EAAlE;IAAA;IAAA;IAAA;EAAA,QADF;AAGD,CA/CM;KAAMpB,gB"},"metadata":{},"sourceType":"module"}