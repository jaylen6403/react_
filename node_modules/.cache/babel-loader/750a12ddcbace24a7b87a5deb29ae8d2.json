{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { compareDates, formatLocalDate } from '@luma-fe-workspace/common';\n\n// \"this\" is the list of columnValues\nfunction columnSearch(searchValue) {\n  if (!this.map(columnValue => columnValue == null ? void 0 : columnValue.toLowerCase()).some(columnValue => columnValue == null ? void 0 : columnValue.includes(searchValue.toLowerCase()))) {\n    return false;\n  }\n\n  return true;\n}\n\nconst searchFilter = (data, searchFilterValue) => {\n  var _data$eventProductDat, _data$eventProductDat2, _data$Underliers, _data$eventStatus;\n\n  const columnValues = [data.Product, (_data$eventProductDat = data.eventProductData) == null ? void 0 : _data$eventProductDat.productSymbol, (_data$eventProductDat2 = data.eventProductData) == null ? void 0 : _data$eventProductDat2.issuer, data == null ? void 0 : (_data$Underliers = data.Underliers) == null ? void 0 : _data$Underliers.map(underlier => underlier.ticker).join(' '), (_data$eventStatus = data.eventStatus) == null ? void 0 : _data$eventStatus.status, data['Event Type']];\n  return searchFilterValue.every(columnSearch, columnValues);\n};\n\nexport const doesExternalFilterPass = (data, eventTypeFilterValues, eventStatusFilterValues, searchFilterValue, startDateValue, endDateValue) => {\n  if (data) {\n    var _data$eventStatus2, _data$eventStatus3;\n\n    if (data['Event Type'] && eventTypeFilterValues.length && !eventTypeFilterValues.includes(data['Event Type'])) return false;\n    if ((_data$eventStatus2 = data.eventStatus) != null && _data$eventStatus2.status && eventStatusFilterValues.length && !eventStatusFilterValues.includes((_data$eventStatus3 = data.eventStatus) == null ? void 0 : _data$eventStatus3.status)) return false;\n    if (!searchFilter(data, searchFilterValue)) return false;\n\n    if (data['Obv Date']) {\n      const obvDate = new Date(formatLocalDate(new Date(data['Obv Date'])));\n\n      if (startDateValue && compareDates(obvDate, new Date(formatLocalDate(startDateValue))) || endDateValue && compareDates(new Date(formatLocalDate(endDateValue)), obvDate)) {\n        return false;\n      }\n    }\n  }\n\n  return true;\n};","map":{"version":3,"names":["compareDates","formatLocalDate","columnSearch","searchValue","map","columnValue","toLowerCase","some","includes","searchFilter","data","searchFilterValue","columnValues","Product","eventProductData","productSymbol","issuer","Underliers","underlier","ticker","join","eventStatus","status","every","doesExternalFilterPass","eventTypeFilterValues","eventStatusFilterValues","startDateValue","endDateValue","length","obvDate","Date"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/components/AGGridTable/AGGridTableFilters.ts"],"sourcesContent":["import { compareDates, formatLocalDate } from '@luma-fe-workspace/common';\nimport { RowData } from './AGGridTable';\n\n// \"this\" is the list of columnValues\nfunction columnSearch(this: (string | null)[], searchValue: string): boolean {\n  if (\n    !this.map((columnValue: string | null) => columnValue?.toLowerCase()).some(\n      (columnValue: string | undefined) =>\n        columnValue?.includes(searchValue.toLowerCase())\n    )\n  ) {\n    return false;\n  }\n  return true;\n}\n\nconst searchFilter = (data: RowData, searchFilterValue: string[]): boolean => {\n  const columnValues = [\n    data.Product,\n    data.eventProductData?.productSymbol,\n    data.eventProductData?.issuer,\n    data?.Underliers?.map((underlier) => underlier.ticker).join(' '),\n    data.eventStatus?.status,\n    data['Event Type'],\n  ];\n\n  return searchFilterValue.every(columnSearch, columnValues);\n};\n\nexport const doesExternalFilterPass = (\n  data: RowData | undefined,\n  eventTypeFilterValues: string[],\n  eventStatusFilterValues: string[],\n  searchFilterValue: string[],\n  startDateValue: Date | null,\n  endDateValue: Date | null\n): boolean => {\n  if (data) {\n    if (\n      data['Event Type'] &&\n      eventTypeFilterValues.length &&\n      !eventTypeFilterValues.includes(data['Event Type'])\n    )\n      return false;\n    if (\n      data.eventStatus?.status &&\n      eventStatusFilterValues.length &&\n      !eventStatusFilterValues.includes(data.eventStatus?.status)\n    )\n      return false;\n    if (!searchFilter(data, searchFilterValue)) return false;\n\n    if (data['Obv Date']) {\n      const obvDate = new Date(formatLocalDate(new Date(data['Obv Date'])));\n\n      if (\n        (startDateValue &&\n          compareDates(obvDate, new Date(formatLocalDate(startDateValue)))) ||\n        (endDateValue &&\n          compareDates(new Date(formatLocalDate(endDateValue)), obvDate))\n      ) {\n        return false;\n      }\n    }\n  }\n  return true;\n};\n"],"mappings":";;AAAA,SAASA,YAAT,EAAuBC,eAAvB,QAA8C,2BAA9C;;AAGA;AACA,SAASC,YAAT,CAA+CC,WAA/C,EAA6E;EAC3E,IACE,CAAC,KAAKC,GAAL,CAAUC,WAAD,IAAgCA,WAAhC,oBAAgCA,WAAW,CAAEC,WAAb,EAAzC,EAAqEC,IAArE,CACEF,WAAD,IACEA,WADF,oBACEA,WAAW,CAAEG,QAAb,CAAsBL,WAAW,CAACG,WAAZ,EAAtB,CAFH,CADH,EAKE;IACA,OAAO,KAAP;EACD;;EACD,OAAO,IAAP;AACD;;AAED,MAAMG,YAAY,GAAG,CAACC,IAAD,EAAgBC,iBAAhB,KAAyD;EAAA;;EAC5E,MAAMC,YAAY,GAAG,CACnBF,IAAI,CAACG,OADc,2BAEnBH,IAAI,CAACI,gBAFc,qBAEnB,sBAAuBC,aAFJ,4BAGnBL,IAAI,CAACI,gBAHc,qBAGnB,uBAAuBE,MAHJ,EAInBN,IAJmB,wCAInBA,IAAI,CAAEO,UAJa,qBAInB,iBAAkBb,GAAlB,CAAuBc,SAAD,IAAeA,SAAS,CAACC,MAA/C,EAAuDC,IAAvD,CAA4D,GAA5D,CAJmB,uBAKnBV,IAAI,CAACW,WALc,qBAKnB,kBAAkBC,MALC,EAMnBZ,IAAI,CAAC,YAAD,CANe,CAArB;EASA,OAAOC,iBAAiB,CAACY,KAAlB,CAAwBrB,YAAxB,EAAsCU,YAAtC,CAAP;AACD,CAXD;;AAaA,OAAO,MAAMY,sBAAsB,GAAG,CACpCd,IADoC,EAEpCe,qBAFoC,EAGpCC,uBAHoC,EAIpCf,iBAJoC,EAKpCgB,cALoC,EAMpCC,YANoC,KAOxB;EACZ,IAAIlB,IAAJ,EAAU;IAAA;;IACR,IACEA,IAAI,CAAC,YAAD,CAAJ,IACAe,qBAAqB,CAACI,MADtB,IAEA,CAACJ,qBAAqB,CAACjB,QAAtB,CAA+BE,IAAI,CAAC,YAAD,CAAnC,CAHH,EAKE,OAAO,KAAP;IACF,IACE,sBAAAA,IAAI,CAACW,WAAL,gCAAkBC,MAAlB,IACAI,uBAAuB,CAACG,MADxB,IAEA,CAACH,uBAAuB,CAAClB,QAAxB,uBAAiCE,IAAI,CAACW,WAAtC,qBAAiC,mBAAkBC,MAAnD,CAHH,EAKE,OAAO,KAAP;IACF,IAAI,CAACb,YAAY,CAACC,IAAD,EAAOC,iBAAP,CAAjB,EAA4C,OAAO,KAAP;;IAE5C,IAAID,IAAI,CAAC,UAAD,CAAR,EAAsB;MACpB,MAAMoB,OAAO,GAAG,IAAIC,IAAJ,CAAS9B,eAAe,CAAC,IAAI8B,IAAJ,CAASrB,IAAI,CAAC,UAAD,CAAb,CAAD,CAAxB,CAAhB;;MAEA,IACGiB,cAAc,IACb3B,YAAY,CAAC8B,OAAD,EAAU,IAAIC,IAAJ,CAAS9B,eAAe,CAAC0B,cAAD,CAAxB,CAAV,CADd,IAECC,YAAY,IACX5B,YAAY,CAAC,IAAI+B,IAAJ,CAAS9B,eAAe,CAAC2B,YAAD,CAAxB,CAAD,EAA0CE,OAA1C,CAJhB,EAKE;QACA,OAAO,KAAP;MACD;IACF;EACF;;EACD,OAAO,IAAP;AACD,CArCM"},"metadata":{},"sourceType":"module"}