{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/components/EventDetail/ProductDetails/ProductDetails.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.reduce.js\";\nimport \"core-js/modules/es.array.flat-map.js\";\nimport \"core-js/modules/es.array.unscopables.flat-map.js\";\nimport { Spinner } from '@luma-fe-workspace/luma/dashboard';\nimport { productService } from '@luma-fe-workspace/redux';\nimport { EventDetailAccordion } from '../EventDetailAccordion/EventDetailAccordion';\nimport { MoreInfoTable } from '../MoreInfoTable/MoreInfoTable';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst calculateUnderliers = underlierList => {\n  if (underlierList && (underlierList == null ? void 0 : underlierList.length) > 0) {\n    return underlierList.reduce((acc, cur, idx) => {\n      if (cur.symbol) {\n        return idx === 0 ? cur.symbol : acc + ', ' + cur.symbol;\n      } else {\n        return acc;\n      }\n    }, '');\n  } else {\n    return '';\n  }\n};\n\nconst calculateProductDetails = productDetailsData => {\n  var _productDetailsData$i, _productDetailsData$c, _productDetailsData$s, _productDetailsData$a, _productDetailsData$t, _productDetailsData$p, _productDetailsData$i2, _productDetailsData$i3, _productDetailsData$d;\n\n  const callTypeOptions = [productDetailsData == null ? void 0 : productDetailsData.callType, (productDetailsData == null ? void 0 : productDetailsData.numberNoCallPeriods) !== null ? `${productDetailsData == null ? void 0 : productDetailsData.numberNoCallPeriods} NC` : undefined, productDetailsData == null ? void 0 : productDetailsData.callObservationFrequency].flatMap(option => option || []);\n  const callType = callTypeOptions.join(' / ');\n  const couponBarrerOptions = [productDetailsData == null ? void 0 : productDetailsData.couponType, productDetailsData == null ? void 0 : productDetailsData.couponObservationFrequency].flatMap(option => option || []);\n  const couponBarrier = couponBarrerOptions.join(' / ');\n  return [['Issuer', (_productDetailsData$i = productDetailsData == null ? void 0 : productDetailsData.issuer) != null ? _productDetailsData$i : ''], ['Calculation Agent', (_productDetailsData$c = productDetailsData == null ? void 0 : productDetailsData.calculationAgent) != null ? _productDetailsData$c : ''], ['Structure Type', (_productDetailsData$s = productDetailsData == null ? void 0 : productDetailsData.structureType) != null ? _productDetailsData$s : ''], ['Asset Class', (_productDetailsData$a = productDetailsData == null ? void 0 : productDetailsData.assetClass) != null ? _productDetailsData$a : ''], ['Underlying Tickers', calculateUnderliers(productDetailsData == null ? void 0 : productDetailsData.underliers)], ['Term (Remaining)', String((_productDetailsData$t = productDetailsData == null ? void 0 : productDetailsData.timeToMaturity) != null ? _productDetailsData$t : '')], ['Call Type / NC / Freq.', callType], ['Coupon Type / Freq.', couponBarrier], ['Coupon Barrier', productDetailsData != null && productDetailsData.couponBarrier ? (productDetailsData == null ? void 0 : productDetailsData.couponBarrier) + '%' : ''], ['Protection Level', String((_productDetailsData$p = productDetailsData == null ? void 0 : productDetailsData.protectionLevel) != null ? _productDetailsData$p : '')], ['Principal Threshold', String(productDetailsData != null && productDetailsData.couponBarrier ? (productDetailsData == null ? void 0 : productDetailsData.couponBarrier) + '%' : '')], ['Issuer Size', String((_productDetailsData$i2 = productDetailsData == null ? void 0 : (_productDetailsData$i3 = productDetailsData.issueSize) == null ? void 0 : _productDetailsData$i3.toLocaleString()) != null ? _productDetailsData$i2 : '')], ['Denomination', String((_productDetailsData$d = productDetailsData == null ? void 0 : productDetailsData.denomination) != null ? _productDetailsData$d : '')]];\n};\n\nexport const ProductDetails = ({\n  id\n}) => {\n  _s();\n\n  const {\n    isLoading: productDetailsIsLoading,\n    data: productDetailsData\n  } = productService.useGetProductDetailsUsingGetQuery({\n    cusip: id != null ? id : ''\n  });\n  const productDetails = calculateProductDetails(productDetailsData);\n  return /*#__PURE__*/_jsxDEV(EventDetailAccordion, {\n    header: \"Product Details\",\n    children: productDetailsData && !productDetailsIsLoading ? /*#__PURE__*/_jsxDEV(MoreInfoTable, {\n      rows: productDetails\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 9\n    }, this) : /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 85,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ProductDetails, \"CDZ2C0sgLjprmDCP1HQJJ38eGRs=\", false, function () {\n  return [productService.useGetProductDetailsUsingGetQuery];\n});\n\n_c = ProductDetails;\n\nvar _c;\n\n$RefreshReg$(_c, \"ProductDetails\");","map":{"version":3,"names":["Spinner","productService","EventDetailAccordion","MoreInfoTable","calculateUnderliers","underlierList","length","reduce","acc","cur","idx","symbol","calculateProductDetails","productDetailsData","callTypeOptions","callType","numberNoCallPeriods","undefined","callObservationFrequency","flatMap","option","join","couponBarrerOptions","couponType","couponObservationFrequency","couponBarrier","issuer","calculationAgent","structureType","assetClass","underliers","String","timeToMaturity","protectionLevel","issueSize","toLocaleString","denomination","ProductDetails","id","isLoading","productDetailsIsLoading","data","useGetProductDetailsUsingGetQuery","cusip","productDetails"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/components/EventDetail/ProductDetails/ProductDetails.tsx"],"sourcesContent":["import { Spinner } from '@luma-fe-workspace/luma/dashboard';\nimport { productService } from '@luma-fe-workspace/redux';\nimport { EventDetailAccordion } from '../EventDetailAccordion/EventDetailAccordion';\nimport { MoreInfoTable } from '../MoreInfoTable/MoreInfoTable';\n\nconst calculateUnderliers = (\n  underlierList: productService.Underlier[] | undefined\n) => {\n  if (underlierList && underlierList?.length > 0) {\n    return underlierList.reduce((acc, cur, idx) => {\n      if (cur.symbol) {\n        return idx === 0 ? cur.symbol : acc + ', ' + cur.symbol;\n      } else {\n        return acc;\n      }\n    }, '');\n  } else {\n    return '';\n  }\n};\n\nconst calculateProductDetails = (\n  productDetailsData: productService.ProductDetails | undefined\n) => {\n  const callTypeOptions: string[] = [\n    productDetailsData?.callType,\n    productDetailsData?.numberNoCallPeriods !== null\n      ? `${productDetailsData?.numberNoCallPeriods} NC`\n      : undefined,\n    productDetailsData?.callObservationFrequency,\n  ].flatMap((option: string | undefined) => option || []);\n\n  const callType = callTypeOptions.join(' / ');\n\n  const couponBarrerOptions: string[] = [\n    productDetailsData?.couponType,\n    productDetailsData?.couponObservationFrequency,\n  ].flatMap((option: string | undefined) => option || []);\n\n  const couponBarrier = couponBarrerOptions.join(' / ');\n\n  return [\n    ['Issuer', productDetailsData?.issuer ?? ''],\n    ['Calculation Agent', productDetailsData?.calculationAgent ?? ''],\n    ['Structure Type', productDetailsData?.structureType ?? ''],\n    ['Asset Class', productDetailsData?.assetClass ?? ''],\n    ['Underlying Tickers', calculateUnderliers(productDetailsData?.underliers)],\n    ['Term (Remaining)', String(productDetailsData?.timeToMaturity ?? '')],\n    ['Call Type / NC / Freq.', callType],\n    ['Coupon Type / Freq.', couponBarrier],\n    [\n      'Coupon Barrier',\n      productDetailsData?.couponBarrier\n        ? productDetailsData?.couponBarrier + '%'\n        : '',\n    ],\n    ['Protection Level', String(productDetailsData?.protectionLevel ?? '')],\n    [\n      'Principal Threshold',\n      String(\n        productDetailsData?.couponBarrier\n          ? productDetailsData?.couponBarrier + '%'\n          : ''\n      ),\n    ],\n    [\n      'Issuer Size',\n      String(productDetailsData?.issueSize?.toLocaleString() ?? ''),\n    ],\n    ['Denomination', String(productDetailsData?.denomination ?? '')],\n  ];\n};\nexport interface Props {\n  id: string | undefined;\n}\n\nexport const ProductDetails = ({ id }: Props) => {\n  const { isLoading: productDetailsIsLoading, data: productDetailsData } =\n    productService.useGetProductDetailsUsingGetQuery({ cusip: id ?? '' });\n\n  const productDetails: string[][] =\n    calculateProductDetails(productDetailsData);\n\n  return (\n    <EventDetailAccordion header=\"Product Details\">\n      {productDetailsData && !productDetailsIsLoading ? (\n        <MoreInfoTable rows={productDetails} />\n      ) : (\n        <Spinner />\n      )}\n    </EventDetailAccordion>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}