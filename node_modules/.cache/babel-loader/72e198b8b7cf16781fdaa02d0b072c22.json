{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/creationhub/src/components/PricingForm/groups/RFQ/RFQ.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { RfqState, RfqIssuerAction, RfqOperations } from '@luma-fe-workspace/redux';\nimport { useEffect, useState } from 'react';\nimport { QuotingWrapper, Title } from '../Quoting/Quoting.styles';\nimport { RFQAcceptPostTradeCancel } from './elements/actions/RFQAcceptPostTradeCancel';\nimport { RFQAcceptPreTradeCancel } from './elements/actions/RFQAcceptPreTradeCancel';\nimport { RFQConfirmTrade } from './elements/actions/RFQConfirmTrade';\nimport { RFQQuote } from './elements/actions/RFQQuote';\nimport { RFQRejectPostTradeCancel } from './elements/actions/RFQRejectPostTradeCancel';\nimport { RFQRejectQuote } from './elements/actions/RFQRejectQuote';\nimport { RFQRejectTrade } from './elements/actions/RFQRejectTrade';\nimport { RFQRequestPostTradeCancel } from './elements/actions/RFQRequestPostTradeCancel';\nimport { RFQTable } from './RFQTable';\nimport { RFQISIN } from './RFQISIN';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function getRfqIssuerActions({\n  rfq,\n  updateRfq,\n  isUpdateRfqPending\n}) {\n  var _rfq$actions;\n\n  let isEditQuote = false;\n  let isEditValidUntil = false;\n  let isEditRejectionReason = false;\n  const availableActions = (_rfq$actions = rfq.actions) == null ? void 0 : _rfq$actions.map(action => {\n    switch (action) {\n      case RfqIssuerAction.QUOTE_INDICATIVE:\n        isEditQuote = true;\n        return RFQQuote({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending,\n          quoteType: 'INDICATIVE'\n        });\n\n      case RfqIssuerAction.QUOTE_TRADABLE:\n        isEditQuote = true;\n        isEditValidUntil = true;\n        return RFQQuote({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending,\n          quoteType: 'TRADABLE'\n        });\n\n      case RfqIssuerAction.REJECT_QUOTE:\n        isEditRejectionReason = true;\n        return RFQRejectQuote({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending\n        });\n\n      case RfqIssuerAction.ACCEPT_PRE_TRADE_CANCEL:\n        return RFQAcceptPreTradeCancel({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending\n        });\n\n      case RfqIssuerAction.REJECT_TRADE:\n        isEditRejectionReason = true;\n        return RFQRejectTrade({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending\n        });\n\n      case RfqIssuerAction.CONFIRM_TRADE:\n        return RFQConfirmTrade({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending\n        });\n\n      case RfqIssuerAction.REQUEST_POST_TRADE_CANCEL:\n        return RFQRequestPostTradeCancel({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending\n        });\n\n      case RfqIssuerAction.REJECT_POST_TRADE_CANCEL:\n        return RFQRejectPostTradeCancel({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending\n        });\n\n      case RfqIssuerAction.ACCEPT_POST_TRADE_CANCEL:\n        return RFQAcceptPostTradeCancel({\n          rfq: rfq,\n          updateRfq,\n          isUpdateRfqPending\n        });\n\n      default:\n        return null;\n    }\n  }).filter(x => x);\n\n  if (availableActions && availableActions.length > 0) {\n    return {\n      actions: availableActions,\n      isEditQuote,\n      isEditValidUntil,\n      isEditRejectionReason\n    };\n  } else {\n    return {\n      actions: undefined,\n      isEditQuote,\n      isEditValidUntil,\n      isEditRejectionReason\n    };\n  }\n}\nexport function RFQ({\n  rfq,\n  updateRfq,\n  isUpdateRfqPending\n}) {\n  _s();\n\n  const [externalId, setExternalId] = useState(undefined);\n  const [isin, setIsin] = useState(undefined);\n  useEffect(() => {\n    var _rfq$externalId;\n\n    setExternalId((_rfq$externalId = rfq.externalId) != null ? _rfq$externalId : undefined);\n  }, [rfq.externalId]);\n  useEffect(() => {\n    var _rfq$isin;\n\n    setIsin((_rfq$isin = rfq.isin) != null ? _rfq$isin : undefined);\n  }, [rfq.isin]);\n\n  const patchExternalId = () => {\n    const {\n      id,\n      version\n    } = rfq;\n    updateRfq({\n      rfqId: id,\n      updateRequest: {\n        version,\n        externalId\n      },\n      operationName: RfqOperations.SetExternalId\n    });\n  };\n\n  const patchIsin = () => {\n    const {\n      id,\n      version\n    } = rfq;\n    updateRfq({\n      rfqId: id,\n      updateRequest: {\n        version,\n        isin\n      },\n      operationName: RfqOperations.SetIsin\n    });\n  };\n\n  const {\n    actions,\n    isEditQuote,\n    isEditValidUntil,\n    isEditRejectionReason\n  } = getRfqIssuerActions({\n    rfq,\n    updateRfq,\n    isUpdateRfqPending\n  });\n  return /*#__PURE__*/_jsxDEV(QuotingWrapper, {\n    children: [/*#__PURE__*/_jsxDEV(Title, {\n      children: \"Quote Requests\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 174,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(RFQTable, {\n      rfq: rfq,\n      externalId: externalId,\n      setExternalId: setExternalId,\n      patchExternalId: patchExternalId,\n      actions: actions,\n      isEditQuote: isEditQuote,\n      isEditValidUntil: isEditValidUntil,\n      isEditRejectionReason: isEditRejectionReason\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 175,\n      columnNumber: 7\n    }, this), rfq.state === RfqState.TRADED && /*#__PURE__*/_jsxDEV(RFQISIN, {\n      isin: isin,\n      setIsin: setIsin,\n      patchIsin: patchIsin\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 186,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 173,\n    columnNumber: 5\n  }, this);\n}\n\n_s(RFQ, \"Yy4Ze15uYa534PRjtkprebDn+ew=\");\n\n_c = RFQ;\nexport default RFQ;\n\nvar _c;\n\n$RefreshReg$(_c, \"RFQ\");","map":{"version":3,"names":["RfqState","RfqIssuerAction","RfqOperations","useEffect","useState","QuotingWrapper","Title","RFQAcceptPostTradeCancel","RFQAcceptPreTradeCancel","RFQConfirmTrade","RFQQuote","RFQRejectPostTradeCancel","RFQRejectQuote","RFQRejectTrade","RFQRequestPostTradeCancel","RFQTable","RFQISIN","getRfqIssuerActions","rfq","updateRfq","isUpdateRfqPending","isEditQuote","isEditValidUntil","isEditRejectionReason","availableActions","actions","map","action","QUOTE_INDICATIVE","quoteType","QUOTE_TRADABLE","REJECT_QUOTE","ACCEPT_PRE_TRADE_CANCEL","REJECT_TRADE","CONFIRM_TRADE","REQUEST_POST_TRADE_CANCEL","REJECT_POST_TRADE_CANCEL","ACCEPT_POST_TRADE_CANCEL","filter","x","length","undefined","RFQ","externalId","setExternalId","isin","setIsin","patchExternalId","id","version","rfqId","updateRequest","operationName","SetExternalId","patchIsin","SetIsin","state","TRADED"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/creationhub/src/components/PricingForm/groups/RFQ/RFQ.tsx"],"sourcesContent":["import {\n  RfqState,\n  RfqIssuerAction,\n  RfqOperations,\n  RfqQuotedTradable,\n  RfqQuoteRequested,\n  RfqTraded,\n  RfqTradeRequested,\n  UpdateRFQUsingPostApiArg,\n  IssuerPricing,\n} from '@luma-fe-workspace/redux';\nimport { useEffect, useState } from 'react';\nimport { QuotingWrapper, Title } from '../Quoting/Quoting.styles';\nimport { RFQAcceptPostTradeCancel } from './elements/actions/RFQAcceptPostTradeCancel';\nimport { RFQAcceptPreTradeCancel } from './elements/actions/RFQAcceptPreTradeCancel';\nimport { RFQConfirmTrade } from './elements/actions/RFQConfirmTrade';\nimport { RFQQuote } from './elements/actions/RFQQuote';\nimport { RFQRejectPostTradeCancel } from './elements/actions/RFQRejectPostTradeCancel';\nimport { RFQRejectQuote } from './elements/actions/RFQRejectQuote';\nimport { RFQRejectTrade } from './elements/actions/RFQRejectTrade';\nimport { RFQRequestPostTradeCancel } from './elements/actions/RFQRequestPostTradeCancel';\nimport { RFQTable } from './RFQTable';\nimport { RFQISIN } from './RFQISIN';\n\nexport interface RFQProps {\n  rfq: IssuerPricing;\n  updateRfq: (body: UpdateRFQUsingPostApiArg) => void;\n  isUpdateRfqPending: boolean;\n}\n\nexport type DropdownItem = {\n  label: string;\n  action: () => void;\n  isDisabled: boolean;\n  dataTestId: string;\n};\n\nexport function getRfqIssuerActions({\n  rfq,\n  updateRfq,\n  isUpdateRfqPending,\n}: RFQProps) {\n  let isEditQuote = false;\n  let isEditValidUntil = false;\n  let isEditRejectionReason = false;\n  const availableActions = rfq.actions\n    ?.map((action) => {\n      switch (action) {\n        case RfqIssuerAction.QUOTE_INDICATIVE:\n          isEditQuote = true;\n          return RFQQuote({\n            rfq: rfq as RfqQuoteRequested,\n            updateRfq,\n            isUpdateRfqPending,\n            quoteType: 'INDICATIVE',\n          });\n        case RfqIssuerAction.QUOTE_TRADABLE:\n          isEditQuote = true;\n          isEditValidUntil = true;\n          return RFQQuote({\n            rfq: rfq as RfqQuoteRequested,\n            updateRfq,\n            isUpdateRfqPending,\n            quoteType: 'TRADABLE',\n          });\n        case RfqIssuerAction.REJECT_QUOTE:\n          isEditRejectionReason = true;\n          return RFQRejectQuote({\n            rfq: rfq as RfqQuoteRequested,\n            updateRfq,\n            isUpdateRfqPending,\n          });\n        case RfqIssuerAction.ACCEPT_PRE_TRADE_CANCEL:\n          return RFQAcceptPreTradeCancel({\n            rfq: rfq as RfqQuotedTradable,\n            updateRfq,\n            isUpdateRfqPending,\n          });\n        case RfqIssuerAction.REJECT_TRADE:\n          isEditRejectionReason = true;\n          return RFQRejectTrade({\n            rfq: rfq as RfqTradeRequested,\n            updateRfq,\n            isUpdateRfqPending,\n          });\n        case RfqIssuerAction.CONFIRM_TRADE:\n          return RFQConfirmTrade({\n            rfq: rfq as RfqTradeRequested,\n            updateRfq,\n            isUpdateRfqPending,\n          });\n        case RfqIssuerAction.REQUEST_POST_TRADE_CANCEL:\n          return RFQRequestPostTradeCancel({\n            rfq: rfq as RfqTraded,\n            updateRfq,\n            isUpdateRfqPending,\n          });\n        case RfqIssuerAction.REJECT_POST_TRADE_CANCEL:\n          return RFQRejectPostTradeCancel({\n            rfq: rfq as RfqTraded,\n            updateRfq,\n            isUpdateRfqPending,\n          });\n        case RfqIssuerAction.ACCEPT_POST_TRADE_CANCEL:\n          return RFQAcceptPostTradeCancel({\n            rfq: rfq as RfqTraded,\n            updateRfq,\n            isUpdateRfqPending,\n          });\n        default:\n          return null;\n      }\n    })\n    .filter((x) => x) as DropdownItem[];\n  if (availableActions && availableActions.length > 0) {\n    return {\n      actions: availableActions,\n      isEditQuote,\n      isEditValidUntil,\n      isEditRejectionReason,\n    };\n  } else {\n    return {\n      actions: undefined,\n      isEditQuote,\n      isEditValidUntil,\n      isEditRejectionReason,\n    };\n  }\n}\n\nexport function RFQ({ rfq, updateRfq, isUpdateRfqPending }: RFQProps) {\n  const [externalId, setExternalId] = useState<string | undefined>(undefined);\n  const [isin, setIsin] = useState<string | undefined>(undefined);\n  useEffect(() => {\n    setExternalId(rfq.externalId ?? undefined);\n  }, [rfq.externalId]);\n  useEffect(() => {\n    setIsin(rfq.isin ?? undefined);\n  }, [rfq.isin]);\n\n  const patchExternalId = () => {\n    const { id, version } = rfq;\n    updateRfq({\n      rfqId: id,\n      updateRequest: {\n        version,\n        externalId,\n      },\n      operationName: RfqOperations.SetExternalId,\n    });\n  };\n  const patchIsin = () => {\n    const { id, version } = rfq;\n    updateRfq({\n      rfqId: id,\n      updateRequest: {\n        version,\n        isin,\n      },\n      operationName: RfqOperations.SetIsin,\n    });\n  };\n\n  const { actions, isEditQuote, isEditValidUntil, isEditRejectionReason } =\n    getRfqIssuerActions({\n      rfq,\n      updateRfq,\n      isUpdateRfqPending,\n    });\n\n  return (\n    <QuotingWrapper>\n      <Title>Quote Requests</Title>\n      <RFQTable\n        rfq={rfq}\n        externalId={externalId}\n        setExternalId={setExternalId}\n        patchExternalId={patchExternalId}\n        actions={actions}\n        isEditQuote={isEditQuote}\n        isEditValidUntil={isEditValidUntil}\n        isEditRejectionReason={isEditRejectionReason}\n      />\n      {rfq.state === RfqState.TRADED && (\n        <RFQISIN isin={isin} setIsin={setIsin} patchIsin={patchIsin} />\n      )}\n    </QuotingWrapper>\n  );\n}\n\nexport default RFQ;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}