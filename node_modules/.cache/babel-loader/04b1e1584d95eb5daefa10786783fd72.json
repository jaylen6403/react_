{"ast":null,"code":"import _objectWithoutPropertiesLoose from \"/Users/jchen/Documents/GitHub/luma-fe-workspace/node_modules/@babel/runtime/helpers/esm/objectWithoutPropertiesLoose.js\";\nconst _excluded = [\"paramName\", \"label\", \"value\", \"isDisabled\", \"constraints\", \"onChange\", \"onBlur\", \"readOnly\"];\n\nvar _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/creationhub/src/components/PricingForm/groups/ConfigurableFormGroups/formElements/dropdown/MultiDropdownWrapper.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.object.assign.js\";\nimport { LumaMultiDropDown } from '@luma-fe-workspace/design-system';\nimport { ValueTypes } from '@luma-fe-workspace/redux';\nimport { useCallback } from 'react';\nimport { parseEnumToDropdownValue } from './DropdownUtils';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nfunction MultiDropdownWrapper(_ref) {\n  _s();\n\n  let {\n    paramName,\n    label,\n    value,\n    isDisabled,\n    constraints,\n    onChange,\n    onBlur,\n    readOnly = true\n  } = _ref,\n      rest = _objectWithoutPropertiesLoose(_ref, _excluded);\n\n  const defaultSelectedItems = parseEnumToDropdownValue(value.values);\n  const dropdownItems = constraints ? parseEnumToDropdownValue(constraints[paramName].availableValues) : [];\n  const onMultiSelectChange = useCallback(newItems => {\n    if (!newItems || !constraints) {\n      return;\n    }\n\n    const selectedIds = newItems.map(({\n      value\n    }) => {\n      return value;\n    });\n    const selectedValues = constraints[paramName].availableValues.filter(({\n      id\n    }) => {\n      return selectedIds.includes(id);\n    });\n    const changeItem = {\n      values: selectedValues,\n      type: ValueTypes.MultiEnum,\n      computationMode: value.computationMode\n    };\n    onChange(changeItem);\n  }, [constraints, paramName, value.computationMode, onChange]);\n  return /*#__PURE__*/_jsxDEV(LumaMultiDropDown, Object.assign({\n    name: paramName,\n    readOnly: readOnly,\n    disabled: isDisabled,\n    handleBlur: onBlur,\n    placeholder: label != null ? label : '',\n    defaultSelectedItems: defaultSelectedItems,\n    onChange: onMultiSelectChange,\n    items: dropdownItems,\n    size: \"large\"\n  }, rest), void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 70,\n    columnNumber: 5\n  }, this);\n}\n\n_s(MultiDropdownWrapper, \"nC1Kf3ruHlUPxOYyK5phGlh/3UE=\");\n\n_c = MultiDropdownWrapper;\nexport default MultiDropdownWrapper;\n\nvar _c;\n\n$RefreshReg$(_c, \"MultiDropdownWrapper\");","map":{"version":3,"names":["LumaMultiDropDown","ValueTypes","useCallback","parseEnumToDropdownValue","MultiDropdownWrapper","paramName","label","value","isDisabled","constraints","onChange","onBlur","readOnly","rest","defaultSelectedItems","values","dropdownItems","availableValues","onMultiSelectChange","newItems","selectedIds","map","selectedValues","filter","id","includes","changeItem","type","MultiEnum","computationMode"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/creationhub/src/components/PricingForm/groups/ConfigurableFormGroups/formElements/dropdown/MultiDropdownWrapper.tsx"],"sourcesContent":["import {\n  DataItemProps,\n  LumaMultiDropDown,\n} from '@luma-fe-workspace/design-system';\nimport {\n  EnumConstraints,\n  MultiEnumValue,\n  ParamConstraints,\n  ParamName,\n  ParamValue,\n  ValueTypes,\n} from '@luma-fe-workspace/redux';\nimport { useCallback } from 'react';\nimport { parseEnumToDropdownValue } from './DropdownUtils';\n\ntype MultiDropdownWrapperProps = {\n  paramName: string;\n  id: string;\n  value: MultiEnumValue;\n  label?: string;\n  isDisabled: boolean;\n  onChange: (newValue: ParamValue | undefined) => void;\n  onBlur: () => void;\n  readOnly?: boolean;\n  constraints?: Record<ParamName, ParamConstraints>;\n};\n\nfunction MultiDropdownWrapper({\n  paramName,\n  label,\n  value,\n  isDisabled,\n  constraints,\n  onChange,\n  onBlur,\n  readOnly = true,\n  ...rest\n}: MultiDropdownWrapperProps) {\n  const defaultSelectedItems = parseEnumToDropdownValue(value.values);\n  const dropdownItems = constraints\n    ? parseEnumToDropdownValue(\n        (constraints[paramName] as EnumConstraints).availableValues\n      )\n    : [];\n\n  const onMultiSelectChange = useCallback(\n    (newItems: DataItemProps[] | null) => {\n      if (!newItems || !constraints) {\n        return;\n      }\n      const selectedIds = newItems.map(({ value }) => {\n        return value;\n      });\n      const selectedValues = (\n        constraints[paramName] as EnumConstraints\n      ).availableValues.filter(({ id }) => {\n        return selectedIds.includes(id);\n      });\n      const changeItem = {\n        values: selectedValues,\n        type: ValueTypes.MultiEnum,\n        computationMode: value.computationMode,\n      };\n      onChange(changeItem);\n    },\n    [constraints, paramName, value.computationMode, onChange]\n  );\n\n  return (\n    <LumaMultiDropDown\n      name={paramName}\n      readOnly={readOnly}\n      disabled={isDisabled}\n      handleBlur={onBlur}\n      placeholder={label ?? ''}\n      defaultSelectedItems={defaultSelectedItems}\n      onChange={onMultiSelectChange}\n      items={dropdownItems}\n      size=\"large\"\n      {...rest}\n    />\n  );\n}\n\nexport default MultiDropdownWrapper;\n"],"mappings":";;;;;;;;;;;AAAA,SAEEA,iBAFF,QAGO,kCAHP;AAIA,SAMEC,UANF,QAOO,0BAPP;AAQA,SAASC,WAAT,QAA4B,OAA5B;AACA,SAASC,wBAAT,QAAyC,iBAAzC;;;AAcA,SAASC,oBAAT,OAU8B;EAAA;;EAAA,IAVA;IAC5BC,SAD4B;IAE5BC,KAF4B;IAG5BC,KAH4B;IAI5BC,UAJ4B;IAK5BC,WAL4B;IAM5BC,QAN4B;IAO5BC,MAP4B;IAQ5BC,QAAQ,GAAG;EARiB,CAUA;EAAA,IADzBC,IACyB;;EAC5B,MAAMC,oBAAoB,GAAGX,wBAAwB,CAACI,KAAK,CAACQ,MAAP,CAArD;EACA,MAAMC,aAAa,GAAGP,WAAW,GAC7BN,wBAAwB,CACrBM,WAAW,CAACJ,SAAD,CAAZ,CAA4CY,eADtB,CADK,GAI7B,EAJJ;EAMA,MAAMC,mBAAmB,GAAGhB,WAAW,CACpCiB,QAAD,IAAsC;IACpC,IAAI,CAACA,QAAD,IAAa,CAACV,WAAlB,EAA+B;MAC7B;IACD;;IACD,MAAMW,WAAW,GAAGD,QAAQ,CAACE,GAAT,CAAa,CAAC;MAAEd;IAAF,CAAD,KAAe;MAC9C,OAAOA,KAAP;IACD,CAFmB,CAApB;IAGA,MAAMe,cAAc,GAClBb,WAAW,CAACJ,SAAD,CADU,CAErBY,eAFqB,CAELM,MAFK,CAEE,CAAC;MAAEC;IAAF,CAAD,KAAY;MACnC,OAAOJ,WAAW,CAACK,QAAZ,CAAqBD,EAArB,CAAP;IACD,CAJsB,CAAvB;IAKA,MAAME,UAAU,GAAG;MACjBX,MAAM,EAAEO,cADS;MAEjBK,IAAI,EAAE1B,UAAU,CAAC2B,SAFA;MAGjBC,eAAe,EAAEtB,KAAK,CAACsB;IAHN,CAAnB;IAKAnB,QAAQ,CAACgB,UAAD,CAAR;EACD,CAnBoC,EAoBrC,CAACjB,WAAD,EAAcJ,SAAd,EAAyBE,KAAK,CAACsB,eAA/B,EAAgDnB,QAAhD,CApBqC,CAAvC;EAuBA,oBACE,QAAC,iBAAD;IACE,IAAI,EAAEL,SADR;IAEE,QAAQ,EAAEO,QAFZ;IAGE,QAAQ,EAAEJ,UAHZ;IAIE,UAAU,EAAEG,MAJd;IAKE,WAAW,EAAEL,KAAF,WAAEA,KAAF,GAAW,EALxB;IAME,oBAAoB,EAAEQ,oBANxB;IAOE,QAAQ,EAAEI,mBAPZ;IAQE,KAAK,EAAEF,aART;IASE,IAAI,EAAC;EATP,GAUMH,IAVN;IAAA;IAAA;IAAA;EAAA,QADF;AAcD;;GAvDQT,oB;;KAAAA,oB;AAyDT,eAAeA,oBAAf"},"metadata":{},"sourceType":"module"}