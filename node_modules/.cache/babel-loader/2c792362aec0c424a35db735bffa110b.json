{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/creationhub/src/components/PricingForm/groups/ConfigurableFormGroups/formElements/basket/BasketSelect.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.promise.js\";\nimport { useState } from 'react';\nimport debounce from 'lodash.debounce';\nimport { LumaStatus, LumaTextSearch, RenderContent } from '@luma-fe-workspace/design-system';\nimport { usePricingAPI } from '../../../../usePricingAPI';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function BasketSelect({\n  id,\n  onUnderlierSelect,\n  isEditable\n}) {\n  _s();\n\n  const api = usePricingAPI();\n  const [underliers, setUnderliers] = useState([]);\n\n  const onSelect = underlier => {\n    if (underlier != null) {\n      onUnderlierSelect(underlier);\n    }\n  };\n\n  const onChange = value => {\n    if (value != null) {\n      try {\n        getUnderliers(value);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n\n  const getUnderliers = async searchText => {\n    const underliers = await api.getMatchingUnderliers({\n      searchText\n    }).unwrap();\n    setUnderliers(underliers);\n  };\n\n  const errorTemplate = api.isLoading.underliers ? /*#__PURE__*/_jsxDEV(LumaStatus, {\n    variant: \"progress\",\n    ariaLabel: \"progressStatus\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 51,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(LumaStatus, {\n    variant: \"failed\",\n    ariaLabel: \"failStatus\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 53,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(LumaTextSearch, {\n    id: id,\n    placeholder: \"Search\",\n    items: underliers,\n    itemToString: option => {\n      if (option && 'label' in option && option.label) {\n        return option.label;\n      }\n\n      return '';\n    },\n    renderContent: /*#__PURE__*/_jsxDEV(RenderContent, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 67,\n      columnNumber: 22\n    }, this),\n    inputAriaLabel: \"Search underliers\",\n    buttonAriaLabel: \"Clear field\",\n    variant: \"underlier\",\n    sizeVariant: \"large\",\n    disabled: !isEditable,\n    handleSelectItem: onSelect,\n    handleChange: debounce(onChange, 500),\n    errorTemplate: errorTemplate,\n    \"data-testid\": `field-${id}`\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 5\n  }, this);\n}\n\n_s(BasketSelect, \"hv0zuzaOty/2uaA8mpKoHE8Ny+c=\", false, function () {\n  return [usePricingAPI];\n});\n\n_c = BasketSelect;\n\nvar _c;\n\n$RefreshReg$(_c, \"BasketSelect\");","map":{"version":3,"names":["useState","debounce","LumaStatus","LumaTextSearch","RenderContent","usePricingAPI","BasketSelect","id","onUnderlierSelect","isEditable","api","underliers","setUnderliers","onSelect","underlier","onChange","value","getUnderliers","err","console","error","searchText","getMatchingUnderliers","unwrap","errorTemplate","isLoading","option","label"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/creationhub/src/components/PricingForm/groups/ConfigurableFormGroups/formElements/basket/BasketSelect.tsx"],"sourcesContent":["import { useState } from 'react';\nimport debounce from 'lodash.debounce';\nimport { UnderlierDetails } from '@luma-fe-workspace/redux';\nimport {\n  LumaStatus,\n  LumaTextSearch,\n  RenderContent,\n} from '@luma-fe-workspace/design-system';\nimport { usePricingAPI } from '../../../../usePricingAPI';\n\ntype BasketSelectProps = {\n  id: string;\n  onUnderlierSelect: (underlier: UnderlierDetails) => void;\n  isEditable: boolean;\n};\n\nexport function BasketSelect({\n  id,\n  onUnderlierSelect,\n  isEditable,\n}: BasketSelectProps) {\n  const api = usePricingAPI();\n  const [underliers, setUnderliers] = useState<UnderlierDetails[]>([]);\n\n  const onSelect = (underlier: UnderlierDetails | null | undefined) => {\n    if (underlier != null) {\n      onUnderlierSelect(underlier);\n    }\n  };\n\n  const onChange = (value: string | null | undefined) => {\n    if (value != null) {\n      try {\n        getUnderliers(value);\n      } catch (err) {\n        console.error(err);\n      }\n    }\n  };\n\n  const getUnderliers = async (searchText: string) => {\n    const underliers = await api\n      .getMatchingUnderliers({\n        searchText,\n      })\n      .unwrap();\n    setUnderliers(underliers);\n  };\n\n  const errorTemplate = api.isLoading.underliers ? (\n    <LumaStatus variant=\"progress\" ariaLabel=\"progressStatus\" />\n  ) : (\n    <LumaStatus variant=\"failed\" ariaLabel=\"failStatus\" />\n  );\n\n  return (\n    <LumaTextSearch\n      id={id}\n      placeholder=\"Search\"\n      items={underliers}\n      itemToString={(option) => {\n        if (option && 'label' in option && option.label) {\n          return option.label;\n        }\n        return '';\n      }}\n      renderContent={<RenderContent />}\n      inputAriaLabel=\"Search underliers\"\n      buttonAriaLabel=\"Clear field\"\n      variant=\"underlier\"\n      sizeVariant=\"large\"\n      disabled={!isEditable}\n      handleSelectItem={onSelect}\n      handleChange={debounce(onChange, 500)}\n      errorTemplate={errorTemplate}\n      data-testid={`field-${id}`}\n    />\n  );\n}\n"],"mappings":";;;;;;AAAA,SAASA,QAAT,QAAyB,OAAzB;AACA,OAAOC,QAAP,MAAqB,iBAArB;AAEA,SACEC,UADF,EAEEC,cAFF,EAGEC,aAHF,QAIO,kCAJP;AAKA,SAASC,aAAT,QAA8B,2BAA9B;;AAQA,OAAO,SAASC,YAAT,CAAsB;EAC3BC,EAD2B;EAE3BC,iBAF2B;EAG3BC;AAH2B,CAAtB,EAIe;EAAA;;EACpB,MAAMC,GAAG,GAAGL,aAAa,EAAzB;EACA,MAAM,CAACM,UAAD,EAAaC,aAAb,IAA8BZ,QAAQ,CAAqB,EAArB,CAA5C;;EAEA,MAAMa,QAAQ,GAAIC,SAAD,IAAoD;IACnE,IAAIA,SAAS,IAAI,IAAjB,EAAuB;MACrBN,iBAAiB,CAACM,SAAD,CAAjB;IACD;EACF,CAJD;;EAMA,MAAMC,QAAQ,GAAIC,KAAD,IAAsC;IACrD,IAAIA,KAAK,IAAI,IAAb,EAAmB;MACjB,IAAI;QACFC,aAAa,CAACD,KAAD,CAAb;MACD,CAFD,CAEE,OAAOE,GAAP,EAAY;QACZC,OAAO,CAACC,KAAR,CAAcF,GAAd;MACD;IACF;EACF,CARD;;EAUA,MAAMD,aAAa,GAAG,MAAOI,UAAP,IAA8B;IAClD,MAAMV,UAAU,GAAG,MAAMD,GAAG,CACzBY,qBADsB,CACA;MACrBD;IADqB,CADA,EAItBE,MAJsB,EAAzB;IAKAX,aAAa,CAACD,UAAD,CAAb;EACD,CAPD;;EASA,MAAMa,aAAa,GAAGd,GAAG,CAACe,SAAJ,CAAcd,UAAd,gBACpB,QAAC,UAAD;IAAY,OAAO,EAAC,UAApB;IAA+B,SAAS,EAAC;EAAzC;IAAA;IAAA;IAAA;EAAA,QADoB,gBAGpB,QAAC,UAAD;IAAY,OAAO,EAAC,QAApB;IAA6B,SAAS,EAAC;EAAvC;IAAA;IAAA;IAAA;EAAA,QAHF;EAMA,oBACE,QAAC,cAAD;IACE,EAAE,EAAEJ,EADN;IAEE,WAAW,EAAC,QAFd;IAGE,KAAK,EAAEI,UAHT;IAIE,YAAY,EAAGe,MAAD,IAAY;MACxB,IAAIA,MAAM,IAAI,WAAWA,MAArB,IAA+BA,MAAM,CAACC,KAA1C,EAAiD;QAC/C,OAAOD,MAAM,CAACC,KAAd;MACD;;MACD,OAAO,EAAP;IACD,CATH;IAUE,aAAa,eAAE,QAAC,aAAD;MAAA;MAAA;MAAA;IAAA,QAVjB;IAWE,cAAc,EAAC,mBAXjB;IAYE,eAAe,EAAC,aAZlB;IAaE,OAAO,EAAC,WAbV;IAcE,WAAW,EAAC,OAdd;IAeE,QAAQ,EAAE,CAAClB,UAfb;IAgBE,gBAAgB,EAAEI,QAhBpB;IAiBE,YAAY,EAAEZ,QAAQ,CAACc,QAAD,EAAW,GAAX,CAjBxB;IAkBE,aAAa,EAAES,aAlBjB;IAmBE,eAAc,SAAQjB,EAAG;EAnB3B;IAAA;IAAA;IAAA;EAAA,QADF;AAuBD;;GA9DeD,Y;UAKFD,a;;;KALEC,Y"},"metadata":{},"sourceType":"module"}