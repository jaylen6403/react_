{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/globalnav/src/lib/luma-globalnav.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { useNavigate } from 'react-router-dom';\nimport { useAppDispatch, useAppSelector, logout, logoutOnAllTabs, selectAuth, lumaPermissionsArray, useUiPermissionsQuery, useGetUserTrainingStatusUsingGetQuery, useGetWhitelabelInfoUsingGetQuery, useCrossSiteCstQuery, useGetPricingToolTypeUsingGetQuery } from '@luma-fe-workspace/redux';\nimport { getLumaAppLogin, isLocal, isProd } from '@luma-fe-workspace/utility';\nimport { buildNavTabs, FrontEndLibraries, GlobalNav } from '@luma-fe-workspace/design-system';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const LumaGlobalNav = ({\n  setShowTrainingModal\n}) => {\n  _s();\n\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n  const {\n    data: userPermissionsData,\n    isLoading: isLoadingUserPermissions\n  } = useUiPermissionsQuery({\n    permissions: lumaPermissionsArray\n  });\n  const userPermissions = userPermissionsData || [];\n  const {\n    data: userTrainingData,\n    isLoading: isLoadingTrainingStatus\n  } = useGetUserTrainingStatusUsingGetQuery();\n  const userTrainingDataProductTypes = (userTrainingData == null ? void 0 : userTrainingData.productTypes) || [];\n  const {\n    data: pricingToolTypeData\n  } = useGetPricingToolTypeUsingGetQuery();\n  const pricingToolType = pricingToolTypeData;\n  const userInfo = useAppSelector(selectAuth);\n  const tabs = buildNavTabs(userPermissions, userTrainingDataProductTypes, pricingToolType, FrontEndLibraries.REACT, isProd, userInfo.company);\n  const {\n    data: whiteLabelInfo\n  } = useGetWhitelabelInfoUsingGetQuery();\n  const {\n    data: cstToken\n  } = useCrossSiteCstQuery();\n  const accountAriaLabel = 'profile button';\n  const menuAriaLabel = 'mobile menu';\n\n  const handleNavigate = tab => {\n    const {\n      route,\n      url\n    } = tab;\n\n    if (tab.title === 'Structured Products') {\n      if ((userTrainingData == null ? void 0 : userTrainingData.cdTraining) !== 'Completed') {\n        setShowTrainingModal(true);\n        return true;\n      }\n    }\n\n    if (url) {\n      if ((url.includes('portal.lumafintech.com') || url.includes('portal.naviancapital.com')) && cstToken) {\n        window.location.href = `${url}cst=${cstToken}`;\n      } else {\n        window.location.href = url;\n      }\n    } else if (route) {\n      navigate(route);\n      return;\n    }\n  };\n\n  const userName = userInfo.fullName ? userInfo.fullName : '';\n\n  const handleLogout = () => {\n    dispatch(logout()).then(() => {\n      logoutOnAllTabs();\n\n      if (isLocal) {\n        navigate('/');\n      } else {\n        window.location.href = getLumaAppLogin();\n      }\n    });\n  };\n\n  if (isLoadingUserPermissions || isLoadingTrainingStatus) {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"...isLoading\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 12\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(GlobalNav, {\n    tabs: tabs,\n    accountAriaLabel: accountAriaLabel,\n    menuAriaLabel: menuAriaLabel,\n    handleNavigate: handleNavigate,\n    userName: userName,\n    logout: handleLogout,\n    issuerLogo: whiteLabelInfo ? whiteLabelInfo.companyUri : ''\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 106,\n    columnNumber: 5\n  }, this);\n};\n\n_s(LumaGlobalNav, \"BKR79+PmTW+iHxghdY9U5jo3was=\", false, function () {\n  return [useAppDispatch, useNavigate, useUiPermissionsQuery, useGetUserTrainingStatusUsingGetQuery, useGetPricingToolTypeUsingGetQuery, useAppSelector, useGetWhitelabelInfoUsingGetQuery, useCrossSiteCstQuery];\n});\n\n_c = LumaGlobalNav;\n\nvar _c;\n\n$RefreshReg$(_c, \"LumaGlobalNav\");","map":{"version":3,"names":["useNavigate","useAppDispatch","useAppSelector","logout","logoutOnAllTabs","selectAuth","lumaPermissionsArray","useUiPermissionsQuery","useGetUserTrainingStatusUsingGetQuery","useGetWhitelabelInfoUsingGetQuery","useCrossSiteCstQuery","useGetPricingToolTypeUsingGetQuery","getLumaAppLogin","isLocal","isProd","buildNavTabs","FrontEndLibraries","GlobalNav","LumaGlobalNav","setShowTrainingModal","dispatch","navigate","data","userPermissionsData","isLoading","isLoadingUserPermissions","permissions","userPermissions","userTrainingData","isLoadingTrainingStatus","userTrainingDataProductTypes","productTypes","pricingToolTypeData","pricingToolType","userInfo","tabs","REACT","company","whiteLabelInfo","cstToken","accountAriaLabel","menuAriaLabel","handleNavigate","tab","route","url","title","cdTraining","includes","window","location","href","userName","fullName","handleLogout","then","companyUri"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/globalnav/src/lib/luma-globalnav.tsx"],"sourcesContent":["import { useNavigate } from 'react-router-dom';\n\nimport {\n  useAppDispatch,\n  useAppSelector,\n  logout,\n  logoutOnAllTabs,\n  selectAuth,\n  lumaPermissionsArray,\n  useUiPermissionsQuery,\n  useGetUserTrainingStatusUsingGetQuery,\n  useGetWhitelabelInfoUsingGetQuery,\n  useCrossSiteCstQuery,\n  WidgetPermissions,\n  useGetPricingToolTypeUsingGetQuery,\n} from '@luma-fe-workspace/redux';\nimport { getLumaAppLogin, isLocal, isProd } from '@luma-fe-workspace/utility';\nimport {\n  buildNavTabs,\n  FrontEndLibraries,\n  GlobalNav,\n  NavTabType,\n  ProductTypesType,\n} from '@luma-fe-workspace/design-system';\nimport { Dispatch, SetStateAction } from 'react';\n\ntype LumaGlobalNavProps = {\n  setShowTrainingModal: Dispatch<SetStateAction<boolean>>;\n};\n\nexport const LumaGlobalNav = ({ setShowTrainingModal }: LumaGlobalNavProps) => {\n  const dispatch = useAppDispatch();\n  const navigate = useNavigate();\n\n  const { data: userPermissionsData, isLoading: isLoadingUserPermissions } =\n    useUiPermissionsQuery({\n      permissions: lumaPermissionsArray,\n    });\n\n  const userPermissions: WidgetPermissions[] = userPermissionsData || [];\n\n  const { data: userTrainingData, isLoading: isLoadingTrainingStatus } =\n    useGetUserTrainingStatusUsingGetQuery();\n\n  const userTrainingDataProductTypes: ProductTypesType =\n    userTrainingData?.productTypes || [];\n\n  const { data: pricingToolTypeData } = useGetPricingToolTypeUsingGetQuery();\n  const pricingToolType = pricingToolTypeData;\n\n  const userInfo = useAppSelector(selectAuth);\n  const tabs = buildNavTabs(\n    userPermissions,\n    userTrainingDataProductTypes,\n    pricingToolType,\n    FrontEndLibraries.REACT,\n    isProd,\n    userInfo.company\n  );\n  const { data: whiteLabelInfo } = useGetWhitelabelInfoUsingGetQuery();\n  const { data: cstToken } = useCrossSiteCstQuery();\n  const accountAriaLabel = 'profile button';\n  const menuAriaLabel = 'mobile menu';\n\n  const handleNavigate = (tab: NavTabType): boolean | void => {\n    const { route, url } = tab;\n    if (tab.title === 'Structured Products') {\n      if (userTrainingData?.cdTraining !== 'Completed') {\n        setShowTrainingModal(true);\n        return true;\n      }\n    }\n    if (url) {\n      if (\n        (url.includes('portal.lumafintech.com') ||\n          url.includes('portal.naviancapital.com')) &&\n        cstToken\n      ) {\n        window.location.href = `${url}cst=${cstToken}`;\n      } else {\n        window.location.href = url;\n      }\n    } else if (route) {\n      navigate(route);\n      return;\n    }\n  };\n\n  const userName = userInfo.fullName ? userInfo.fullName : '';\n\n  const handleLogout = () => {\n    dispatch(logout()).then(() => {\n      logoutOnAllTabs();\n      if (isLocal) {\n        navigate('/');\n      } else {\n        window.location.href = getLumaAppLogin();\n      }\n    });\n  };\n  if (isLoadingUserPermissions || isLoadingTrainingStatus) {\n    return <p>...isLoading</p>;\n  }\n\n  return (\n    <GlobalNav\n      tabs={tabs}\n      accountAriaLabel={accountAriaLabel}\n      menuAriaLabel={menuAriaLabel}\n      handleNavigate={handleNavigate}\n      userName={userName}\n      logout={handleLogout}\n      issuerLogo={whiteLabelInfo ? whiteLabelInfo.companyUri : ''}\n    />\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}