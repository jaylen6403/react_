{"ast":null,"code":"import \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport { formatEventType, ISODateToFormat } from './gridUtils';\n\nconst description = ({\n  eventData\n}) => {\n  var _eventData$tenorFinal, _eventData$underlierL;\n\n  const months = ((_eventData$tenorFinal = eventData.tenorFinal) != null ? _eventData$tenorFinal : 0) * 12;\n  const shortName = eventData.structureShortNameInternal;\n  const underliers = (_eventData$underlierL = eventData.underlierList) == null ? void 0 : _eventData$underlierL.map(u => {\n    return ' ' + u.ticker;\n  });\n  return months + 'M ' + shortName + ' linked to ' + underliers;\n};\n\nconst dateTitle = ({\n  eventData\n}) => {\n  if (eventData.confirmationType !== null) {\n    var _eventData$confirmati;\n\n    return (_eventData$confirmati = eventData.confirmationType) != null && _eventData$confirmati.includes('Maturity') ? 'Final Valuation Date' : 'Observation Date';\n  }\n\n  return;\n};\n\nconst paymentDateTitle = ({\n  eventData\n}) => {\n  if (eventData.confirmationType !== null) {\n    var _eventData$eventType;\n\n    return (_eventData$eventType = eventData.eventType) != null && _eventData$eventType.includes('Maturity') ? 'Maturity Date' : 'Payment Date';\n  }\n\n  return;\n};\n\nexport const getTemplateValues = (eventData, payout) => {\n  var _eventData$underlierL2;\n\n  const templateValues = {\n    eventType: formatEventType(eventData.confirmationType),\n    structureShortNameInternal: eventData.structureShortNameInternal,\n    productSymbol: eventData.productSymbol,\n    isin: eventData.productIdentifier,\n    description: description({\n      eventData\n    }),\n    issuer: eventData.issuer,\n    underlierList: (_eventData$underlierL2 = eventData.underlierList) == null ? void 0 : _eventData$underlierL2.map(u => u.ticker).join(', '),\n    tradeDate: ISODateToFormat(eventData.tradeDate),\n    event: formatEventType(eventData.confirmationType),\n    payout: payout,\n    dateTitle: dateTitle({\n      eventData\n    }),\n    dateValue: ISODateToFormat(eventData.observationDate),\n    paymentDateTitle: paymentDateTitle({\n      eventData\n    }),\n    paymentDateValue: ISODateToFormat(eventData.settlementDate)\n  };\n  Object.keys(templateValues).forEach(key => {\n    if (!templateValues[key]) templateValues[key] = '';\n  });\n  return templateValues;\n};","map":{"version":3,"names":["formatEventType","ISODateToFormat","description","eventData","months","tenorFinal","shortName","structureShortNameInternal","underliers","underlierList","map","u","ticker","dateTitle","confirmationType","includes","paymentDateTitle","eventType","getTemplateValues","payout","templateValues","productSymbol","isin","productIdentifier","issuer","join","tradeDate","event","dateValue","observationDate","paymentDateValue","settlementDate","Object","keys","forEach","key"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/utils/emailUtils.ts"],"sourcesContent":["import { EventProductData } from '@luma-fe-workspace/redux';\nimport { formatEventType, ISODateToFormat } from './gridUtils';\n\ninterface Props {\n  eventData: EventProductData;\n}\n\nconst description = ({ eventData }: Props) => {\n  const months = (eventData.tenorFinal ?? 0) * 12;\n  const shortName = eventData.structureShortNameInternal;\n  const underliers = eventData.underlierList?.map((u) => {\n    return ' ' + u.ticker;\n  });\n  return months + 'M ' + shortName + ' linked to ' + underliers;\n};\n\nconst dateTitle = ({ eventData }: Props) => {\n  if (eventData.confirmationType !== null) {\n    return eventData.confirmationType?.includes('Maturity')\n      ? 'Final Valuation Date'\n      : 'Observation Date';\n  }\n  return;\n};\n\nconst paymentDateTitle = ({ eventData }: Props) => {\n  if (eventData.confirmationType !== null) {\n    return eventData.eventType?.includes('Maturity')\n      ? 'Maturity Date'\n      : 'Payment Date';\n  }\n  return;\n};\n\nexport const getTemplateValues = (\n  eventData: EventProductData,\n  payout: string\n): { [key: string]: string | undefined } => {\n  const templateValues: { [key: string]: string | undefined } = {\n    eventType: formatEventType(eventData.confirmationType),\n    structureShortNameInternal: eventData.structureShortNameInternal,\n    productSymbol: eventData.productSymbol,\n    isin: eventData.productIdentifier,\n    description: description({ eventData }),\n    issuer: eventData.issuer,\n    underlierList: eventData.underlierList?.map((u) => u.ticker).join(', '),\n    tradeDate: ISODateToFormat(eventData.tradeDate),\n    event: formatEventType(eventData.confirmationType),\n    payout: payout,\n    dateTitle: dateTitle({ eventData }),\n    dateValue: ISODateToFormat(eventData.observationDate),\n    paymentDateTitle: paymentDateTitle({ eventData }),\n    paymentDateValue: ISODateToFormat(eventData.settlementDate),\n  };\n\n  Object.keys(templateValues).forEach((key) => {\n    if (!templateValues[key]) templateValues[key] = '';\n  });\n  return templateValues;\n};\n"],"mappings":";;AACA,SAASA,eAAT,EAA0BC,eAA1B,QAAiD,aAAjD;;AAMA,MAAMC,WAAW,GAAG,CAAC;EAAEC;AAAF,CAAD,KAA0B;EAAA;;EAC5C,MAAMC,MAAM,GAAG,0BAACD,SAAS,CAACE,UAAX,oCAAyB,CAAzB,IAA8B,EAA7C;EACA,MAAMC,SAAS,GAAGH,SAAS,CAACI,0BAA5B;EACA,MAAMC,UAAU,4BAAGL,SAAS,CAACM,aAAb,qBAAG,sBAAyBC,GAAzB,CAA8BC,CAAD,IAAO;IACrD,OAAO,MAAMA,CAAC,CAACC,MAAf;EACD,CAFkB,CAAnB;EAGA,OAAOR,MAAM,GAAG,IAAT,GAAgBE,SAAhB,GAA4B,aAA5B,GAA4CE,UAAnD;AACD,CAPD;;AASA,MAAMK,SAAS,GAAG,CAAC;EAAEV;AAAF,CAAD,KAA0B;EAC1C,IAAIA,SAAS,CAACW,gBAAV,KAA+B,IAAnC,EAAyC;IAAA;;IACvC,OAAO,yBAAAX,SAAS,CAACW,gBAAV,mCAA4BC,QAA5B,CAAqC,UAArC,IACH,sBADG,GAEH,kBAFJ;EAGD;;EACD;AACD,CAPD;;AASA,MAAMC,gBAAgB,GAAG,CAAC;EAAEb;AAAF,CAAD,KAA0B;EACjD,IAAIA,SAAS,CAACW,gBAAV,KAA+B,IAAnC,EAAyC;IAAA;;IACvC,OAAO,wBAAAX,SAAS,CAACc,SAAV,kCAAqBF,QAArB,CAA8B,UAA9B,IACH,eADG,GAEH,cAFJ;EAGD;;EACD;AACD,CAPD;;AASA,OAAO,MAAMG,iBAAiB,GAAG,CAC/Bf,SAD+B,EAE/BgB,MAF+B,KAGW;EAAA;;EAC1C,MAAMC,cAAqD,GAAG;IAC5DH,SAAS,EAAEjB,eAAe,CAACG,SAAS,CAACW,gBAAX,CADkC;IAE5DP,0BAA0B,EAAEJ,SAAS,CAACI,0BAFsB;IAG5Dc,aAAa,EAAElB,SAAS,CAACkB,aAHmC;IAI5DC,IAAI,EAAEnB,SAAS,CAACoB,iBAJ4C;IAK5DrB,WAAW,EAAEA,WAAW,CAAC;MAAEC;IAAF,CAAD,CALoC;IAM5DqB,MAAM,EAAErB,SAAS,CAACqB,MAN0C;IAO5Df,aAAa,4BAAEN,SAAS,CAACM,aAAZ,qBAAE,uBAAyBC,GAAzB,CAA8BC,CAAD,IAAOA,CAAC,CAACC,MAAtC,EAA8Ca,IAA9C,CAAmD,IAAnD,CAP6C;IAQ5DC,SAAS,EAAEzB,eAAe,CAACE,SAAS,CAACuB,SAAX,CARkC;IAS5DC,KAAK,EAAE3B,eAAe,CAACG,SAAS,CAACW,gBAAX,CATsC;IAU5DK,MAAM,EAAEA,MAVoD;IAW5DN,SAAS,EAAEA,SAAS,CAAC;MAAEV;IAAF,CAAD,CAXwC;IAY5DyB,SAAS,EAAE3B,eAAe,CAACE,SAAS,CAAC0B,eAAX,CAZkC;IAa5Db,gBAAgB,EAAEA,gBAAgB,CAAC;MAAEb;IAAF,CAAD,CAb0B;IAc5D2B,gBAAgB,EAAE7B,eAAe,CAACE,SAAS,CAAC4B,cAAX;EAd2B,CAA9D;EAiBAC,MAAM,CAACC,IAAP,CAAYb,cAAZ,EAA4Bc,OAA5B,CAAqCC,GAAD,IAAS;IAC3C,IAAI,CAACf,cAAc,CAACe,GAAD,CAAnB,EAA0Bf,cAAc,CAACe,GAAD,CAAd,GAAsB,EAAtB;EAC3B,CAFD;EAGA,OAAOf,cAAP;AACD,CAzBM"},"metadata":{},"sourceType":"module"}