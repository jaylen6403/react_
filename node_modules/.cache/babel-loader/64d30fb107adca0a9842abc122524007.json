{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/secondaries/src/components/TableCellTimeOffset/TableCellTimeOffset.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { useCallback, useEffect, useState } from 'react';\nimport { TableCellDropdown } from '@luma-fe-workspace/design-system';\nimport { DateHelper } from '@luma-fe-workspace/utility';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst msPerMinute = 60000;\nexport const defaultQuoteDeadlineOffsetMs = 5 * msPerMinute;\nexport const TableCellTimeOffset = ({\n  setValue,\n  goodForTime\n}) => {\n  _s();\n\n  const [offset, setOffset] = useState(defaultQuoteDeadlineOffsetMs);\n  const [deadlineOptions, setDeadlineOptions] = useState([]);\n  const [time, setTime] = useState(DateHelper.addMilliseconds(new Date(), defaultQuoteDeadlineOffsetMs));\n  useEffect(() => {\n    setTime(DateHelper.addMilliseconds(new Date(), offset));\n  }, [offset]);\n  const handleSelect = useCallback(newOffset => {\n    if (!goodForTime) return;\n\n    if (typeof newOffset === 'string') {\n      const bidDeadline = DateHelper.convertToUTC(goodForTime);\n      const differenceinMs = DateHelper.differenceInMilliseconds(bidDeadline, new Date());\n      setOffset(differenceinMs);\n      setValue('Max');\n      setTime(DateHelper.addMilliseconds(new Date(), differenceinMs));\n    } else {\n      setOffset(newOffset);\n      setValue(newOffset);\n    }\n  }, // eslint-disable-next-line react-hooks/exhaustive-deps\n  [goodForTime, offset, setValue]);\n  const setDueTimes = useCallback(() => {\n    if (!goodForTime) {\n      return;\n    }\n\n    const baseOptions = [defaultQuoteDeadlineOffsetMs, 10 * msPerMinute, 30 * msPerMinute, 60 * msPerMinute];\n    const bidDeadline = DateHelper.convertToUTC(goodForTime);\n    const differenceInMs = DateHelper.differenceInMilliseconds(bidDeadline, new Date());\n    const quoteDeadines = [];\n\n    for (let i = 0; i < baseOptions.length; i++) {\n      if (baseOptions[i] > differenceInMs) {\n        break;\n      } else {\n        quoteDeadines.push({\n          display: `${baseOptions[i] / msPerMinute} min`,\n          onClick: () => handleSelect(baseOptions[i])\n        });\n      }\n    }\n\n    if (quoteDeadines.length === 0) {\n      setOffset(differenceInMs);\n      setValue('Max');\n      setTime(DateHelper.addMilliseconds(new Date(), differenceInMs));\n    }\n\n    quoteDeadines.push({\n      display: 'Max',\n      onClick: () => handleSelect('Max')\n    });\n    setDeadlineOptions(quoteDeadines);\n  }, [goodForTime, handleSelect, setValue]);\n  useEffect(() => {\n    setDueTimes(); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (deadlineOptions.length === 1) {\n    return /*#__PURE__*/_jsxDEV(\"span\", {\n      children: time.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit'\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 101,\n      columnNumber: 7\n    }, this);\n  }\n\n  return /*#__PURE__*/_jsxDEV(TableCellDropdown, {\n    items: deadlineOptions,\n    value: time.toLocaleTimeString([], {\n      hour: '2-digit',\n      minute: '2-digit'\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 110,\n    columnNumber: 5\n  }, this);\n};\n\n_s(TableCellTimeOffset, \"w01PhtsM0lCqVu7KCQe5Wz0d+XU=\");\n\n_c = TableCellTimeOffset;\n\nvar _c;\n\n$RefreshReg$(_c, \"TableCellTimeOffset\");","map":{"version":3,"names":["useCallback","useEffect","useState","TableCellDropdown","DateHelper","msPerMinute","defaultQuoteDeadlineOffsetMs","TableCellTimeOffset","setValue","goodForTime","offset","setOffset","deadlineOptions","setDeadlineOptions","time","setTime","addMilliseconds","Date","handleSelect","newOffset","bidDeadline","convertToUTC","differenceinMs","differenceInMilliseconds","setDueTimes","baseOptions","differenceInMs","quoteDeadines","i","length","push","display","onClick","toLocaleTimeString","hour","minute"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/secondaries/src/components/TableCellTimeOffset/TableCellTimeOffset.tsx"],"sourcesContent":["import { useCallback, useEffect, useState } from 'react';\nimport { MenuItem, TableCellDropdown } from '@luma-fe-workspace/design-system';\nimport { DateHelper } from '@luma-fe-workspace/utility';\n\nexport interface TableCellTimeOffsetProps {\n  /**\n   * Function to set cell value\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  setValue: any;\n  /**\n   * RFQ collection periond\n   */\n  goodForTime: string | undefined;\n}\n\nconst msPerMinute = 60000;\nexport const defaultQuoteDeadlineOffsetMs = 5 * msPerMinute;\n\nexport const TableCellTimeOffset = ({\n  setValue,\n  goodForTime,\n}: TableCellTimeOffsetProps) => {\n  const [offset, setOffset] = useState(defaultQuoteDeadlineOffsetMs);\n  const [deadlineOptions, setDeadlineOptions] = useState<MenuItem[]>([]);\n  const [time, setTime] = useState<Date>(\n    DateHelper.addMilliseconds(new Date(), defaultQuoteDeadlineOffsetMs)\n  );\n  useEffect(() => {\n    setTime(DateHelper.addMilliseconds(new Date(), offset));\n  }, [offset]);\n\n  const handleSelect = useCallback(\n    (newOffset: number | string) => {\n      if (!goodForTime) return;\n      if (typeof newOffset === 'string') {\n        const bidDeadline = DateHelper.convertToUTC(goodForTime);\n        const differenceinMs = DateHelper.differenceInMilliseconds(\n          bidDeadline,\n          new Date()\n        );\n        setOffset(differenceinMs);\n        setValue('Max');\n        setTime(DateHelper.addMilliseconds(new Date(), differenceinMs));\n      } else {\n        setOffset(newOffset);\n        setValue(newOffset);\n      }\n    },\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n    [goodForTime, offset, setValue]\n  );\n\n  const setDueTimes = useCallback(() => {\n    if (!goodForTime) {\n      return;\n    }\n    const baseOptions = [\n      defaultQuoteDeadlineOffsetMs,\n      10 * msPerMinute,\n      30 * msPerMinute,\n      60 * msPerMinute,\n    ];\n\n    const bidDeadline = DateHelper.convertToUTC(goodForTime);\n    const differenceInMs = DateHelper.differenceInMilliseconds(\n      bidDeadline,\n      new Date()\n    );\n    const quoteDeadines: MenuItem[] = [];\n    for (let i = 0; i < baseOptions.length; i++) {\n      if (baseOptions[i] > differenceInMs) {\n        break;\n      } else {\n        quoteDeadines.push({\n          display: `${baseOptions[i] / msPerMinute} min`,\n          onClick: () => handleSelect(baseOptions[i]),\n        });\n      }\n    }\n    if (quoteDeadines.length === 0) {\n      setOffset(differenceInMs);\n      setValue('Max');\n      setTime(DateHelper.addMilliseconds(new Date(), differenceInMs));\n    }\n\n    quoteDeadines.push({\n      display: 'Max',\n      onClick: () => handleSelect('Max'),\n    });\n    setDeadlineOptions(quoteDeadines);\n  }, [goodForTime, handleSelect, setValue]);\n\n  useEffect(() => {\n    setDueTimes();\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  if (deadlineOptions.length === 1) {\n    return (\n      <span>\n        {time.toLocaleTimeString([], {\n          hour: '2-digit',\n          minute: '2-digit',\n        })}\n      </span>\n    );\n  }\n  return (\n    <TableCellDropdown\n      items={deadlineOptions}\n      value={time.toLocaleTimeString([], {\n        hour: '2-digit',\n        minute: '2-digit',\n      })}\n    />\n  );\n};\n"],"mappings":";;;;;AAAA,SAASA,WAAT,EAAsBC,SAAtB,EAAiCC,QAAjC,QAAiD,OAAjD;AACA,SAAmBC,iBAAnB,QAA4C,kCAA5C;AACA,SAASC,UAAT,QAA2B,4BAA3B;;AAcA,MAAMC,WAAW,GAAG,KAApB;AACA,OAAO,MAAMC,4BAA4B,GAAG,IAAID,WAAzC;AAEP,OAAO,MAAME,mBAAmB,GAAG,CAAC;EAClCC,QADkC;EAElCC;AAFkC,CAAD,KAGH;EAAA;;EAC9B,MAAM,CAACC,MAAD,EAASC,SAAT,IAAsBT,QAAQ,CAACI,4BAAD,CAApC;EACA,MAAM,CAACM,eAAD,EAAkBC,kBAAlB,IAAwCX,QAAQ,CAAa,EAAb,CAAtD;EACA,MAAM,CAACY,IAAD,EAAOC,OAAP,IAAkBb,QAAQ,CAC9BE,UAAU,CAACY,eAAX,CAA2B,IAAIC,IAAJ,EAA3B,EAAuCX,4BAAvC,CAD8B,CAAhC;EAGAL,SAAS,CAAC,MAAM;IACdc,OAAO,CAACX,UAAU,CAACY,eAAX,CAA2B,IAAIC,IAAJ,EAA3B,EAAuCP,MAAvC,CAAD,CAAP;EACD,CAFQ,EAEN,CAACA,MAAD,CAFM,CAAT;EAIA,MAAMQ,YAAY,GAAGlB,WAAW,CAC7BmB,SAAD,IAAgC;IAC9B,IAAI,CAACV,WAAL,EAAkB;;IAClB,IAAI,OAAOU,SAAP,KAAqB,QAAzB,EAAmC;MACjC,MAAMC,WAAW,GAAGhB,UAAU,CAACiB,YAAX,CAAwBZ,WAAxB,CAApB;MACA,MAAMa,cAAc,GAAGlB,UAAU,CAACmB,wBAAX,CACrBH,WADqB,EAErB,IAAIH,IAAJ,EAFqB,CAAvB;MAIAN,SAAS,CAACW,cAAD,CAAT;MACAd,QAAQ,CAAC,KAAD,CAAR;MACAO,OAAO,CAACX,UAAU,CAACY,eAAX,CAA2B,IAAIC,IAAJ,EAA3B,EAAuCK,cAAvC,CAAD,CAAP;IACD,CATD,MASO;MACLX,SAAS,CAACQ,SAAD,CAAT;MACAX,QAAQ,CAACW,SAAD,CAAR;IACD;EACF,CAhB6B,EAiB9B;EACA,CAACV,WAAD,EAAcC,MAAd,EAAsBF,QAAtB,CAlB8B,CAAhC;EAqBA,MAAMgB,WAAW,GAAGxB,WAAW,CAAC,MAAM;IACpC,IAAI,CAACS,WAAL,EAAkB;MAChB;IACD;;IACD,MAAMgB,WAAW,GAAG,CAClBnB,4BADkB,EAElB,KAAKD,WAFa,EAGlB,KAAKA,WAHa,EAIlB,KAAKA,WAJa,CAApB;IAOA,MAAMe,WAAW,GAAGhB,UAAU,CAACiB,YAAX,CAAwBZ,WAAxB,CAApB;IACA,MAAMiB,cAAc,GAAGtB,UAAU,CAACmB,wBAAX,CACrBH,WADqB,EAErB,IAAIH,IAAJ,EAFqB,CAAvB;IAIA,MAAMU,aAAyB,GAAG,EAAlC;;IACA,KAAK,IAAIC,CAAC,GAAG,CAAb,EAAgBA,CAAC,GAAGH,WAAW,CAACI,MAAhC,EAAwCD,CAAC,EAAzC,EAA6C;MAC3C,IAAIH,WAAW,CAACG,CAAD,CAAX,GAAiBF,cAArB,EAAqC;QACnC;MACD,CAFD,MAEO;QACLC,aAAa,CAACG,IAAd,CAAmB;UACjBC,OAAO,EAAG,GAAEN,WAAW,CAACG,CAAD,CAAX,GAAiBvB,WAAY,MADxB;UAEjB2B,OAAO,EAAE,MAAMd,YAAY,CAACO,WAAW,CAACG,CAAD,CAAZ;QAFV,CAAnB;MAID;IACF;;IACD,IAAID,aAAa,CAACE,MAAd,KAAyB,CAA7B,EAAgC;MAC9BlB,SAAS,CAACe,cAAD,CAAT;MACAlB,QAAQ,CAAC,KAAD,CAAR;MACAO,OAAO,CAACX,UAAU,CAACY,eAAX,CAA2B,IAAIC,IAAJ,EAA3B,EAAuCS,cAAvC,CAAD,CAAP;IACD;;IAEDC,aAAa,CAACG,IAAd,CAAmB;MACjBC,OAAO,EAAE,KADQ;MAEjBC,OAAO,EAAE,MAAMd,YAAY,CAAC,KAAD;IAFV,CAAnB;IAIAL,kBAAkB,CAACc,aAAD,CAAlB;EACD,CAtC8B,EAsC5B,CAAClB,WAAD,EAAcS,YAAd,EAA4BV,QAA5B,CAtC4B,CAA/B;EAwCAP,SAAS,CAAC,MAAM;IACduB,WAAW,GADG,CAEd;EACD,CAHQ,EAGN,EAHM,CAAT;;EAKA,IAAIZ,eAAe,CAACiB,MAAhB,KAA2B,CAA/B,EAAkC;IAChC,oBACE;MAAA,UACGf,IAAI,CAACmB,kBAAL,CAAwB,EAAxB,EAA4B;QAC3BC,IAAI,EAAE,SADqB;QAE3BC,MAAM,EAAE;MAFmB,CAA5B;IADH;MAAA;MAAA;MAAA;IAAA,QADF;EAQD;;EACD,oBACE,QAAC,iBAAD;IACE,KAAK,EAAEvB,eADT;IAEE,KAAK,EAAEE,IAAI,CAACmB,kBAAL,CAAwB,EAAxB,EAA4B;MACjCC,IAAI,EAAE,SAD2B;MAEjCC,MAAM,EAAE;IAFyB,CAA5B;EAFT;IAAA;IAAA;IAAA;EAAA,QADF;AASD,CAlGM;;GAAM5B,mB;;KAAAA,mB"},"metadata":{},"sourceType":"module"}