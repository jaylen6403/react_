{"ast":null,"code":"import \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/es.promise.js\";\nexport function downloadDocument(content, filename) {\n  const downloadLink = document.createElement('a');\n  const url = window.URL || window.webkitURL;\n  downloadLink.href = url.createObjectURL(content);\n  downloadLink.target = '_blank'; // current solution downloads document instantly\n  // if it's expected to open file in new tab instead, remove the next line\n\n  downloadLink.download = filename;\n  downloadLink.click();\n}\nexport function getDocuments(rfq, api) {\n  var _rfq$documents;\n\n  return (_rfq$documents = rfq.documents) == null ? void 0 : _rfq$documents.map(({\n    id: documentId,\n    filename,\n    documentType,\n    language,\n    uploadTimestamp\n  }) => {\n    const onFileClick = async () => {\n      try {\n        const result = await api.getDocument({\n          documentId,\n          rfqId: rfq.id\n        }).unwrap();\n        downloadDocument(result, filename);\n      } catch (error) {\n        console.error(error);\n      }\n    };\n\n    const uploadTimestampLabel = new Date(uploadTimestamp).toLocaleString();\n    return {\n      documentId,\n      filename,\n      documentType: documentType.label,\n      language: language.label,\n      uploadTimestamp: uploadTimestampLabel,\n      downloadAction: {\n        action: onFileClick,\n        filename\n      }\n    };\n  });\n}","map":{"version":3,"names":["downloadDocument","content","filename","downloadLink","document","createElement","url","window","URL","webkitURL","href","createObjectURL","target","download","click","getDocuments","rfq","api","documents","map","id","documentId","documentType","language","uploadTimestamp","onFileClick","result","getDocument","rfqId","unwrap","error","console","uploadTimestampLabel","Date","toLocaleString","label","downloadAction","action"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/creationhub/src/components/PricingForm/groups/DocumentRequests/DocumentRequestsUtils.ts"],"sourcesContent":["import { Rfq } from '@luma-fe-workspace/redux';\n\nexport type IssuerDocumentToRender = {\n  documentId: string;\n  filename: string;\n  documentType: string;\n  language: string;\n  uploadTimestamp: string;\n  downloadAction: {\n    action: () => Promise<void>;\n    filename: string;\n  };\n};\n\nexport function downloadDocument(content: Blob, filename: string) {\n  const downloadLink = document.createElement('a');\n  const url = window.URL || window.webkitURL;\n  downloadLink.href = url.createObjectURL(content);\n  downloadLink.target = '_blank';\n  // current solution downloads document instantly\n  // if it's expected to open file in new tab instead, remove the next line\n  downloadLink.download = filename;\n  downloadLink.click();\n}\n\nexport function getDocuments(\n  rfq: Rfq,\n  api: any\n): IssuerDocumentToRender[] | undefined {\n  return rfq.documents?.map(\n    ({ id: documentId, filename, documentType, language, uploadTimestamp }) => {\n      const onFileClick = async () => {\n        try {\n          const result = await api\n            .getDocument({\n              documentId,\n              rfqId: rfq.id,\n            })\n            .unwrap();\n          downloadDocument(result, filename);\n        } catch (error) {\n          console.error(error);\n        }\n      };\n      const uploadTimestampLabel = new Date(uploadTimestamp).toLocaleString();\n      return {\n        documentId,\n        filename,\n        documentType: documentType.label,\n        language: language.label,\n        uploadTimestamp: uploadTimestampLabel,\n        downloadAction: { action: onFileClick, filename },\n      };\n    }\n  );\n}\n"],"mappings":";;;;;AAcA,OAAO,SAASA,gBAAT,CAA0BC,OAA1B,EAAyCC,QAAzC,EAA2D;EAChE,MAAMC,YAAY,GAAGC,QAAQ,CAACC,aAAT,CAAuB,GAAvB,CAArB;EACA,MAAMC,GAAG,GAAGC,MAAM,CAACC,GAAP,IAAcD,MAAM,CAACE,SAAjC;EACAN,YAAY,CAACO,IAAb,GAAoBJ,GAAG,CAACK,eAAJ,CAAoBV,OAApB,CAApB;EACAE,YAAY,CAACS,MAAb,GAAsB,QAAtB,CAJgE,CAKhE;EACA;;EACAT,YAAY,CAACU,QAAb,GAAwBX,QAAxB;EACAC,YAAY,CAACW,KAAb;AACD;AAED,OAAO,SAASC,YAAT,CACLC,GADK,EAELC,GAFK,EAGiC;EAAA;;EACtC,yBAAOD,GAAG,CAACE,SAAX,qBAAO,eAAeC,GAAf,CACL,CAAC;IAAEC,EAAE,EAAEC,UAAN;IAAkBnB,QAAlB;IAA4BoB,YAA5B;IAA0CC,QAA1C;IAAoDC;EAApD,CAAD,KAA2E;IACzE,MAAMC,WAAW,GAAG,YAAY;MAC9B,IAAI;QACF,MAAMC,MAAM,GAAG,MAAMT,GAAG,CACrBU,WADkB,CACN;UACXN,UADW;UAEXO,KAAK,EAAEZ,GAAG,CAACI;QAFA,CADM,EAKlBS,MALkB,EAArB;QAMA7B,gBAAgB,CAAC0B,MAAD,EAASxB,QAAT,CAAhB;MACD,CARD,CAQE,OAAO4B,KAAP,EAAc;QACdC,OAAO,CAACD,KAAR,CAAcA,KAAd;MACD;IACF,CAZD;;IAaA,MAAME,oBAAoB,GAAG,IAAIC,IAAJ,CAAST,eAAT,EAA0BU,cAA1B,EAA7B;IACA,OAAO;MACLb,UADK;MAELnB,QAFK;MAGLoB,YAAY,EAAEA,YAAY,CAACa,KAHtB;MAILZ,QAAQ,EAAEA,QAAQ,CAACY,KAJd;MAKLX,eAAe,EAAEQ,oBALZ;MAMLI,cAAc,EAAE;QAAEC,MAAM,EAAEZ,WAAV;QAAuBvB;MAAvB;IANX,CAAP;EAQD,CAxBI,CAAP;AA0BD"},"metadata":{},"sourceType":"module"}