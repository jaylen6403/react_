{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/lifecyclemanager/src/components/ColumnChart/ColumnChartCard.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport { DISPLAY_EVENT_TYPE, selectLifecycleEventRequestObject, useAppSelector, useGetPayoutHorizonUsingGetQuery } from '@luma-fe-workspace/redux';\nimport { InfoWidget } from '../InfoWidget/InfoWidget';\nimport { ColumnChart } from './ColumnChart';\nimport { Spinner } from '@luma-fe-workspace/design-system';\nimport { CustomLumaStatus } from '../CustomLumaStatus/CustomLumaStatus.styles';\nimport { ColumnChartWrapper } from './ColumnChartCard.styles';\nimport { DateHelper } from '@luma-fe-workspace/utility';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ColumnChartCard = ({\n  title,\n  styles,\n  highchartOptions,\n  isCollapsed,\n  setIsCollapsed\n}) => {\n  _s();\n\n  const mockedConvertedData = {\n    Maturing: [],\n    'Call Opportunity': [],\n    'Coupon Opportunity': []\n  };\n  const eventRequestObject = useAppSelector(selectLifecycleEventRequestObject);\n  const cutoffDateNum = Date.parse(eventRequestObject.dateRange.endDate);\n  const cutoffDate = isNaN(cutoffDateNum) ? new Date(DateHelper.endOfMonth(DateHelper.addMonths(new Date(), 18)).setHours(23, 59, 0, 0)) // Default to 18 months from today\n  : new Date(cutoffDateNum);\n  const response = useGetPayoutHorizonUsingGetQuery(eventRequestObject);\n  const {\n    data: payoutHorizonDetails = []\n  } = response;\n  payoutHorizonDetails.forEach(day => {\n    const dayAsDate = new Date(day.date);\n    if (dayAsDate > cutoffDate) return;\n    day.events.forEach(event => {\n      var _mockedConvertedData$;\n\n      const displayEventType = DISPLAY_EVENT_TYPE[event.eventType];\n      (_mockedConvertedData$ = mockedConvertedData[displayEventType]) == null ? void 0 : _mockedConvertedData$.push([dayAsDate.getTime(), event.value]);\n    });\n  });\n  const columnChartData = [...Object.keys(mockedConvertedData).map(eventType => {\n    return {\n      name: eventType,\n      data: mockedConvertedData[eventType]\n    };\n  })];\n\n  const columnChart = /*#__PURE__*/_jsxDEV(ColumnChart, {\n    data: columnChartData,\n    highchartOptions: highchartOptions\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n\n  const widgetView = response.isFetching ? /*#__PURE__*/_jsxDEV(Spinner, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 84,\n    columnNumber: 5\n  }, this) : response.isError ? /*#__PURE__*/_jsxDEV(CustomLumaStatus, {\n    variant: 'failed',\n    ariaLabel: 'Failed Message',\n    titleMessage: 'Request Failed',\n    helperMessage: 'Something went wrong!'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 86,\n    columnNumber: 5\n  }, this) : /*#__PURE__*/_jsxDEV(ColumnChartWrapper, {\n    children: columnChart\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 93,\n    columnNumber: 5\n  }, this);\n  return /*#__PURE__*/_jsxDEV(InfoWidget, {\n    title: title,\n    content: widgetView,\n    styles: styles,\n    isCollapsed: isCollapsed,\n    setIsCollapsed: setIsCollapsed\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 97,\n    columnNumber: 5\n  }, this);\n};\n\n_s(ColumnChartCard, \"CJjv5WKSZ5iG8fsE9I29wXkYQaQ=\", false, function () {\n  return [useAppSelector, useGetPayoutHorizonUsingGetQuery];\n});\n\n_c = ColumnChartCard;\n\nvar _c;\n\n$RefreshReg$(_c, \"ColumnChartCard\");","map":{"version":3,"names":["DISPLAY_EVENT_TYPE","selectLifecycleEventRequestObject","useAppSelector","useGetPayoutHorizonUsingGetQuery","InfoWidget","ColumnChart","Spinner","CustomLumaStatus","ColumnChartWrapper","DateHelper","ColumnChartCard","title","styles","highchartOptions","isCollapsed","setIsCollapsed","mockedConvertedData","Maturing","eventRequestObject","cutoffDateNum","Date","parse","dateRange","endDate","cutoffDate","isNaN","endOfMonth","addMonths","setHours","response","data","payoutHorizonDetails","forEach","day","dayAsDate","date","events","event","displayEventType","eventType","push","getTime","value","columnChartData","Object","keys","map","name","columnChart","widgetView","isFetching","isError"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/lifecyclemanager/src/components/ColumnChart/ColumnChartCard.tsx"],"sourcesContent":["import {\n  DISPLAY_EVENT_TYPE,\n  selectLifecycleEventRequestObject,\n  useAppSelector,\n  useGetPayoutHorizonUsingGetQuery,\n} from '@luma-fe-workspace/redux';\nimport { SeriesColumnOptions } from 'highcharts';\nimport { InfoWidget } from '../InfoWidget/InfoWidget';\nimport { ColumnChart } from './ColumnChart';\nimport { Spinner } from '@luma-fe-workspace/design-system';\nimport { CustomLumaStatus } from '../CustomLumaStatus/CustomLumaStatus.styles';\nimport { ColumnChartWrapper } from './ColumnChartCard.styles';\nimport { DateHelper } from '@luma-fe-workspace/utility';\nexport interface ColumnChartCardProps {\n  title: string;\n  styles?: string;\n  highchartOptions?: Highcharts.Options;\n  isCollapsed: boolean;\n  setIsCollapsed: (isCollapsed: boolean) => void;\n}\n\nexport const ColumnChartCard = ({\n  title,\n  styles,\n  highchartOptions,\n  isCollapsed,\n  setIsCollapsed,\n}: ColumnChartCardProps) => {\n  const mockedConvertedData: {\n    /**\n     * Each of these is effectively a `[number, number][]` where the first value is\n     * the offset from the first value and the second is the value. For datetimes,\n     * Highcharts prefers milliseconds. See the related property `relativeXValue`\n     */\n    [key in DISPLAY_EVENT_TYPE]: SeriesColumnOptions['data'][];\n  } = {\n    Maturing: [],\n    'Call Opportunity': [],\n    'Coupon Opportunity': [],\n  };\n  const eventRequestObject = useAppSelector(selectLifecycleEventRequestObject);\n  const cutoffDateNum: number = Date.parse(\n    eventRequestObject.dateRange.endDate\n  );\n  const cutoffDate: Date = isNaN(cutoffDateNum)\n    ? new Date(\n        DateHelper.endOfMonth(DateHelper.addMonths(new Date(), 18)).setHours(\n          23,\n          59,\n          0,\n          0\n        )\n      ) // Default to 18 months from today\n    : new Date(cutoffDateNum);\n\n  const response = useGetPayoutHorizonUsingGetQuery(eventRequestObject);\n  const { data: payoutHorizonDetails = [] } = response;\n\n  payoutHorizonDetails.forEach((day) => {\n    const dayAsDate = new Date(day.date);\n    if (dayAsDate > cutoffDate) return;\n    day.events.forEach((event) => {\n      const displayEventType = DISPLAY_EVENT_TYPE[event.eventType];\n      mockedConvertedData[displayEventType]?.push([\n        dayAsDate.getTime(),\n        event.value,\n      ]);\n    });\n  });\n  const columnChartData = [\n    ...Object.keys(mockedConvertedData).map((eventType) => {\n      return {\n        name: eventType,\n        data: mockedConvertedData[eventType as DISPLAY_EVENT_TYPE],\n      };\n    }),\n  ];\n\n  const columnChart = (\n    <ColumnChart data={columnChartData} highchartOptions={highchartOptions} />\n  );\n\n  const widgetView = response.isFetching ? (\n    <Spinner />\n  ) : response.isError ? (\n    <CustomLumaStatus\n      variant={'failed'}\n      ariaLabel={'Failed Message'}\n      titleMessage={'Request Failed'}\n      helperMessage={'Something went wrong!'}\n    />\n  ) : (\n    <ColumnChartWrapper>{columnChart}</ColumnChartWrapper>\n  );\n\n  return (\n    <InfoWidget\n      title={title}\n      content={widgetView}\n      styles={styles}\n      isCollapsed={isCollapsed}\n      setIsCollapsed={setIsCollapsed}\n    />\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}