{"ast":null,"code":"import \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.string.starts-with.js\";\nimport { ENV, FrontEndLibraries } from '../GlobalNav.types';\nimport { ROUTE_KEYS, ROUTES } from './routes';\nimport { WidgetPermissions } from './widgetPermissions';\nconst COMPANIES_WITH_EVENT_NOTIFICATION_ACCESS = ['Bank of America', 'GWIM']; // TODO - keep in shared location\n// libs/common/src/lib/getLumaAppLogin.ts\n\nexport const getAngularLink = url => {\n  const formattedUrl = url != null ? url : window.origin;\n  return formattedUrl.replace(/go(?:-(an|ch|dn|lm|sp))?(?=\\.)/g, (match, teamSubdomain) => teamSubdomain != null ? teamSubdomain : 'app');\n};\nexport const isTabDropdown = tab => {\n  var _tab$children;\n\n  return !!(tab != null && (_tab$children = tab.children) != null && _tab$children.length);\n}; // currently unused, see the comment below in generateAppUrl\n// const ENV_SUBDOMAINS = {\n//   [ENV.PROD]: '',\n//   [ENV.STAGING]: 'staging',\n//   [ENV.UAT]: 'buat',\n//   [ENV.QA]: 'bdev',\n//   [ENV.DEV]: 'bdev',\n//   [ENV.LOCAL]: '',\n// };\n\nexport const isProduction = () => window.origin.includes('https://app.lumafintech.com') || window.origin.includes('https://go.lumafintech.com');\nexport const isStaging = () => window.origin.includes('https://go.staging.lumafintech.com') || window.origin.includes('https://app.staging.lumafintech.com');\nexport const isUAT = () => window.origin.includes('https://go.buat.lumafintech.com') || window.origin.includes('https://app.buat.lumafintech.com');\nexport const isQA = () => window.origin.includes('https://go.bqa.lumafintech.com') || window.origin.includes('https://app.bqa.lumafintech.com');\nexport const isDev = () => window.origin.includes('https://go.bdev.lumafintech.com') || window.origin.includes('https://app.bdev.lumafintech.com');\nexport const isHigherEnvironment = () => isProduction() || isStaging() || isUAT(); // LIST OF ENVS FOR ANGULAR (luma-app):\n//\n// DEV:     https://app.bdev.lumafintech.com\n// QA:      https://app.bqa.lumafintech.com\n//\n// AN DEV:  https://an.bdev.lumafintech.com\n// AN QA:   https://an.bqa.lumafintech.com\n// CH DEV:  https://ch.bdev.lumafintech.com\n// CH QA:   https://ch.bqa.lumafintech.com\n// LM DEV:  https://lm.bdev.lumafintech.com\n// LM QA:   https://lm.bqa.lumafintech.com\n// PL DEV:  https://pl.bdev.lumafintech.com\n// PL QA:   https://pl.bqa.lumafintech.com\n// PM DEV:  https://pm.bdev.lumafintech.com\n// PM QA:   https://pm.bqa.lumafintech.com\n// PM QA:   https://pm.bqa.lumafintech.com\n//\n// UAT:     https://app.buat.lumafintech.com\n// Staging: https://app.staging.lumafintech.com\n// Prod:    https://app.lumafintech.com\n// LIST OF ENVS FOR REACT (luma-fe-workspace):\n//\n// DEV:     https://go.bdev.lumafintech.com\n// QA:      https://go.bqa.lumafintech.com\n// UAT:     https://go.buat.lumafintech.com\n// Staging: https://go.staging.lumafintech.com\n// Prod:    https://go.lumafintech.com\n// COLD FUSION ENVS\n// PROD:    portal.lumafintech.com\n// STAGING: stagingportal.lumafintech.com\n// UAT:     uatportal.lumafintech.com\n// QA:      qaportal.lumafintech.com\n// DEV:     ngportal.lumafintech.com\n\n/**\n * generateAppUrl: takes a route to append to the end of the generated base url\n * and a destination library that determines if the base url should be for the angular app or the react app deployment.\n *\n * This function derives the correct environment-specific url based on the current window.origin and the desired destination.\n */\n\nexport const generateAppUrl = (route, destinationLibrary, env = ENV.PROD) => {\n  // The following is a method in which we have an env flag that tells us which deployment env we're in.\n  // This does not as yet exist, so we are using the second method\n  //\n  // let baseUrl = `https://${LIBRARY_SUBDOMAINS[destinationLibrary]}.${ENV_SUBDOMAINS[env]}.lumafintech.com`;\n  // if (env === ENV.LOCAL) baseUrl = 'http://locahost:4200';\n  let baseUrl = window.origin;\n\n  if (destinationLibrary === FrontEndLibraries.ANGULAR) {\n    if (isHigherEnvironment()) {\n      baseUrl = baseUrl.replace('go.', 'app.');\n    } else {\n      baseUrl = getAngularLink(baseUrl);\n    }\n  }\n\n  return `${baseUrl}${route}`;\n};\n\nconst createLinkToOtherApp = (destinationLibrary, routeKey) => {\n  const route = ROUTES[routeKey][destinationLibrary];\n  return {\n    url: generateAppUrl(route, destinationLibrary)\n  };\n};\n\nexport const determineNavRouteOrUrl = (frontEndLibrary, routeKey, userPermissions) => {\n  const route = ROUTES[routeKey][frontEndLibrary]; // FOR HOME (dashboard)\n  // If the user has access to the new dashboard or is already in the React app, route to the React app's dashboard\n\n  if (routeKey === ROUTE_KEYS.HOME) {\n    if (frontEndLibrary === FrontEndLibraries.ANGULAR && !userHasAccess([WidgetPermissions.MenuCanViewLegacyDashboard], userPermissions)) {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    } else {\n      return {\n        route\n      };\n    }\n  } // FOR CREATION HUB\n  // For the time being if we are not in higher envs, route to the new creation hub products in React\n  // In higher envs continue to utilize the existing products in Angular\n  // Once the products are deployed in production\n  // we can remove the env checks and simply route to the React deployments in all cases\n\n\n  if (routeKey === ROUTE_KEYS.CREATE && !isProduction() && !isUAT() && !isStaging()) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return {\n      route\n    };else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  } // FOR LIFECYCLE\n  // Allow routing to both the existing Angular 'Lifecycle Manager' as well as the React 'Lifecycle Manager 2.0 Beta'\n  // Each has its own associated permission for the respective dropdown link to be visible\n\n\n  if (routeKey === ROUTE_KEYS.LIFECYCLE) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return {\n      route\n    };else {\n      return createLinkToOtherApp(FrontEndLibraries.ANGULAR, routeKey);\n    }\n  } // FOR EVENT CONFIRMATIONS\n\n\n  if (routeKey === ROUTE_KEYS.EVENT_NOTIFICATIONS) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return {\n      route\n    };else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  } // FOR EVENT CONFIRMATIONS ADMIN\n\n\n  if (routeKey === ROUTE_KEYS.EVENT_NOTIFICATIONS_ADMIN) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return {\n      route\n    };else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  } // FOR SECONDARIES\n\n\n  if (routeKey === ROUTE_KEYS.TRADE) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return {\n      route\n    };else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  } // ALL REMAINING CASES\n\n\n  if (frontEndLibrary === FrontEndLibraries.REACT) {\n    return createLinkToOtherApp(FrontEndLibraries.ANGULAR, routeKey);\n  } else {\n    return {\n      route\n    };\n  }\n};\n/**\n * getColdFusionBaseUrl: function that should be called with no arguments\n * that derives the correct environment-specific Cold Fusion base url based on the current window.origin.\n *\n * e.g.\n * https://app.bdev.lumafintech.com => https://ngportal.lumafintech.com\n * https://app.staging.lumafintech.com => https://stagingportal.lumafintech.com\n *\n * Optional argument 'origin' for testing how this function will work to convert various base urls\n * with an input rather than pulling directly from window.origin in the browser.\n */\n\nexport const getColdFusionBaseUrl = origin => {\n  const currentUrl = origin || window.origin; // TODO - Does this need changed?\n\n  const updatedUrl = currentUrl.replace('http://', 'https://').replace('localhost:4200', 'app.bdev.lumafintech.com').replace('//app.', '//').replace('//go.', '//').replace('//an.', '//').replace('//ch.', '//').replace('//lm.', '//').replace('//pl.', '//').replace('//pm.', '//').replace('bdev.', 'ng').replace('bqa.', 'qa').replace('buat.', 'uat').replace('staging.', 'staging').replace('lumafintech.com', 'portal.lumafintech.com'); // CF links are different for staging and production\n\n  if (updatedUrl.startsWith('https://portal.lumafintech.com') || updatedUrl.startsWith('https://stagingportal.lumafintech.com')) {\n    return updatedUrl.replace('lumafintech', 'naviancapital');\n  } else return updatedUrl;\n}; // NOTE: AD-HOC TESTS FOR THE ABOVE METHOD, uncomment to use in console\n// TODO - turn these into specs\n// EXPECT THE FOLLOWING TO OUTPUT https://ngportal.lumafintech.com\n// console.log('getColdFusionBaseUrl(\"http://localhost:4200\")', getColdFusionBaseUrl('http://localhost:4200'), '\\n');\n// console.log('getColdFusionBaseUrl(\"https://app.staging.lumafintech.com\")', getColdFusionBaseUrl('https://stagingportal.lumafintech.com'), '\\n');\n\nexport const getColdFusionLink = (page, section) => {\n  return `${getColdFusionBaseUrl()}/cdfg/WebPages/${page}.cfm?${section ? `section=${section}&` : ''}`;\n};\nexport const getColdFusionLinkAppVersion = (page, section) => {\n  return `${getColdFusionBaseUrl()}/cdfg/app/${page}.cfm?${section ? `section=${section}&` : ''}`;\n};\nconst STRUCTURED_PRODUCTS_PRODUCT_TYPES = {\n  LINKED_CDS: \"Market Linked CD's\",\n  STRUCTURED_NOTES: 'Structured Notes'\n};\nconst structuredProductTypes = [STRUCTURED_PRODUCTS_PRODUCT_TYPES.LINKED_CDS, STRUCTURED_PRODUCTS_PRODUCT_TYPES.STRUCTURED_NOTES];\nconst ANNUITY_PRODUCT_TYPES = {\n  ALL: 'ALL',\n  DIA_SPIA: 'DIA/SPIA',\n  FIA: 'FIA',\n  FIXED_RATE: 'Fixed Rate',\n  RILA: 'RILA',\n  VARIABLE_ANNUITIES: 'Variable Annuities'\n};\nconst annuityProductTypes = [ANNUITY_PRODUCT_TYPES.VARIABLE_ANNUITIES, ANNUITY_PRODUCT_TYPES.DIA_SPIA, ANNUITY_PRODUCT_TYPES.FIA, ANNUITY_PRODUCT_TYPES.FIXED_RATE, ANNUITY_PRODUCT_TYPES.RILA];\nexport const isAnnuityOnly = productTypes => productTypes.length > 0 && !structuredProductTypes.some(product => productTypes.includes(product));\nexport const isStructuredProductsOnly = productTypes => productTypes.length === 0 || !annuityProductTypes.some(product => productTypes.includes(product));\nexport const filterNavTabs = (navTabs, userPermissions, isProduction, pricingToolType, company) => {\n  const filteredNavTabs = filterLinks(navTabs, userPermissions, isProduction, pricingToolType, company);\n  filteredNavTabs.forEach(link => {\n    if (link.children) {\n      link.children = filterLinks(link.children, userPermissions, isProduction, pricingToolType, company);\n    }\n  });\n  return filteredNavTabs;\n}; // Added because some companies don't want access to LM but their common role has the permission\n// This is temporary and should not be used as a long term solution\n\nconst filterLmFromSomeCompanies = company => {\n  const COMPANIES_TO_BLOCK_LM_ACCESS = ['Highland Capital', 'Ash Brokerage'];\n  return company && COMPANIES_TO_BLOCK_LM_ACCESS.includes(company);\n};\n\nconst filterLinks = (links, userPermissions, isProduction, pricingToolType, company) => {\n  return links.filter(link => {\n    if (link.title === ROUTE_KEYS.COMPANY_ADMIN && isProduction) {\n      return false;\n    }\n\n    if (link.title === ROUTE_KEYS.CREATE && !pricingToolType) {\n      return false;\n    }\n\n    if (link.title === ROUTE_KEYS.LIFECYCLE && filterLmFromSomeCompanies(company)) {\n      return false;\n    }\n\n    if (link.title === 'Event Notifications' && !COMPANIES_WITH_EVENT_NOTIFICATION_ACCESS.includes(company != null ? company : '')) {\n      return false;\n    }\n\n    return userHasAccess(link.permissions, userPermissions);\n  });\n};\n\nexport const userHasAccess = (linkPermissions, userPermissions) => !linkPermissions || linkPermissions.some(linkPermission => userPermissions.some(userPermission => (linkPermission == null ? void 0 : linkPermission.toLowerCase()) === (userPermission == null ? void 0 : userPermission.toLowerCase())));","map":{"version":3,"names":["ENV","FrontEndLibraries","ROUTE_KEYS","ROUTES","WidgetPermissions","COMPANIES_WITH_EVENT_NOTIFICATION_ACCESS","getAngularLink","url","formattedUrl","window","origin","replace","match","teamSubdomain","isTabDropdown","tab","children","length","isProduction","includes","isStaging","isUAT","isQA","isDev","isHigherEnvironment","generateAppUrl","route","destinationLibrary","env","PROD","baseUrl","ANGULAR","createLinkToOtherApp","routeKey","determineNavRouteOrUrl","frontEndLibrary","userPermissions","HOME","userHasAccess","MenuCanViewLegacyDashboard","REACT","CREATE","LIFECYCLE","EVENT_NOTIFICATIONS","EVENT_NOTIFICATIONS_ADMIN","TRADE","getColdFusionBaseUrl","currentUrl","updatedUrl","startsWith","getColdFusionLink","page","section","getColdFusionLinkAppVersion","STRUCTURED_PRODUCTS_PRODUCT_TYPES","LINKED_CDS","STRUCTURED_NOTES","structuredProductTypes","ANNUITY_PRODUCT_TYPES","ALL","DIA_SPIA","FIA","FIXED_RATE","RILA","VARIABLE_ANNUITIES","annuityProductTypes","isAnnuityOnly","productTypes","some","product","isStructuredProductsOnly","filterNavTabs","navTabs","pricingToolType","company","filteredNavTabs","filterLinks","forEach","link","filterLmFromSomeCompanies","COMPANIES_TO_BLOCK_LM_ACCESS","links","filter","title","COMPANY_ADMIN","permissions","linkPermissions","linkPermission","userPermission","toLowerCase"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/design-system/src/lib/components/GlobalNav/utils/navTabUtils.ts"],"sourcesContent":["import {\n  BaseRouteType,\n  ENV,\n  FrontEndLibraries,\n  NavTabType,\n  NavTabTypeWithChildren,\n  ProductTypesType,\n  UserPermissionsType,\n} from '../GlobalNav.types';\nimport { ROUTE_KEYS, ROUTES } from './routes';\nimport { WidgetPermissions } from './widgetPermissions';\n\nconst COMPANIES_WITH_EVENT_NOTIFICATION_ACCESS = ['Bank of America', 'GWIM'];\n// TODO - keep in shared location\n// libs/common/src/lib/getLumaAppLogin.ts\nexport const getAngularLink = (url?: string): string => {\n  const formattedUrl = url ?? window.origin;\n  return formattedUrl.replace(\n    /go(?:-(an|ch|dn|lm|sp))?(?=\\.)/g,\n    (match, teamSubdomain) => (teamSubdomain != null ? teamSubdomain : 'app')\n  );\n};\n\nexport const isTabDropdown = (tab: NavTabType): tab is NavTabTypeWithChildren =>\n  !!tab?.children?.length;\n\n// currently unused, see the comment below in generateAppUrl\n// const ENV_SUBDOMAINS = {\n//   [ENV.PROD]: '',\n//   [ENV.STAGING]: 'staging',\n//   [ENV.UAT]: 'buat',\n//   [ENV.QA]: 'bdev',\n//   [ENV.DEV]: 'bdev',\n//   [ENV.LOCAL]: '',\n// };\n\nexport const isProduction = () =>\n  window.origin.includes('https://app.lumafintech.com') ||\n  window.origin.includes('https://go.lumafintech.com');\nexport const isStaging = () =>\n  window.origin.includes('https://go.staging.lumafintech.com') ||\n  window.origin.includes('https://app.staging.lumafintech.com');\nexport const isUAT = () =>\n  window.origin.includes('https://go.buat.lumafintech.com') ||\n  window.origin.includes('https://app.buat.lumafintech.com');\nexport const isQA = () =>\n  window.origin.includes('https://go.bqa.lumafintech.com') ||\n  window.origin.includes('https://app.bqa.lumafintech.com');\nexport const isDev = () =>\n  window.origin.includes('https://go.bdev.lumafintech.com') ||\n  window.origin.includes('https://app.bdev.lumafintech.com');\nexport const isHigherEnvironment = () =>\n  isProduction() || isStaging() || isUAT();\n\n// LIST OF ENVS FOR ANGULAR (luma-app):\n//\n// DEV:     https://app.bdev.lumafintech.com\n// QA:      https://app.bqa.lumafintech.com\n//\n// AN DEV:  https://an.bdev.lumafintech.com\n// AN QA:   https://an.bqa.lumafintech.com\n// CH DEV:  https://ch.bdev.lumafintech.com\n// CH QA:   https://ch.bqa.lumafintech.com\n// LM DEV:  https://lm.bdev.lumafintech.com\n// LM QA:   https://lm.bqa.lumafintech.com\n// PL DEV:  https://pl.bdev.lumafintech.com\n// PL QA:   https://pl.bqa.lumafintech.com\n// PM DEV:  https://pm.bdev.lumafintech.com\n// PM QA:   https://pm.bqa.lumafintech.com\n// PM QA:   https://pm.bqa.lumafintech.com\n//\n// UAT:     https://app.buat.lumafintech.com\n// Staging: https://app.staging.lumafintech.com\n// Prod:    https://app.lumafintech.com\n\n// LIST OF ENVS FOR REACT (luma-fe-workspace):\n//\n// DEV:     https://go.bdev.lumafintech.com\n// QA:      https://go.bqa.lumafintech.com\n// UAT:     https://go.buat.lumafintech.com\n// Staging: https://go.staging.lumafintech.com\n// Prod:    https://go.lumafintech.com\n\n// COLD FUSION ENVS\n// PROD:    portal.lumafintech.com\n// STAGING: stagingportal.lumafintech.com\n// UAT:     uatportal.lumafintech.com\n// QA:      qaportal.lumafintech.com\n// DEV:     ngportal.lumafintech.com\n\n/**\n * generateAppUrl: takes a route to append to the end of the generated base url\n * and a destination library that determines if the base url should be for the angular app or the react app deployment.\n *\n * This function derives the correct environment-specific url based on the current window.origin and the desired destination.\n */\nexport const generateAppUrl = (\n  route: string,\n  destinationLibrary: FrontEndLibraries,\n  env: ENV = ENV.PROD\n) => {\n  // The following is a method in which we have an env flag that tells us which deployment env we're in.\n  // This does not as yet exist, so we are using the second method\n  //\n  // let baseUrl = `https://${LIBRARY_SUBDOMAINS[destinationLibrary]}.${ENV_SUBDOMAINS[env]}.lumafintech.com`;\n  // if (env === ENV.LOCAL) baseUrl = 'http://locahost:4200';\n\n  let baseUrl = window.origin;\n  if (destinationLibrary === FrontEndLibraries.ANGULAR) {\n    if (isHigherEnvironment()) {\n      baseUrl = baseUrl.replace('go.', 'app.');\n    } else {\n      baseUrl = getAngularLink(baseUrl);\n    }\n  }\n  return `${baseUrl}${route}`;\n};\nconst createLinkToOtherApp = (\n  destinationLibrary: FrontEndLibraries,\n  routeKey: ROUTE_KEYS\n) => {\n  const route = ROUTES[routeKey][destinationLibrary];\n\n  return { url: generateAppUrl(route, destinationLibrary) };\n};\n\nexport const determineNavRouteOrUrl = (\n  frontEndLibrary: FrontEndLibraries,\n  routeKey: ROUTE_KEYS,\n  userPermissions: UserPermissionsType\n): Partial<NavTabType> => {\n  const route = ROUTES[routeKey][frontEndLibrary];\n  // FOR HOME (dashboard)\n  // If the user has access to the new dashboard or is already in the React app, route to the React app's dashboard\n  if (routeKey === ROUTE_KEYS.HOME) {\n    if (\n      frontEndLibrary === FrontEndLibraries.ANGULAR &&\n      !userHasAccess(\n        [WidgetPermissions.MenuCanViewLegacyDashboard],\n        userPermissions\n      )\n    ) {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    } else {\n      return { route };\n    }\n  }\n\n  // FOR CREATION HUB\n  // For the time being if we are not in higher envs, route to the new creation hub products in React\n  // In higher envs continue to utilize the existing products in Angular\n  // Once the products are deployed in production\n  // we can remove the env checks and simply route to the React deployments in all cases\n  if (\n    routeKey === ROUTE_KEYS.CREATE &&\n    !isProduction() &&\n    !isUAT() &&\n    !isStaging()\n  ) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return { route };\n    else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  }\n\n  // FOR LIFECYCLE\n  // Allow routing to both the existing Angular 'Lifecycle Manager' as well as the React 'Lifecycle Manager 2.0 Beta'\n  // Each has its own associated permission for the respective dropdown link to be visible\n  if (routeKey === ROUTE_KEYS.LIFECYCLE) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return { route };\n    else {\n      return createLinkToOtherApp(FrontEndLibraries.ANGULAR, routeKey);\n    }\n  }\n\n  // FOR EVENT CONFIRMATIONS\n  if (routeKey === ROUTE_KEYS.EVENT_NOTIFICATIONS) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return { route };\n    else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  }\n\n  // FOR EVENT CONFIRMATIONS ADMIN\n  if (routeKey === ROUTE_KEYS.EVENT_NOTIFICATIONS_ADMIN) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return { route };\n    else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  }\n\n  // FOR SECONDARIES\n  if (routeKey === ROUTE_KEYS.TRADE) {\n    if (frontEndLibrary === FrontEndLibraries.REACT) return { route };\n    else {\n      return createLinkToOtherApp(FrontEndLibraries.REACT, routeKey);\n    }\n  }\n\n  // ALL REMAINING CASES\n  if (frontEndLibrary === FrontEndLibraries.REACT) {\n    return createLinkToOtherApp(FrontEndLibraries.ANGULAR, routeKey);\n  } else {\n    return { route };\n  }\n};\n\n/**\n * getColdFusionBaseUrl: function that should be called with no arguments\n * that derives the correct environment-specific Cold Fusion base url based on the current window.origin.\n *\n * e.g.\n * https://app.bdev.lumafintech.com => https://ngportal.lumafintech.com\n * https://app.staging.lumafintech.com => https://stagingportal.lumafintech.com\n *\n * Optional argument 'origin' for testing how this function will work to convert various base urls\n * with an input rather than pulling directly from window.origin in the browser.\n */\nexport const getColdFusionBaseUrl = (origin?: string) => {\n  const currentUrl = origin || window.origin;\n\n  // TODO - Does this need changed?\n  const updatedUrl = currentUrl\n    .replace('http://', 'https://')\n    .replace('localhost:4200', 'app.bdev.lumafintech.com')\n    .replace('//app.', '//')\n    .replace('//go.', '//')\n    .replace('//an.', '//')\n    .replace('//ch.', '//')\n    .replace('//lm.', '//')\n    .replace('//pl.', '//')\n    .replace('//pm.', '//')\n    .replace('bdev.', 'ng')\n    .replace('bqa.', 'qa')\n    .replace('buat.', 'uat')\n    .replace('staging.', 'staging')\n    .replace('lumafintech.com', 'portal.lumafintech.com');\n  // CF links are different for staging and production\n  if (\n    updatedUrl.startsWith('https://portal.lumafintech.com') ||\n    updatedUrl.startsWith('https://stagingportal.lumafintech.com')\n  ) {\n    return updatedUrl.replace('lumafintech', 'naviancapital');\n  } else return updatedUrl;\n};\n\n// NOTE: AD-HOC TESTS FOR THE ABOVE METHOD, uncomment to use in console\n// TODO - turn these into specs\n// EXPECT THE FOLLOWING TO OUTPUT https://ngportal.lumafintech.com\n// console.log('getColdFusionBaseUrl(\"http://localhost:4200\")', getColdFusionBaseUrl('http://localhost:4200'), '\\n');\n// console.log('getColdFusionBaseUrl(\"https://app.staging.lumafintech.com\")', getColdFusionBaseUrl('https://stagingportal.lumafintech.com'), '\\n');\n\nexport const getColdFusionLink = (page: string, section: string | null) => {\n  return `${getColdFusionBaseUrl()}/cdfg/WebPages/${page}.cfm?${\n    section ? `section=${section}&` : ''\n  }`;\n};\n\nexport const getColdFusionLinkAppVersion = (\n  page: string,\n  section: string | null\n) => {\n  return `${getColdFusionBaseUrl()}/cdfg/app/${page}.cfm?${\n    section ? `section=${section}&` : ''\n  }`;\n};\n\nconst STRUCTURED_PRODUCTS_PRODUCT_TYPES = {\n  LINKED_CDS: \"Market Linked CD's\",\n  STRUCTURED_NOTES: 'Structured Notes',\n};\nconst structuredProductTypes = [\n  STRUCTURED_PRODUCTS_PRODUCT_TYPES.LINKED_CDS,\n  STRUCTURED_PRODUCTS_PRODUCT_TYPES.STRUCTURED_NOTES,\n];\nconst ANNUITY_PRODUCT_TYPES = {\n  ALL: 'ALL',\n  DIA_SPIA: 'DIA/SPIA',\n  FIA: 'FIA',\n  FIXED_RATE: 'Fixed Rate',\n  RILA: 'RILA',\n  VARIABLE_ANNUITIES: 'Variable Annuities',\n};\nconst annuityProductTypes = [\n  ANNUITY_PRODUCT_TYPES.VARIABLE_ANNUITIES,\n  ANNUITY_PRODUCT_TYPES.DIA_SPIA,\n  ANNUITY_PRODUCT_TYPES.FIA,\n  ANNUITY_PRODUCT_TYPES.FIXED_RATE,\n  ANNUITY_PRODUCT_TYPES.RILA,\n];\nexport const isAnnuityOnly = (productTypes: ProductTypesType) =>\n  productTypes.length > 0 &&\n  !structuredProductTypes.some((product) => productTypes.includes(product));\n\nexport const isStructuredProductsOnly = (productTypes: ProductTypesType) =>\n  productTypes.length === 0 ||\n  !annuityProductTypes.some((product) => productTypes.includes(product));\n\nexport const filterNavTabs = (\n  navTabs: NavTabType[],\n  userPermissions: UserPermissionsType,\n  isProduction: boolean,\n  pricingToolType: string | undefined,\n  company?: string | null | undefined\n): NavTabType[] => {\n  const filteredNavTabs = filterLinks(\n    navTabs,\n    userPermissions,\n    isProduction,\n    pricingToolType,\n    company\n  );\n\n  filteredNavTabs.forEach((link) => {\n    if (link.children) {\n      link.children = filterLinks(\n        link.children,\n        userPermissions,\n        isProduction,\n        pricingToolType,\n        company\n      );\n    }\n  });\n\n  return filteredNavTabs;\n};\n\n// Added because some companies don't want access to LM but their common role has the permission\n// This is temporary and should not be used as a long term solution\nconst filterLmFromSomeCompanies = (company: string | null | undefined) => {\n  const COMPANIES_TO_BLOCK_LM_ACCESS = ['Highland Capital', 'Ash Brokerage'];\n  return company && COMPANIES_TO_BLOCK_LM_ACCESS.includes(company);\n};\n\nconst filterLinks = <T extends BaseRouteType>(\n  links: T[],\n  userPermissions: UserPermissionsType,\n  isProduction: boolean,\n  pricingToolType: string | undefined,\n  company?: string | null | undefined\n): T[] => {\n  return links.filter((link) => {\n    if (link.title === ROUTE_KEYS.COMPANY_ADMIN && isProduction) {\n      return false;\n    }\n\n    if (link.title === ROUTE_KEYS.CREATE && !pricingToolType) {\n      return false;\n    }\n\n    if (\n      link.title === ROUTE_KEYS.LIFECYCLE &&\n      filterLmFromSomeCompanies(company)\n    ) {\n      return false;\n    }\n\n    if (\n      link.title === 'Event Notifications' &&\n      !COMPANIES_WITH_EVENT_NOTIFICATION_ACCESS.includes(company ?? '')\n    ) {\n      return false;\n    }\n\n    return userHasAccess(link.permissions, userPermissions);\n  });\n};\n\nexport const userHasAccess = (\n  linkPermissions: string[] | undefined,\n  userPermissions: string[]\n) =>\n  !linkPermissions ||\n  linkPermissions.some((linkPermission) =>\n    userPermissions.some(\n      (userPermission) =>\n        linkPermission?.toLowerCase() === userPermission?.toLowerCase()\n    )\n  );\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}