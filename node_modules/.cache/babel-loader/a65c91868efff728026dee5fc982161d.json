{"ast":null,"code":"import \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.sort.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport { DateFormatter, DateHelper } from '@luma-fe-workspace/utility';\nimport { LumaColor } from '@luma-fe-workspace/design-system';\nexport const mostRecentAnnuitiesData = annuitiesData => {\n  const data = [...annuitiesData];\n  const annuitiesDataSorted = data.sort((cusipA, cusipB) => {\n    var _cusipA$eventRows, _cusipA$eventRows$, _cusipB$eventRows, _cusipB$eventRows$;\n\n    let dateA;\n    let dateB;\n\n    if ((_cusipA$eventRows = cusipA.eventRows) != null && (_cusipA$eventRows$ = _cusipA$eventRows[0]) != null && _cusipA$eventRows$.transactionDate) {\n      dateA = new Date(cusipA.eventRows[0].transactionDate);\n    } else {\n      return 1;\n    }\n\n    if ((_cusipB$eventRows = cusipB.eventRows) != null && (_cusipB$eventRows$ = _cusipB$eventRows[0]) != null && _cusipB$eventRows$.transactionDate) {\n      dateB = new Date(cusipB.eventRows[0].transactionDate);\n    } else {\n      return -1;\n    }\n\n    return DateHelper.isDateBefore(dateA, dateB) ? 1 : -1;\n  });\n  return annuitiesDataSorted == null ? void 0 : annuitiesDataSorted.slice(0, 5);\n};\nexport const annuityStatusCalc = rowData => {\n  var _rowData$eventRows;\n\n  let mostRecentDate = new Date(0);\n  let mostRecentStatus = '';\n  let status = {\n    color: LumaColor.NEUTRAL_40,\n    date: DateFormatter.formatLocalDate(mostRecentDate),\n    status: mostRecentStatus,\n    linkText: 'View'\n  };\n  (_rowData$eventRows = rowData.eventRows) == null ? void 0 : _rowData$eventRows.map(event => {\n    const date = new Date(event.transactionDate);\n\n    if (mostRecentDate.getTime() == 0 || mostRecentDate.getTime() < date.getTime()) {\n      mostRecentDate = date;\n      mostRecentStatus = event.status;\n    }\n  });\n  mostRecentDate = new Date(mostRecentDate.getTime() + Math.abs(mostRecentDate.getTimezoneOffset() * 60000));\n  const yellowStatus = ['ActiveApplication', 'PendingSignatures', 'DataEntry', 'ClientRequestPending', 'ClientRequestComplete', 'Signature', 'SignaturePending', 'SignatureInProgress', 'SignatureAgentPending', 'SignatureAgentInProcess', 'SignatureRejected', 'eDeliveryClientDirectedSignatureRejected', 'SignatureFinished', 'ManualReview', 'ManualReviewPending', 'ManualReviewInProgress', 'ManualReviewMoreInfo', 'PendingAgentReview', 'ReviewQueueMoreInfo'];\n  const redStatus = ['ManualReviewRejected', 'Terminated', 'Canceled', 'Expired', 'CanceledByCarrier', 'ReviewQueueRejected'];\n  const greenStatus = ['Approved', 'ManualReviewFinished', 'ManualReviewApproved', 'ReviewQueueApproved', 'Complete'];\n\n  if (yellowStatus.includes(mostRecentStatus)) {\n    status = {\n      color: LumaColor.WARNING_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View'\n    };\n  } else if (redStatus.includes(mostRecentStatus)) {\n    status = {\n      color: LumaColor.NEGATIVE_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View'\n    };\n  } else if (greenStatus.includes(mostRecentStatus)) {\n    status = {\n      color: LumaColor.POSITIVE_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View'\n    };\n  } else {\n    status = {\n      color: LumaColor.NEUTRAL_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View'\n    };\n  }\n\n  return status;\n};","map":{"version":3,"names":["DateFormatter","DateHelper","LumaColor","mostRecentAnnuitiesData","annuitiesData","data","annuitiesDataSorted","sort","cusipA","cusipB","dateA","dateB","eventRows","transactionDate","Date","isDateBefore","slice","annuityStatusCalc","rowData","mostRecentDate","mostRecentStatus","status","color","NEUTRAL_40","date","formatLocalDate","linkText","map","event","getTime","Math","abs","getTimezoneOffset","yellowStatus","redStatus","greenStatus","includes","WARNING_40","NEGATIVE_40","POSITIVE_40"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/dashboard/src/utils/AnnuityApplicationUtils.ts"],"sourcesContent":["import { OrderHistoryResponse } from '@luma-fe-workspace/redux';\nimport { DateFormatter, DateHelper } from '@luma-fe-workspace/utility';\nimport { LumaColor } from '@luma-fe-workspace/design-system';\n\nexport type StatusData = {\n  color: string;\n  date: string;\n  status: string;\n  linkText: string;\n};\n\nexport const mostRecentAnnuitiesData = (\n  annuitiesData: OrderHistoryResponse[]\n) => {\n  const data = [...annuitiesData];\n\n  const annuitiesDataSorted = data.sort(\n    (cusipA: OrderHistoryResponse, cusipB: OrderHistoryResponse) => {\n      let dateA: Date;\n      let dateB: Date;\n\n      if (cusipA.eventRows?.[0]?.transactionDate) {\n        dateA = new Date(cusipA.eventRows[0].transactionDate);\n      } else {\n        return 1;\n      }\n\n      if (cusipB.eventRows?.[0]?.transactionDate) {\n        dateB = new Date(cusipB.eventRows[0].transactionDate);\n      } else {\n        return -1;\n      }\n\n      return DateHelper.isDateBefore(dateA, dateB) ? 1 : -1;\n    }\n  );\n\n  return annuitiesDataSorted?.slice(0, 5);\n};\n\nexport const annuityStatusCalc = (rowData: OrderHistoryResponse) => {\n  let mostRecentDate = new Date(0);\n  let mostRecentStatus = '';\n  let status: StatusData = {\n    color: LumaColor.NEUTRAL_40,\n    date: DateFormatter.formatLocalDate(mostRecentDate),\n    status: mostRecentStatus,\n    linkText: 'View',\n  };\n\n  rowData.eventRows?.map((event: any) => {\n    const date = new Date(event.transactionDate);\n\n    if (\n      mostRecentDate.getTime() == 0 ||\n      mostRecentDate.getTime() < date.getTime()\n    ) {\n      mostRecentDate = date;\n      mostRecentStatus = event.status;\n    }\n  });\n\n  mostRecentDate = new Date(\n    mostRecentDate.getTime() +\n      Math.abs(mostRecentDate.getTimezoneOffset() * 60000)\n  );\n\n  const yellowStatus = [\n    'ActiveApplication',\n    'PendingSignatures',\n    'DataEntry',\n    'ClientRequestPending',\n    'ClientRequestComplete',\n    'Signature',\n    'SignaturePending',\n    'SignatureInProgress',\n    'SignatureAgentPending',\n    'SignatureAgentInProcess',\n    'SignatureRejected',\n    'eDeliveryClientDirectedSignatureRejected',\n    'SignatureFinished',\n    'ManualReview',\n    'ManualReviewPending',\n    'ManualReviewInProgress',\n    'ManualReviewMoreInfo',\n    'PendingAgentReview',\n    'ReviewQueueMoreInfo',\n  ];\n\n  const redStatus = [\n    'ManualReviewRejected',\n    'Terminated',\n    'Canceled',\n    'Expired',\n    'CanceledByCarrier',\n    'ReviewQueueRejected',\n  ];\n\n  const greenStatus = [\n    'Approved',\n    'ManualReviewFinished',\n    'ManualReviewApproved',\n    'ReviewQueueApproved',\n    'Complete',\n  ];\n\n  if (yellowStatus.includes(mostRecentStatus)) {\n    status = {\n      color: LumaColor.WARNING_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View',\n    };\n  } else if (redStatus.includes(mostRecentStatus)) {\n    status = {\n      color: LumaColor.NEGATIVE_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View',\n    };\n  } else if (greenStatus.includes(mostRecentStatus)) {\n    status = {\n      color: LumaColor.POSITIVE_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View',\n    };\n  } else {\n    status = {\n      color: LumaColor.NEUTRAL_40,\n      date: DateFormatter.formatLocalDate(mostRecentDate),\n      status: mostRecentStatus,\n      linkText: 'View',\n    };\n  }\n\n  return status;\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}