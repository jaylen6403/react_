{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/lifecyclemanager/src/components/FilterBar/FilterBar.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.parse-int.js\";\nimport { LumaIcon } from '@luma-fe-workspace/design-system';\nimport { lifecycleSlice, selectLifecycle, useAppDispatch, useAppSelector } from '@luma-fe-workspace/redux';\nimport { useState } from 'react';\nimport { LifecycleExportButton } from '../LifecycleExportButton/LifecycleExportButton';\nimport { Pill } from '../Pill/Pill';\nimport { ActionBar, BottomRow, ClearButton, ClearContainer, CloseIcon, CollapseIcon, DateDropDown, FilterButton, LeftActions, PillRow, RightActions, TopRow } from './FilterBar.styles';\nimport { dates } from './types';\nimport { DateHelper } from '@luma-fe-workspace/utility';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const FilterBar = ({\n  setIsFilterVisible,\n  currentGridApi\n}) => {\n  _s();\n\n  const [filterPillsVisible, setFilterPillsVisible] = useState(false);\n  const dispatch = useAppDispatch();\n  const dateRange = useAppSelector(selectLifecycle).dateRange;\n  const selectedFilters = useAppSelector(selectLifecycle).selectedEventFilters;\n\n  const setDateValue = dateValue => {\n    if (!(dateValue != null && dateValue.value) || typeof (dateValue == null ? void 0 : dateValue.value) !== 'string') return;\n    const dateKey = dateValue.value;\n    const denominator = dateKey.slice(-1);\n    const amount = parseInt(dateKey.slice(0, -1));\n    const startDate = new Date();\n    let endDate;\n\n    if (denominator === 'M') {\n      endDate = DateHelper.endOfMonth(DateHelper.addMonths(startDate, amount));\n    } else if (denominator === 'W') {\n      endDate = DateHelper.addWeeks(startDate, amount);\n    } else {\n      endDate = DateHelper.addDays(startDate, 1);\n    }\n\n    const dateObject = {\n      startDate: new Date(startDate.setHours(0, 0, 0, 0)).toISOString(),\n      endDate: new Date(endDate.setHours(23, 59, 0, 0)).toISOString(),\n      rangeAbbreviation: dateKey\n    };\n    dispatch(lifecycleSlice.actions.setDateRange(dateObject));\n  };\n\n  const removeAllFilters = () => {\n    const newFilters = {\n      portfolioAttributes: {},\n      productAttributes: {}\n    };\n    dispatch(lifecycleSlice.actions.setSelectedFilters(newFilters));\n    setFilterPillsVisible(false);\n  };\n\n  return /*#__PURE__*/_jsxDEV(ActionBar, {\n    children: [/*#__PURE__*/_jsxDEV(TopRow, {\n      children: [/*#__PURE__*/_jsxDEV(LeftActions, {\n        children: [/*#__PURE__*/_jsxDEV(DateDropDown, {\n          items: dates,\n          dropDownIcon: 'calendar',\n          dropDownIconType: 'regular',\n          defaultSelectedItem: dates.find(date => date.value === dateRange.rangeAbbreviation),\n          readOnly: true,\n          size: \"small\",\n          name: 'Date Range Selection',\n          id: 'Date Range Selection',\n          onChange: e => setDateValue(e)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 83,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(FilterButton, {\n          onClick: () => setIsFilterVisible(true),\n          variant: \"tertiary\",\n          size: \"small\",\n          icon: {\n            iconComponent: /*#__PURE__*/_jsxDEV(LumaIcon, {\n              iconCode: \"filter\",\n              type: \"regular\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 101,\n              columnNumber: 30\n            }, this)\n          },\n          children: \"Filters\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 96,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RightActions, {\n        children: [/*#__PURE__*/_jsxDEV(LifecycleExportButton, {\n          gridApi: currentGridApi,\n          tableName: 'Events Data'\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 108,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(CollapseIcon, {\n          onClick: () => setFilterPillsVisible(!filterPillsVisible),\n          iconCode: \"chevron-up\",\n          type: \"solid\",\n          isCollapsed: !filterPillsVisible\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 112,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 107,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(BottomRow, {\n      isCollapsed: !filterPillsVisible,\n      children: [/*#__PURE__*/_jsxDEV(PillRow, {\n        children: Object.keys(selectedFilters).map(filterSection => {\n          return Object.keys(selectedFilters[`${filterSection}`]).map(filterCategory => {\n            return selectedFilters[`${filterSection}`][`${filterCategory}`].map(filterOption => {\n              return /*#__PURE__*/_jsxDEV(Pill, {\n                sectionTitle: filterSection,\n                categoryTitle: filterCategory,\n                title: filterOption\n              }, `${filterOption}`, false, {\n                fileName: _jsxFileName,\n                lineNumber: 129,\n                columnNumber: 21\n              }, this);\n            });\n          });\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 121,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(ClearContainer, {\n        children: /*#__PURE__*/_jsxDEV(ClearButton, {\n          onClick: removeAllFilters,\n          children: [/*#__PURE__*/_jsxDEV(CloseIcon, {\n            iconCode: 'close',\n            type: \"solid\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 143,\n            columnNumber: 13\n          }, this), \"Clear All\"]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 142,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 141,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 120,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 5\n  }, this);\n};\n\n_s(FilterBar, \"nYz/lFMky74bNEg1k1fRWQ4VesI=\", false, function () {\n  return [useAppDispatch, useAppSelector, useAppSelector];\n});\n\n_c = FilterBar;\n\nvar _c;\n\n$RefreshReg$(_c, \"FilterBar\");","map":{"version":3,"names":["LumaIcon","lifecycleSlice","selectLifecycle","useAppDispatch","useAppSelector","useState","LifecycleExportButton","Pill","ActionBar","BottomRow","ClearButton","ClearContainer","CloseIcon","CollapseIcon","DateDropDown","FilterButton","LeftActions","PillRow","RightActions","TopRow","dates","DateHelper","FilterBar","setIsFilterVisible","currentGridApi","filterPillsVisible","setFilterPillsVisible","dispatch","dateRange","selectedFilters","selectedEventFilters","setDateValue","dateValue","value","dateKey","denominator","slice","amount","parseInt","startDate","Date","endDate","endOfMonth","addMonths","addWeeks","addDays","dateObject","setHours","toISOString","rangeAbbreviation","actions","setDateRange","removeAllFilters","newFilters","portfolioAttributes","productAttributes","setSelectedFilters","find","date","e","iconComponent","Object","keys","map","filterSection","filterCategory","filterOption"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/lifecyclemanager/src/components/FilterBar/FilterBar.tsx"],"sourcesContent":["import { DataItemProps, LumaIcon } from '@luma-fe-workspace/design-system';\nimport {\n  DateObject,\n  EventFilters,\n  lifecycleSlice,\n  selectLifecycle,\n  useAppDispatch,\n  useAppSelector,\n} from '@luma-fe-workspace/redux';\nimport { GridApi } from 'ag-grid-community';\nimport { useState } from 'react';\nimport { LifecycleExportButton } from '../LifecycleExportButton/LifecycleExportButton';\nimport { Pill } from '../Pill/Pill';\n\nimport {\n  ActionBar,\n  BottomRow,\n  ClearButton,\n  ClearContainer,\n  CloseIcon,\n  CollapseIcon,\n  DateDropDown,\n  FilterButton,\n  LeftActions,\n  PillRow,\n  RightActions,\n  TopRow,\n} from './FilterBar.styles';\nimport { dates } from './types';\nimport { DateHelper } from '@luma-fe-workspace/utility';\n\ninterface FilterBarProps {\n  setIsFilterVisible: (isVisible: boolean) => void;\n  currentGridApi?: GridApi;\n}\n\nexport const FilterBar = ({\n  setIsFilterVisible,\n  currentGridApi,\n}: FilterBarProps) => {\n  const [filterPillsVisible, setFilterPillsVisible] = useState<boolean>(false);\n  const dispatch = useAppDispatch();\n  const dateRange = useAppSelector(selectLifecycle).dateRange;\n  const selectedFilters = useAppSelector(selectLifecycle).selectedEventFilters;\n\n  const setDateValue = (dateValue: DataItemProps | null) => {\n    if (!dateValue?.value || typeof dateValue?.value !== 'string') return;\n    const dateKey = dateValue.value;\n    const denominator = dateKey.slice(-1);\n    const amount = parseInt(dateKey.slice(0, -1));\n    const startDate = new Date();\n    let endDate: Date;\n    if (denominator === 'M') {\n      endDate = DateHelper.endOfMonth(DateHelper.addMonths(startDate, amount));\n    } else if (denominator === 'W') {\n      endDate = DateHelper.addWeeks(startDate, amount);\n    } else {\n      endDate = DateHelper.addDays(startDate, 1);\n    }\n\n    const dateObject: DateObject = {\n      startDate: new Date(startDate.setHours(0, 0, 0, 0)).toISOString(),\n      endDate: new Date(endDate.setHours(23, 59, 0, 0)).toISOString(),\n      rangeAbbreviation: dateKey,\n    };\n\n    dispatch(lifecycleSlice.actions.setDateRange(dateObject));\n  };\n\n  const removeAllFilters = () => {\n    const newFilters: EventFilters = {\n      portfolioAttributes: {},\n      productAttributes: {},\n    };\n    dispatch(lifecycleSlice.actions.setSelectedFilters(newFilters));\n    setFilterPillsVisible(false);\n  };\n\n  return (\n    <ActionBar>\n      <TopRow>\n        <LeftActions>\n          <DateDropDown\n            items={dates}\n            dropDownIcon={'calendar'}\n            dropDownIconType={'regular'}\n            defaultSelectedItem={dates.find(\n              (date) => date.value === dateRange.rangeAbbreviation\n            )}\n            readOnly\n            size=\"small\"\n            name={'Date Range Selection'}\n            id={'Date Range Selection'}\n            onChange={(e) => setDateValue(e)}\n          />\n          <FilterButton\n            onClick={() => setIsFilterVisible(true)}\n            variant=\"tertiary\"\n            size=\"small\"\n            icon={{\n              iconComponent: <LumaIcon iconCode=\"filter\" type=\"regular\" />,\n            }}\n          >\n            Filters\n          </FilterButton>\n        </LeftActions>\n        <RightActions>\n          <LifecycleExportButton\n            gridApi={currentGridApi}\n            tableName={'Events Data'}\n          />\n          <CollapseIcon\n            onClick={() => setFilterPillsVisible(!filterPillsVisible)}\n            iconCode=\"chevron-up\"\n            type=\"solid\"\n            isCollapsed={!filterPillsVisible}\n          />\n        </RightActions>\n      </TopRow>\n      <BottomRow isCollapsed={!filterPillsVisible}>\n        <PillRow>\n          {Object.keys(selectedFilters).map((filterSection) => {\n            return Object.keys(selectedFilters[`${filterSection}`]).map(\n              (filterCategory) => {\n                return selectedFilters[`${filterSection}`][\n                  `${filterCategory}`\n                ].map((filterOption) => {\n                  return (\n                    <Pill\n                      key={`${filterOption}`}\n                      sectionTitle={filterSection}\n                      categoryTitle={filterCategory}\n                      title={filterOption}\n                    />\n                  );\n                });\n              }\n            );\n          })}\n        </PillRow>\n        <ClearContainer>\n          <ClearButton onClick={removeAllFilters}>\n            <CloseIcon iconCode={'close'} type=\"solid\" />\n            Clear All\n          </ClearButton>\n        </ClearContainer>\n      </BottomRow>\n    </ActionBar>\n  );\n};\n"],"mappings":";;;;;;AAAA,SAAwBA,QAAxB,QAAwC,kCAAxC;AACA,SAGEC,cAHF,EAIEC,eAJF,EAKEC,cALF,EAMEC,cANF,QAOO,0BAPP;AASA,SAASC,QAAT,QAAyB,OAAzB;AACA,SAASC,qBAAT,QAAsC,gDAAtC;AACA,SAASC,IAAT,QAAqB,cAArB;AAEA,SACEC,SADF,EAEEC,SAFF,EAGEC,WAHF,EAIEC,cAJF,EAKEC,SALF,EAMEC,YANF,EAOEC,YAPF,EAQEC,YARF,EASEC,WATF,EAUEC,OAVF,EAWEC,YAXF,EAYEC,MAZF,QAaO,oBAbP;AAcA,SAASC,KAAT,QAAsB,SAAtB;AACA,SAASC,UAAT,QAA2B,4BAA3B;;AAOA,OAAO,MAAMC,SAAS,GAAG,CAAC;EACxBC,kBADwB;EAExBC;AAFwB,CAAD,KAGH;EAAA;;EACpB,MAAM,CAACC,kBAAD,EAAqBC,qBAArB,IAA8CrB,QAAQ,CAAU,KAAV,CAA5D;EACA,MAAMsB,QAAQ,GAAGxB,cAAc,EAA/B;EACA,MAAMyB,SAAS,GAAGxB,cAAc,CAACF,eAAD,CAAd,CAAgC0B,SAAlD;EACA,MAAMC,eAAe,GAAGzB,cAAc,CAACF,eAAD,CAAd,CAAgC4B,oBAAxD;;EAEA,MAAMC,YAAY,GAAIC,SAAD,IAAqC;IACxD,IAAI,EAACA,SAAD,YAACA,SAAS,CAAEC,KAAZ,KAAqB,QAAOD,SAAP,oBAAOA,SAAS,CAAEC,KAAlB,MAA4B,QAArD,EAA+D;IAC/D,MAAMC,OAAO,GAAGF,SAAS,CAACC,KAA1B;IACA,MAAME,WAAW,GAAGD,OAAO,CAACE,KAAR,CAAc,CAAC,CAAf,CAApB;IACA,MAAMC,MAAM,GAAGC,QAAQ,CAACJ,OAAO,CAACE,KAAR,CAAc,CAAd,EAAiB,CAAC,CAAlB,CAAD,CAAvB;IACA,MAAMG,SAAS,GAAG,IAAIC,IAAJ,EAAlB;IACA,IAAIC,OAAJ;;IACA,IAAIN,WAAW,KAAK,GAApB,EAAyB;MACvBM,OAAO,GAAGpB,UAAU,CAACqB,UAAX,CAAsBrB,UAAU,CAACsB,SAAX,CAAqBJ,SAArB,EAAgCF,MAAhC,CAAtB,CAAV;IACD,CAFD,MAEO,IAAIF,WAAW,KAAK,GAApB,EAAyB;MAC9BM,OAAO,GAAGpB,UAAU,CAACuB,QAAX,CAAoBL,SAApB,EAA+BF,MAA/B,CAAV;IACD,CAFM,MAEA;MACLI,OAAO,GAAGpB,UAAU,CAACwB,OAAX,CAAmBN,SAAnB,EAA8B,CAA9B,CAAV;IACD;;IAED,MAAMO,UAAsB,GAAG;MAC7BP,SAAS,EAAE,IAAIC,IAAJ,CAASD,SAAS,CAACQ,QAAV,CAAmB,CAAnB,EAAsB,CAAtB,EAAyB,CAAzB,EAA4B,CAA5B,CAAT,EAAyCC,WAAzC,EADkB;MAE7BP,OAAO,EAAE,IAAID,IAAJ,CAASC,OAAO,CAACM,QAAR,CAAiB,EAAjB,EAAqB,EAArB,EAAyB,CAAzB,EAA4B,CAA5B,CAAT,EAAyCC,WAAzC,EAFoB;MAG7BC,iBAAiB,EAAEf;IAHU,CAA/B;IAMAP,QAAQ,CAAC1B,cAAc,CAACiD,OAAf,CAAuBC,YAAvB,CAAoCL,UAApC,CAAD,CAAR;EACD,CAtBD;;EAwBA,MAAMM,gBAAgB,GAAG,MAAM;IAC7B,MAAMC,UAAwB,GAAG;MAC/BC,mBAAmB,EAAE,EADU;MAE/BC,iBAAiB,EAAE;IAFY,CAAjC;IAIA5B,QAAQ,CAAC1B,cAAc,CAACiD,OAAf,CAAuBM,kBAAvB,CAA0CH,UAA1C,CAAD,CAAR;IACA3B,qBAAqB,CAAC,KAAD,CAArB;EACD,CAPD;;EASA,oBACE,QAAC,SAAD;IAAA,wBACE,QAAC,MAAD;MAAA,wBACE,QAAC,WAAD;QAAA,wBACE,QAAC,YAAD;UACE,KAAK,EAAEN,KADT;UAEE,YAAY,EAAE,UAFhB;UAGE,gBAAgB,EAAE,SAHpB;UAIE,mBAAmB,EAAEA,KAAK,CAACqC,IAAN,CAClBC,IAAD,IAAUA,IAAI,CAACzB,KAAL,KAAeL,SAAS,CAACqB,iBADhB,CAJvB;UAOE,QAAQ,MAPV;UAQE,IAAI,EAAC,OARP;UASE,IAAI,EAAE,sBATR;UAUE,EAAE,EAAE,sBAVN;UAWE,QAAQ,EAAGU,CAAD,IAAO5B,YAAY,CAAC4B,CAAD;QAX/B;UAAA;UAAA;UAAA;QAAA,QADF,eAcE,QAAC,YAAD;UACE,OAAO,EAAE,MAAMpC,kBAAkB,CAAC,IAAD,CADnC;UAEE,OAAO,EAAC,UAFV;UAGE,IAAI,EAAC,OAHP;UAIE,IAAI,EAAE;YACJqC,aAAa,eAAE,QAAC,QAAD;cAAU,QAAQ,EAAC,QAAnB;cAA4B,IAAI,EAAC;YAAjC;cAAA;cAAA;cAAA;YAAA;UADX,CAJR;UAAA;QAAA;UAAA;UAAA;UAAA;QAAA,QAdF;MAAA;QAAA;QAAA;QAAA;MAAA,QADF,eA0BE,QAAC,YAAD;QAAA,wBACE,QAAC,qBAAD;UACE,OAAO,EAAEpC,cADX;UAEE,SAAS,EAAE;QAFb;UAAA;UAAA;UAAA;QAAA,QADF,eAKE,QAAC,YAAD;UACE,OAAO,EAAE,MAAME,qBAAqB,CAAC,CAACD,kBAAF,CADtC;UAEE,QAAQ,EAAC,YAFX;UAGE,IAAI,EAAC,OAHP;UAIE,WAAW,EAAE,CAACA;QAJhB;UAAA;UAAA;UAAA;QAAA,QALF;MAAA;QAAA;QAAA;QAAA;MAAA,QA1BF;IAAA;MAAA;MAAA;MAAA;IAAA,QADF,eAwCE,QAAC,SAAD;MAAW,WAAW,EAAE,CAACA,kBAAzB;MAAA,wBACE,QAAC,OAAD;QAAA,UACGoC,MAAM,CAACC,IAAP,CAAYjC,eAAZ,EAA6BkC,GAA7B,CAAkCC,aAAD,IAAmB;UACnD,OAAOH,MAAM,CAACC,IAAP,CAAYjC,eAAe,CAAE,GAAEmC,aAAc,EAAlB,CAA3B,EAAiDD,GAAjD,CACJE,cAAD,IAAoB;YAClB,OAAOpC,eAAe,CAAE,GAAEmC,aAAc,EAAlB,CAAf,CACJ,GAAEC,cAAe,EADb,EAELF,GAFK,CAEAG,YAAD,IAAkB;cACtB,oBACE,QAAC,IAAD;gBAEE,YAAY,EAAEF,aAFhB;gBAGE,aAAa,EAAEC,cAHjB;gBAIE,KAAK,EAAEC;cAJT,GACQ,GAAEA,YAAa,EADvB;gBAAA;gBAAA;gBAAA;cAAA,QADF;YAQD,CAXM,CAAP;UAYD,CAdI,CAAP;QAgBD,CAjBA;MADH;QAAA;QAAA;QAAA;MAAA,QADF,eAqBE,QAAC,cAAD;QAAA,uBACE,QAAC,WAAD;UAAa,OAAO,EAAEd,gBAAtB;UAAA,wBACE,QAAC,SAAD;YAAW,QAAQ,EAAE,OAArB;YAA8B,IAAI,EAAC;UAAnC;YAAA;YAAA;YAAA;UAAA,QADF;QAAA;UAAA;UAAA;UAAA;QAAA;MADF;QAAA;QAAA;QAAA;MAAA,QArBF;IAAA;MAAA;MAAA;MAAA;IAAA,QAxCF;EAAA;IAAA;IAAA;IAAA;EAAA,QADF;AAuED,CAjHM;;GAAM9B,S;UAKMnB,c,EACCC,c,EACMA,c;;;KAPbkB,S"},"metadata":{},"sourceType":"module"}