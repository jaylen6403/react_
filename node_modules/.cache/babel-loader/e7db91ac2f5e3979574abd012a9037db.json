{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/components/EventConfirmations/ClientApproverEventConfirmations/ClientApproverEventConfirmations.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/web.url-search-params.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.search.js\";\nimport { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { URL_PATHS } from '@luma-fe-workspace/utility';\nimport { generateUnderliers, formatIssuerColumn, generateActions, IssuerNameTooltip, StatusComponent, StructuredComponent } from '../../AGGridTable/AGGridTableComponents';\nimport { AGGridConfirmationsTable } from '../../AGGridTable/AGGridTable';\nimport { EmailPreviewDrawer } from '../../EmailPreviewDrawer';\nimport { EventDetail } from '../../EventDetail/EventDetail';\nimport { formatEventStatus, formatEventType, ISODateToFormat, observationDateFilterComparator } from '../../../utils/gridUtils';\nimport { ConfirmationPopUp } from '../../ConfirmationPopUp/ConfirmationPopUp';\nimport { useEventConfirmationOptions, StatusOptions } from '../../../utils/hooks/useEventConfirmationOptions';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const ClientApproverEventConfirmations = ({\n  eventsData\n}) => {\n  _s();\n\n  const {\n    events,\n    clientModal,\n    toastData\n  } = useEventConfirmationOptions();\n  const [rowData, setRowData] = useState([]);\n  const [productStructure, setProductStructure] = useState(undefined);\n  const [columnDefs] = useState([{\n    field: 'Product',\n    cellRenderer: formatIssuerColumn,\n    tooltipComponent: IssuerNameTooltip,\n    tooltipField: 'Product',\n    suppressMenu: true\n  }, {\n    field: 'Obv Date',\n    comparator: observationDateFilterComparator\n  }, {\n    field: 'Event Type',\n    suppressMenu: true\n  }, {\n    field: 'Structure',\n    cellRenderer: StructuredComponent\n  }, {\n    field: 'Underliers',\n    cellRenderer: generateUnderliers,\n    sortable: false,\n    filter: false,\n    suppressMenu: true\n  }, {\n    field: 'Event Calculation',\n    cellRenderer: StatusComponent,\n    suppressMenu: true\n  }, {\n    field: 'Action',\n    cellRenderer: generateActions(clientModal.setData, setProductStructure),\n    suppressMenu: true,\n    sortable: false\n  }]);\n  useEffect(() => {\n    const compileRowData = () => {\n      const updatedEvents = eventsData.map(event => {\n        var _event$confirmationTy, _event$observationDat;\n\n        const eventType = formatEventType((_event$confirmationTy = event.confirmationType) != null ? _event$confirmationTy : event.eventType);\n        const eventStatus = formatEventStatus(event);\n        return {\n          Product: event.productIdentifier,\n          'Obv Date': ISODateToFormat((_event$observationDat = event.observationDate) != null ? _event$observationDat : event.eventDate),\n          'Event Type': eventType,\n          Structure: event.structureNameInternal,\n          Underliers: event.underlierList,\n          cusip: event.productIdentifier,\n          'Event Calculation': eventStatus == null ? void 0 : eventStatus.status,\n          basketType: event.basketType,\n          cashSettlementRates: event.cashSettlementRates,\n          eventStatus: eventStatus,\n          eventProductData: event,\n          productSymbol: event.productSymbol\n        };\n      });\n      setRowData(updatedEvents);\n    };\n\n    compileRowData();\n    events.setEvents(eventsData); // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [eventsData]);\n  const navigate = useNavigate();\n  const location = useLocation();\n  useEffect(() => {\n    const productQuery = new URLSearchParams(location.search).get('product');\n\n    if (productQuery) {\n      const event = eventsData.filter(elem => elem.productIdentifier === productQuery);\n      clientModal.setData(event[0]);\n      setProductStructure(event[0].structureNameInternal);\n    } // eslint-disable-next-line react-hooks/exhaustive-deps\n\n  }, [eventsData]);\n  useEffect(() => {\n    if (clientModal.data) navigate(`/${URL_PATHS.CONFIRMATIONS}?product=${clientModal.data.productIdentifier}`);else {\n      navigate(`/${URL_PATHS.CONFIRMATIONS}`);\n    }\n  }, [clientModal.data, navigate]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: [/*#__PURE__*/_jsxDEV(AGGridConfirmationsTable, {\n      rowData: rowData,\n      columnData: columnDefs\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(EmailPreviewDrawer, {\n      isOpen: Boolean(clientModal.data),\n      closeDrawer: () => clientModal.setData(undefined),\n      children: clientModal.data ? /*#__PURE__*/_jsxDEV(EventDetail, {\n        isOpen: Boolean(clientModal.data),\n        productData: clientModal.data,\n        closeDrawer: () => clientModal.setData(undefined)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 142,\n        columnNumber: 11\n      }, this) : null\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 137,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(ConfirmationPopUp, {\n      closePopUp: () => toastData.setStatus(StatusOptions.None),\n      productStructure: productStructure,\n      successHeader: \"Email Sent\",\n      failureHeader: \"Failed to Send\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 149,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true);\n};\n\n_s(ClientApproverEventConfirmations, \"5+0RIl8nQJKFgylKjV4uSbVO+4k=\", false, function () {\n  return [useEventConfirmationOptions, useNavigate, useLocation];\n});\n\n_c = ClientApproverEventConfirmations;\n\nvar _c;\n\n$RefreshReg$(_c, \"ClientApproverEventConfirmations\");","map":{"version":3,"names":["useState","useEffect","useNavigate","useLocation","URL_PATHS","generateUnderliers","formatIssuerColumn","generateActions","IssuerNameTooltip","StatusComponent","StructuredComponent","AGGridConfirmationsTable","EmailPreviewDrawer","EventDetail","formatEventStatus","formatEventType","ISODateToFormat","observationDateFilterComparator","ConfirmationPopUp","useEventConfirmationOptions","StatusOptions","ClientApproverEventConfirmations","eventsData","events","clientModal","toastData","rowData","setRowData","productStructure","setProductStructure","undefined","columnDefs","field","cellRenderer","tooltipComponent","tooltipField","suppressMenu","comparator","sortable","filter","setData","compileRowData","updatedEvents","map","event","eventType","confirmationType","eventStatus","Product","productIdentifier","observationDate","eventDate","Structure","structureNameInternal","Underliers","underlierList","cusip","status","basketType","cashSettlementRates","eventProductData","productSymbol","setEvents","navigate","location","productQuery","URLSearchParams","search","get","elem","data","CONFIRMATIONS","Boolean","setStatus","None"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/confirmation/src/components/EventConfirmations/ClientApproverEventConfirmations/ClientApproverEventConfirmations.tsx"],"sourcesContent":["import { useState, useEffect } from 'react';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport { EventProductData } from '@luma-fe-workspace/redux';\nimport { URL_PATHS } from '@luma-fe-workspace/utility';\n\nimport {\n  generateUnderliers,\n  formatIssuerColumn,\n  generateActions,\n  IssuerNameTooltip,\n  StatusComponent,\n  StructuredComponent,\n} from '../../AGGridTable/AGGridTableComponents';\nimport {\n  AGGridConfirmationsTable,\n  RowData,\n} from '../../AGGridTable/AGGridTable';\nimport { EmailPreviewDrawer } from '../../EmailPreviewDrawer';\nimport { EventDetail } from '../../EventDetail/EventDetail';\nimport {\n  formatEventStatus,\n  formatEventType,\n  ISODateToFormat,\n  observationDateFilterComparator,\n} from '../../../utils/gridUtils';\nimport { ConfirmationPopUp } from '../../ConfirmationPopUp/ConfirmationPopUp';\nimport {\n  useEventConfirmationOptions,\n  StatusOptions,\n} from '../../../utils/hooks/useEventConfirmationOptions';\ninterface Props {\n  eventsData: EventProductData[];\n}\n\nexport const ClientApproverEventConfirmations = ({ eventsData }: Props) => {\n  const { events, clientModal, toastData } = useEventConfirmationOptions();\n\n  const [rowData, setRowData] = useState<RowData[] | []>([]);\n\n  const [productStructure, setProductStructure] = useState<string | undefined>(\n    undefined\n  );\n\n  const [columnDefs] = useState([\n    {\n      field: 'Product',\n      cellRenderer: formatIssuerColumn,\n      tooltipComponent: IssuerNameTooltip,\n      tooltipField: 'Product',\n      suppressMenu: true,\n    },\n\n    {\n      field: 'Obv Date',\n      comparator: observationDateFilterComparator,\n    },\n    { field: 'Event Type', suppressMenu: true },\n    { field: 'Structure', cellRenderer: StructuredComponent },\n    {\n      field: 'Underliers',\n      cellRenderer: generateUnderliers,\n      sortable: false,\n      filter: false,\n      suppressMenu: true,\n    },\n    {\n      field: 'Event Calculation',\n      cellRenderer: StatusComponent,\n      suppressMenu: true,\n    },\n    {\n      field: 'Action',\n      cellRenderer: generateActions(clientModal.setData, setProductStructure),\n      suppressMenu: true,\n      sortable: false,\n    },\n  ]);\n\n  useEffect(() => {\n    const compileRowData = () => {\n      const updatedEvents = eventsData.map((event) => {\n        const eventType = formatEventType(\n          event.confirmationType ?? event.eventType\n        );\n        const eventStatus = formatEventStatus(event);\n\n        return {\n          Product: event.productIdentifier,\n          'Obv Date': ISODateToFormat(event.observationDate ?? event.eventDate),\n          'Event Type': eventType,\n          Structure: event.structureNameInternal,\n          Underliers: event.underlierList,\n          cusip: event.productIdentifier,\n          'Event Calculation': eventStatus?.status,\n          basketType: event.basketType,\n          cashSettlementRates: event.cashSettlementRates,\n          eventStatus: eventStatus,\n          eventProductData: event,\n          productSymbol: event.productSymbol,\n        };\n      });\n      setRowData(updatedEvents);\n    };\n    compileRowData();\n    events.setEvents(eventsData);\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [eventsData]);\n  const navigate = useNavigate();\n  const location = useLocation();\n\n  useEffect(() => {\n    const productQuery = new URLSearchParams(location.search).get('product');\n\n    if (productQuery) {\n      const event = eventsData.filter(\n        (elem) => elem.productIdentifier === productQuery\n      );\n      clientModal.setData(event[0]);\n      setProductStructure(event[0].structureNameInternal);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, [eventsData]);\n\n  useEffect(() => {\n    if (clientModal.data)\n      navigate(\n        `/${URL_PATHS.CONFIRMATIONS}?product=${clientModal.data.productIdentifier}`\n      );\n    else {\n      navigate(`/${URL_PATHS.CONFIRMATIONS}`);\n    }\n  }, [clientModal.data, navigate]);\n\n  return (\n    <>\n      <AGGridConfirmationsTable rowData={rowData} columnData={columnDefs} />\n      <EmailPreviewDrawer\n        isOpen={Boolean(clientModal.data)}\n        closeDrawer={() => clientModal.setData(undefined)}\n      >\n        {clientModal.data ? (\n          <EventDetail\n            isOpen={Boolean(clientModal.data)}\n            productData={clientModal.data}\n            closeDrawer={() => clientModal.setData(undefined)}\n          />\n        ) : null}\n      </EmailPreviewDrawer>\n      <ConfirmationPopUp\n        closePopUp={() => toastData.setStatus(StatusOptions.None)}\n        productStructure={productStructure}\n        successHeader=\"Email Sent\"\n        failureHeader=\"Failed to Send\"\n      />\n    </>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}