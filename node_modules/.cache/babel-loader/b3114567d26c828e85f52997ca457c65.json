{"ast":null,"code":"var _jsxFileName = \"/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/secondaries/src/lib/luma-secondaries.tsx\",\n    _s = $RefreshSig$();\n\nimport \"core-js/modules/es.array.iterator.js\";\nimport \"core-js/modules/web.dom-collections.iterator.js\";\nimport \"core-js/modules/es.array.includes.js\";\nimport \"core-js/modules/es.string.includes.js\";\nimport \"core-js/modules/es.symbol.description.js\";\nimport { Route, Routes, useLocation, useNavigate } from 'react-router-dom';\nimport { URL_PATHS } from '@luma-fe-workspace/common';\nimport { LumaSecondariesBody, LumaSecondariesContainer, StyledAppHeader, SecondariesDropdown } from './luma-secondaries.styles';\nimport { selectAccessToken, useAppSelector, useAppDispatch, useGetRequestForQuotesFromTodayUsingGetQuery, secondariesSlice, useGetOrdersByUserIdUsingGetQuery, selectMessageObject, selectPermissions, selectSecondaries, selectSecurityDetailsCusip, WidgetPermissions, useUiPermissionsQuery, lumaPermissionsArray, selectJwt } from '@luma-fe-workspace/redux';\nimport { SecondariesSearch } from '../components';\nimport { SecurityDetails } from '../components/SecurityDetails/SecurityDetails';\nimport { RFQModal } from '../components/RFQModal/RFQModal';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Message } from '@luma-fe-workspace/design-system';\nimport { Blotter } from '../components/Blotter/Blotter';\nimport { getWebsocketData } from '../utils/websocketUtil';\nimport { PendingOrderModal } from '../components/PendingOrderModal/PendingOrderModal';\nimport { ExecutionDetailModal } from '../components/ExecutionDetailsModal/ExecutionDetailsModal';\nimport { getMsTillUTCMarketOpen, getMsTillUTCMarketClose } from '../utils/getMsTillMarketClose';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport function LumaSecondaries() {\n  _s();\n\n  const {\n    pathname\n  } = useLocation();\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n  const accessToken = useAppSelector(selectAccessToken);\n  const JWT = useAppSelector(selectJwt);\n  const userName = JWT == null ? void 0 : JWT.user_name;\n  const permissions = useAppSelector(selectPermissions);\n  const messageObject = useAppSelector(selectMessageObject);\n  const initialRFQResponse = useGetRequestForQuotesFromTodayUsingGetQuery();\n  const initialOrderResponse = useGetOrdersByUserIdUsingGetQuery();\n  const secondariesStore = useAppSelector(selectSecondaries);\n  const pendingActionOrders = secondariesStore.pendingActionOrders;\n  const pendingExecutionDetails = secondariesStore.pendingExecutionDetails;\n  const securityDetailsCusip = useAppSelector(selectSecurityDetailsCusip);\n  const [liveRFQs, setLiveRFQs] = useState([]);\n  const [liveOrder, setLiveOrder] = useState();\n  const [outsideOfTradingHours, setOutsideOfTradingHours] = useState(false);\n  const [newCreatedRFQs, setNewCreatedRFQs] = useState([]);\n  const [showRFQModal, setShowRFQModal] = useState(false);\n  const location = useLocation();\n  useEffect(() => {\n    if (initialRFQResponse.isSuccess && userName) {\n      dispatch(secondariesSlice.actions.setAllRFQs({\n        RFQs: initialRFQResponse.data,\n        userName\n      }));\n    }\n  }, [dispatch, initialRFQResponse, userName]);\n  useEffect(() => {\n    if (initialOrderResponse.isSuccess) {\n      dispatch(secondariesSlice.actions.setAllOrders(initialOrderResponse.data));\n    }\n  }, [dispatch, initialOrderResponse]);\n  useEffect(() => {\n    // Websocket Connection\n    const argument = {\n      token: `${accessToken}`,\n      currentPath: `${pathname}`\n    };\n    getWebsocketData(argument, [setLiveRFQs, setLiveOrder]);\n    tradingStatusController();\n    const tradingStatusInterval = setInterval(() => {\n      tradingStatusController();\n    }, 28800000);\n    return () => {\n      clearInterval(tradingStatusInterval);\n    }; // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []); // Controller to determine whether the current time is within trading hours, currently set at\n  // 1:00pm (13:00) to 9:00pm (21:00) UTC or\n  // 9:00am to 5:00pm EST (US Equity Market Trading Window)\n  // Used to disable the Trade button\n\n  const tradingStatusController = () => {\n    const msTillMarketOpen = getMsTillUTCMarketOpen();\n    const msTillMarketClose = getMsTillUTCMarketClose();\n\n    if (msTillMarketOpen > 0) {\n      setOutsideOfTradingHours(true);\n      setTimeout(() => {\n        setOutsideOfTradingHours(false);\n      }, msTillMarketOpen);\n    }\n\n    if (msTillMarketClose > 0) {\n      setTimeout(() => {\n        setOutsideOfTradingHours(true);\n      }, msTillMarketClose);\n    } else {\n      setOutsideOfTradingHours(true);\n    }\n  };\n\n  useEffect(() => {\n    if (liveRFQs.length > 0 && userName) {\n      const newMyRFQs = liveRFQs.filter(RFQ => {\n        return RFQ.createdByUserId === userName;\n      });\n      const newAvailableRFQs = liveRFQs.filter(RFQ => RFQ.createdByUserId !== userName);\n\n      if (newMyRFQs.length > 0) {\n        dispatch(secondariesSlice.actions.updateMyRFQs({\n          RFQs: newMyRFQs\n        }));\n      }\n\n      if (newAvailableRFQs.length > 0) {\n        dispatch(secondariesSlice.actions.updateOrAddToAvailableRFQs(newAvailableRFQs));\n      }\n    }\n  }, [dispatch, liveRFQs, userName]);\n  useEffect(() => {\n    if (liveOrder) {\n      var _liveOrder$associated;\n\n      dispatch(secondariesSlice.actions.addOrUpdateOrders(liveOrder));\n\n      if (((_liveOrder$associated = liveOrder.associatedUserIds) == null ? void 0 : _liveOrder$associated.liquidityProvider) === userName && liveOrder.status === 'PENDING') {\n        dispatch(secondariesSlice.actions.addToPendingActionOrders(liveOrder));\n      } else if (liveOrder.status === 'FILLED') {\n        dispatch(secondariesSlice.actions.addToPendingExecutionDetails(liveOrder));\n      }\n    }\n  }, [dispatch, liveOrder, userName]); // useCallback is required to prevent unnecessary dispatches on rerender\n\n  const setShowMessage = useCallback(showMessage => {\n    dispatch(secondariesSlice.actions.setIsMessageShowing(showMessage));\n  }, [dispatch]); // Hide the message if it's showing\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n\n  useEffect(() => {\n    if (!messageObject.isMessageShowing) {\n      setShowMessage(false);\n    }\n  }, [dispatch, messageObject.isMessageShowing, setShowMessage]);\n  const {\n    data: userPermissionData\n  } = useUiPermissionsQuery({\n    permissions: lumaPermissionsArray\n  });\n  const userPermissions = useMemo(() => userPermissionData || [], [userPermissionData]);\n  useEffect(() => {\n    if (!permissions.includes('CAN_ACCESS_SECONDARIES')) {\n      navigate(`/${URL_PATHS.DASHBOARD}`);\n    } else {\n      if (location.pathname === '/secondaries') {\n        if (userPermissions.includes(WidgetPermissions.SecondariesRFQCreate)) {\n          navigate(`/secondaries/${URL_PATHS.QUOTES}`);\n        } else if (userPermissions.includes(WidgetPermissions.SecondariesRFQRespond)) {\n          navigate(`/secondaries/${URL_PATHS.LP_BLOTTER}`);\n        }\n      }\n    }\n  }, [location, navigate, permissions, userPermissions]);\n  const marketClosedTooltip = 'Trading is not allowed outside of US Equity Market Trading Hours (9:30am to 4:00pm ET)';\n  return /*#__PURE__*/_jsxDEV(LumaSecondariesContainer, {\n    children: [/*#__PURE__*/_jsxDEV(StyledAppHeader, {\n      title: \"Trade\",\n      centerContent: /*#__PURE__*/_jsxDEV(SecondariesSearch, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 216,\n        columnNumber: 24\n      }, this),\n      rightContent: /*#__PURE__*/_jsxDEV(SecondariesDropdown, {\n        items: [{\n          display: 'Request for Quote',\n          onClick: () => setShowRFQModal(true)\n        }],\n        placeholder: \"Trade\",\n        variant: \"primary\",\n        isDisabled: outsideOfTradingHours,\n        title: outsideOfTradingHours ? marketClosedTooltip : undefined\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 218,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 214,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(LumaSecondariesBody, {\n      children: [/*#__PURE__*/_jsxDEV(Routes, {\n        children: [userPermissions.includes(WidgetPermissions.SecondariesRFQRespond) && /*#__PURE__*/_jsxDEV(Route, {\n          path: `/${URL_PATHS.RFQ_SEARCH}`,\n          element: /*#__PURE__*/_jsxDEV(Blotter, {\n            liveRFQData: liveRFQs,\n            newCreatedRFQs: newCreatedRFQs,\n            setLiveRFQData: setLiveRFQs,\n            setNewCreatedRFQs: setNewCreatedRFQs,\n            liveOrderData: liveOrder,\n            setLiveOrderData: setLiveOrder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 240,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 13\n        }, this), userPermissions.includes(WidgetPermissions.SecondariesRFQRespond) && /*#__PURE__*/_jsxDEV(Route, {\n          path: `/${URL_PATHS.LP_BLOTTER}`,\n          element: /*#__PURE__*/_jsxDEV(Blotter, {\n            liveRFQData: liveRFQs,\n            newCreatedRFQs: newCreatedRFQs,\n            setLiveRFQData: setLiveRFQs,\n            setNewCreatedRFQs: setNewCreatedRFQs,\n            liveOrderData: liveOrder,\n            setLiveOrderData: setLiveOrder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 257,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 254,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(Route, {\n          path: `/${URL_PATHS.ORDERS}`,\n          element: /*#__PURE__*/_jsxDEV(Blotter, {\n            liveRFQData: liveRFQs,\n            newCreatedRFQs: newCreatedRFQs,\n            setLiveRFQData: setLiveRFQs,\n            setNewCreatedRFQs: setNewCreatedRFQs,\n            liveOrderData: liveOrder,\n            setLiveOrderData: setLiveOrder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 271,\n            columnNumber: 15\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 268,\n          columnNumber: 11\n        }, this), userPermissions.includes(WidgetPermissions.SecondariesRFQCreate) && /*#__PURE__*/_jsxDEV(Route, {\n          path: `/${URL_PATHS.QUOTES}`,\n          element: /*#__PURE__*/_jsxDEV(Blotter, {\n            liveRFQData: liveRFQs,\n            newCreatedRFQs: newCreatedRFQs,\n            setLiveRFQData: setLiveRFQs,\n            setNewCreatedRFQs: setNewCreatedRFQs,\n            liveOrderData: liveOrder,\n            setLiveOrderData: setLiveOrder\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 285,\n            columnNumber: 17\n          }, this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 282,\n          columnNumber: 13\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 233,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(RFQModal, {\n        showModal: showRFQModal,\n        setNewCreatedRFQs: setNewCreatedRFQs,\n        setShowModal: setShowRFQModal\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), securityDetailsCusip && /*#__PURE__*/_jsxDEV(SecurityDetails, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 302,\n        columnNumber: 34\n      }, this), pendingActionOrders.length > 0 && /*#__PURE__*/_jsxDEV(PendingOrderModal, {\n        setLiveOrder: setLiveOrder\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 304,\n        columnNumber: 11\n      }, this), pendingExecutionDetails.length > 0 && /*#__PURE__*/_jsxDEV(ExecutionDetailModal, {}, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 306,\n        columnNumber: 48\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 232,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(Message, {\n      title: messageObject.title,\n      description: messageObject.description,\n      showMessage: messageObject.isMessageShowing && !showRFQModal,\n      setShowMessage: setShowMessage,\n      messageType: messageObject.messageType // Seconds the message is visible before closing.\n      ,\n      timer: 5\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 308,\n      columnNumber: 7\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 213,\n    columnNumber: 5\n  }, this);\n}\n\n_s(LumaSecondaries, \"2xy6YT1hDdCn95TeQa7u8D2lwD8=\", false, function () {\n  return [useLocation, useNavigate, useAppDispatch, useAppSelector, useAppSelector, useAppSelector, useAppSelector, useGetRequestForQuotesFromTodayUsingGetQuery, useGetOrdersByUserIdUsingGetQuery, useAppSelector, useAppSelector, useLocation, useUiPermissionsQuery];\n});\n\n_c = LumaSecondaries;\nexport default LumaSecondaries;\n\nvar _c;\n\n$RefreshReg$(_c, \"LumaSecondaries\");","map":{"version":3,"names":["Route","Routes","useLocation","useNavigate","URL_PATHS","LumaSecondariesBody","LumaSecondariesContainer","StyledAppHeader","SecondariesDropdown","selectAccessToken","useAppSelector","useAppDispatch","useGetRequestForQuotesFromTodayUsingGetQuery","secondariesSlice","useGetOrdersByUserIdUsingGetQuery","selectMessageObject","selectPermissions","selectSecondaries","selectSecurityDetailsCusip","WidgetPermissions","useUiPermissionsQuery","lumaPermissionsArray","selectJwt","SecondariesSearch","SecurityDetails","RFQModal","useCallback","useEffect","useMemo","useState","Message","Blotter","getWebsocketData","PendingOrderModal","ExecutionDetailModal","getMsTillUTCMarketOpen","getMsTillUTCMarketClose","LumaSecondaries","pathname","navigate","dispatch","accessToken","JWT","userName","user_name","permissions","messageObject","initialRFQResponse","initialOrderResponse","secondariesStore","pendingActionOrders","pendingExecutionDetails","securityDetailsCusip","liveRFQs","setLiveRFQs","liveOrder","setLiveOrder","outsideOfTradingHours","setOutsideOfTradingHours","newCreatedRFQs","setNewCreatedRFQs","showRFQModal","setShowRFQModal","location","isSuccess","actions","setAllRFQs","RFQs","data","setAllOrders","argument","token","currentPath","tradingStatusController","tradingStatusInterval","setInterval","clearInterval","msTillMarketOpen","msTillMarketClose","setTimeout","length","newMyRFQs","filter","RFQ","createdByUserId","newAvailableRFQs","updateMyRFQs","updateOrAddToAvailableRFQs","addOrUpdateOrders","associatedUserIds","liquidityProvider","status","addToPendingActionOrders","addToPendingExecutionDetails","setShowMessage","showMessage","setIsMessageShowing","isMessageShowing","userPermissionData","userPermissions","includes","DASHBOARD","SecondariesRFQCreate","QUOTES","SecondariesRFQRespond","LP_BLOTTER","marketClosedTooltip","display","onClick","undefined","RFQ_SEARCH","ORDERS","title","description","messageType"],"sources":["/Users/jchen/Documents/GitHub/luma-fe-workspace/libs/luma/secondaries/src/lib/luma-secondaries.tsx"],"sourcesContent":["import { Route, Routes, useLocation, useNavigate } from 'react-router-dom';\nimport { URL_PATHS } from '@luma-fe-workspace/common';\nimport {\n  LumaSecondariesBody,\n  LumaSecondariesContainer,\n  StyledAppHeader,\n  SecondariesDropdown,\n} from './luma-secondaries.styles';\nimport {\n  selectAccessToken,\n  useAppSelector,\n  useAppDispatch,\n  useGetRequestForQuotesFromTodayUsingGetQuery,\n  secondariesSlice,\n  SecondaryRequestForQuote,\n  useGetOrdersByUserIdUsingGetQuery,\n  selectMessageObject,\n  SecondaryOrder,\n  selectPermissions,\n  selectSecondaries,\n  selectSecurityDetailsCusip,\n  WidgetPermissions,\n  useUiPermissionsQuery,\n  lumaPermissionsArray,\n  selectJwt,\n} from '@luma-fe-workspace/redux';\nimport { SecondariesSearch } from '../components';\nimport { SecurityDetails } from '../components/SecurityDetails/SecurityDetails';\nimport { RFQModal } from '../components/RFQModal/RFQModal';\nimport { useCallback, useEffect, useMemo, useState } from 'react';\nimport { Message } from '@luma-fe-workspace/design-system';\nimport { Blotter } from '../components/Blotter/Blotter';\nimport {\n  getWebsocketData,\n  SecondaryWebsocketProps,\n} from '../utils/websocketUtil';\nimport { PendingOrderModal } from '../components/PendingOrderModal/PendingOrderModal';\nimport { ExecutionDetailModal } from '../components/ExecutionDetailsModal/ExecutionDetailsModal';\nimport {\n  getMsTillUTCMarketOpen,\n  getMsTillUTCMarketClose,\n} from '../utils/getMsTillMarketClose';\nexport function LumaSecondaries() {\n  const { pathname } = useLocation();\n  const navigate = useNavigate();\n  const dispatch = useAppDispatch();\n  const accessToken = useAppSelector(selectAccessToken);\n  const JWT = useAppSelector(selectJwt);\n  const userName = JWT?.user_name;\n  const permissions = useAppSelector(selectPermissions);\n  const messageObject = useAppSelector(selectMessageObject);\n  const initialRFQResponse = useGetRequestForQuotesFromTodayUsingGetQuery();\n  const initialOrderResponse = useGetOrdersByUserIdUsingGetQuery();\n  const secondariesStore = useAppSelector(selectSecondaries);\n  const pendingActionOrders = secondariesStore.pendingActionOrders;\n  const pendingExecutionDetails = secondariesStore.pendingExecutionDetails;\n  const securityDetailsCusip = useAppSelector(selectSecurityDetailsCusip);\n  const [liveRFQs, setLiveRFQs] = useState<SecondaryRequestForQuote[]>([]);\n  const [liveOrder, setLiveOrder] = useState<SecondaryOrder>();\n  const [outsideOfTradingHours, setOutsideOfTradingHours] = useState(false);\n  const [newCreatedRFQs, setNewCreatedRFQs] = useState<\n    SecondaryRequestForQuote[]\n  >([]);\n  const [showRFQModal, setShowRFQModal] = useState<boolean>(false);\n  const location = useLocation();\n\n  useEffect(() => {\n    if (initialRFQResponse.isSuccess && userName) {\n      dispatch(\n        secondariesSlice.actions.setAllRFQs({\n          RFQs: initialRFQResponse.data,\n          userName,\n        })\n      );\n    }\n  }, [dispatch, initialRFQResponse, userName]);\n\n  useEffect(() => {\n    if (initialOrderResponse.isSuccess) {\n      dispatch(\n        secondariesSlice.actions.setAllOrders(initialOrderResponse.data)\n      );\n    }\n  }, [dispatch, initialOrderResponse]);\n\n  useEffect(() => {\n    // Websocket Connection\n    const argument: SecondaryWebsocketProps = {\n      token: `${accessToken}`,\n      currentPath: `${pathname}`,\n    };\n    getWebsocketData(argument, [setLiveRFQs, setLiveOrder]);\n\n    tradingStatusController();\n    const tradingStatusInterval = setInterval(() => {\n      tradingStatusController();\n    }, 28800000);\n\n    return () => {\n      clearInterval(tradingStatusInterval);\n    };\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  // Controller to determine whether the current time is within trading hours, currently set at\n  // 1:00pm (13:00) to 9:00pm (21:00) UTC or\n  // 9:00am to 5:00pm EST (US Equity Market Trading Window)\n  // Used to disable the Trade button\n  const tradingStatusController = () => {\n    const msTillMarketOpen = getMsTillUTCMarketOpen();\n    const msTillMarketClose = getMsTillUTCMarketClose();\n\n    if (msTillMarketOpen > 0) {\n      setOutsideOfTradingHours(true);\n      setTimeout(() => {\n        setOutsideOfTradingHours(false);\n      }, msTillMarketOpen);\n    }\n\n    if (msTillMarketClose > 0) {\n      setTimeout(() => {\n        setOutsideOfTradingHours(true);\n      }, msTillMarketClose);\n    } else {\n      setOutsideOfTradingHours(true);\n    }\n  };\n\n  useEffect(() => {\n    if (liveRFQs.length > 0 && userName) {\n      const newMyRFQs = liveRFQs.filter((RFQ: SecondaryRequestForQuote) => {\n        return RFQ.createdByUserId === userName;\n      });\n      const newAvailableRFQs = liveRFQs.filter(\n        (RFQ: SecondaryRequestForQuote) => RFQ.createdByUserId !== userName\n      );\n      if (newMyRFQs.length > 0) {\n        dispatch(\n          secondariesSlice.actions.updateMyRFQs({\n            RFQs: newMyRFQs,\n          })\n        );\n      }\n      if (newAvailableRFQs.length > 0) {\n        dispatch(\n          secondariesSlice.actions.updateOrAddToAvailableRFQs(newAvailableRFQs)\n        );\n      }\n    }\n  }, [dispatch, liveRFQs, userName]);\n\n  useEffect(() => {\n    if (liveOrder) {\n      dispatch(secondariesSlice.actions.addOrUpdateOrders(liveOrder));\n      if (\n        liveOrder.associatedUserIds?.liquidityProvider === userName &&\n        liveOrder.status === 'PENDING'\n      ) {\n        dispatch(secondariesSlice.actions.addToPendingActionOrders(liveOrder));\n      } else if (liveOrder.status === 'FILLED') {\n        dispatch(\n          secondariesSlice.actions.addToPendingExecutionDetails(liveOrder)\n        );\n      }\n    }\n  }, [dispatch, liveOrder, userName]);\n\n  // useCallback is required to prevent unnecessary dispatches on rerender\n  const setShowMessage = useCallback(\n    (showMessage: boolean) => {\n      dispatch(secondariesSlice.actions.setIsMessageShowing(showMessage));\n    },\n    [dispatch]\n  );\n\n  // Hide the message if it's showing\n  // eslint-disable-next-line @typescript-eslint/no-empty-function\n  useEffect(() => {\n    if (!messageObject.isMessageShowing) {\n      setShowMessage(false);\n    }\n  }, [dispatch, messageObject.isMessageShowing, setShowMessage]);\n\n  const { data: userPermissionData } = useUiPermissionsQuery({\n    permissions: lumaPermissionsArray,\n  });\n\n  const userPermissions: WidgetPermissions[] = useMemo(\n    () => userPermissionData || [],\n    [userPermissionData]\n  );\n\n  useEffect(() => {\n    if (!permissions.includes('CAN_ACCESS_SECONDARIES')) {\n      navigate(`/${URL_PATHS.DASHBOARD}`);\n    } else {\n      if (location.pathname === '/secondaries') {\n        if (userPermissions.includes(WidgetPermissions.SecondariesRFQCreate)) {\n          navigate(`/secondaries/${URL_PATHS.QUOTES}`);\n        } else if (\n          userPermissions.includes(WidgetPermissions.SecondariesRFQRespond)\n        ) {\n          navigate(`/secondaries/${URL_PATHS.LP_BLOTTER}`);\n        }\n      }\n    }\n  }, [location, navigate, permissions, userPermissions]);\n\n  const marketClosedTooltip =\n    'Trading is not allowed outside of US Equity Market Trading Hours (9:30am to 4:00pm ET)';\n\n  return (\n    <LumaSecondariesContainer>\n      <StyledAppHeader\n        title=\"Trade\"\n        centerContent={<SecondariesSearch />}\n        rightContent={\n          <SecondariesDropdown\n            items={[\n              {\n                display: 'Request for Quote',\n                onClick: () => setShowRFQModal(true),\n              },\n            ]}\n            placeholder=\"Trade\"\n            variant=\"primary\"\n            isDisabled={outsideOfTradingHours}\n            title={outsideOfTradingHours ? marketClosedTooltip : undefined}\n          />\n        }\n      />\n      <LumaSecondariesBody>\n        <Routes>\n          {userPermissions.includes(\n            WidgetPermissions.SecondariesRFQRespond\n          ) && (\n            <Route\n              path={`/${URL_PATHS.RFQ_SEARCH}`}\n              element={\n                <Blotter\n                  liveRFQData={liveRFQs}\n                  newCreatedRFQs={newCreatedRFQs}\n                  setLiveRFQData={setLiveRFQs}\n                  setNewCreatedRFQs={setNewCreatedRFQs}\n                  liveOrderData={liveOrder}\n                  setLiveOrderData={setLiveOrder}\n                />\n              }\n            />\n          )}\n          {userPermissions.includes(\n            WidgetPermissions.SecondariesRFQRespond\n          ) && (\n            <Route\n              path={`/${URL_PATHS.LP_BLOTTER}`}\n              element={\n                <Blotter\n                  liveRFQData={liveRFQs}\n                  newCreatedRFQs={newCreatedRFQs}\n                  setLiveRFQData={setLiveRFQs}\n                  setNewCreatedRFQs={setNewCreatedRFQs}\n                  liveOrderData={liveOrder}\n                  setLiveOrderData={setLiveOrder}\n                />\n              }\n            />\n          )}\n          <Route\n            path={`/${URL_PATHS.ORDERS}`}\n            element={\n              <Blotter\n                liveRFQData={liveRFQs}\n                newCreatedRFQs={newCreatedRFQs}\n                setLiveRFQData={setLiveRFQs}\n                setNewCreatedRFQs={setNewCreatedRFQs}\n                liveOrderData={liveOrder}\n                setLiveOrderData={setLiveOrder}\n              />\n            }\n          />\n          {userPermissions.includes(WidgetPermissions.SecondariesRFQCreate) && (\n            <Route\n              path={`/${URL_PATHS.QUOTES}`}\n              element={\n                <Blotter\n                  liveRFQData={liveRFQs}\n                  newCreatedRFQs={newCreatedRFQs}\n                  setLiveRFQData={setLiveRFQs}\n                  setNewCreatedRFQs={setNewCreatedRFQs}\n                  liveOrderData={liveOrder}\n                  setLiveOrderData={setLiveOrder}\n                />\n              }\n            />\n          )}\n        </Routes>\n        <RFQModal\n          showModal={showRFQModal}\n          setNewCreatedRFQs={setNewCreatedRFQs}\n          setShowModal={setShowRFQModal}\n        />\n        {securityDetailsCusip && <SecurityDetails />}\n        {pendingActionOrders.length > 0 && (\n          <PendingOrderModal setLiveOrder={setLiveOrder} />\n        )}\n        {pendingExecutionDetails.length > 0 && <ExecutionDetailModal />}\n      </LumaSecondariesBody>\n      <Message\n        title={messageObject.title}\n        description={messageObject.description}\n        showMessage={messageObject.isMessageShowing && !showRFQModal}\n        setShowMessage={setShowMessage}\n        messageType={messageObject.messageType}\n        // Seconds the message is visible before closing.\n        timer={5}\n      />\n    </LumaSecondariesContainer>\n  );\n}\n\nexport default LumaSecondaries;\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}